var zy=Object.defineProperty;var By=(t,e,n)=>e in t?zy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ha=(t,e,n)=>(By(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function $y(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tf={exports:{}},Os={},nf={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),Ky=Symbol.for("react.portal"),Gy=Symbol.for("react.fragment"),Vy=Symbol.for("react.strict_mode"),Wy=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),Qy=Symbol.for("react.context"),Yy=Symbol.for("react.forward_ref"),Jy=Symbol.for("react.suspense"),Xy=Symbol.for("react.memo"),Zy=Symbol.for("react.lazy"),cd=Symbol.iterator;function ev(t){return t===null||typeof t!="object"?null:(t=cd&&t[cd]||t["@@iterator"],typeof t=="function"?t:null)}var rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},of=Object.assign,sf={};function Vr(t,e,n){this.props=t,this.context=e,this.refs=sf,this.updater=n||rf}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function af(){}af.prototype=Vr.prototype;function tc(t,e,n){this.props=t,this.context=e,this.refs=sf,this.updater=n||rf}var nc=tc.prototype=new af;nc.constructor=tc;of(nc,Vr.prototype);nc.isPureReactComponent=!0;var ud=Array.isArray,lf=Object.prototype.hasOwnProperty,rc={current:null},cf={key:!0,ref:!0,__self:!0,__source:!0};function uf(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)lf.call(e,r)&&!cf.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Jo,type:t,key:i,ref:s,props:o,_owner:rc.current}}function tv(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function nv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dd=/\/+/g;function fa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nv(""+t.key):e.toString(36)}function Ri(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Jo:case Ky:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+fa(s,0):r,ud(o)?(n="",t!=null&&(n=t.replace(dd,"$&/")+"/"),Ri(o,e,n,"",function(u){return u})):o!=null&&(oc(o)&&(o=tv(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(dd,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",ud(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+fa(i,a);s+=Ri(i,e,n,c,o)}else if(c=ev(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+fa(i,a++),s+=Ri(i,e,n,c,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function si(t,e,n){if(t==null)return t;var r=[],o=0;return Ri(t,r,"","",function(i){return e.call(n,i,o++)}),r}function rv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qe={current:null},bi={transition:null},ov={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:bi,ReactCurrentOwner:rc};function df(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:si,forEach:function(t,e,n){si(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return si(t,function(){e++}),e},toArray:function(t){return si(t,function(e){return e})||[]},only:function(t){if(!oc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=Vr;Y.Fragment=Gy;Y.Profiler=Wy;Y.PureComponent=tc;Y.StrictMode=Vy;Y.Suspense=Jy;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ov;Y.act=df;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=of({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=rc.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)lf.call(e,c)&&!cf.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Jo,type:t.type,key:o,ref:i,props:r,_owner:s}};Y.createContext=function(t){return t={$$typeof:Qy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qy,_context:t},t.Consumer=t};Y.createElement=uf;Y.createFactory=function(t){var e=uf.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:Yy,render:t}};Y.isValidElement=oc;Y.lazy=function(t){return{$$typeof:Zy,_payload:{_status:-1,_result:t},_init:rv}};Y.memo=function(t,e){return{$$typeof:Xy,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=bi.transition;bi.transition={};try{t()}finally{bi.transition=e}};Y.unstable_act=df;Y.useCallback=function(t,e){return Qe.current.useCallback(t,e)};Y.useContext=function(t){return Qe.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Qe.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Qe.current.useEffect(t,e)};Y.useId=function(){return Qe.current.useId()};Y.useImperativeHandle=function(t,e,n){return Qe.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Qe.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Qe.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Qe.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Qe.current.useReducer(t,e,n)};Y.useRef=function(t){return Qe.current.useRef(t)};Y.useState=function(t){return Qe.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Qe.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Qe.current.useTransition()};Y.version="18.3.1";nf.exports=Y;var A=nf.exports;const Tt=$y(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=A,sv=Symbol.for("react.element"),av=Symbol.for("react.fragment"),lv=Object.prototype.hasOwnProperty,cv=iv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uv={key:!0,ref:!0,__self:!0,__source:!0};function hf(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)lv.call(e,r)&&!uv.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:sv,type:t,key:i,ref:s,props:o,_owner:cv.current}}Os.Fragment=av;Os.jsx=hf;Os.jsxs=hf;tf.exports=Os;var l=tf.exports,Ga={},ff={exports:{}},mt={},mf={exports:{}},gf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,F){var j=_.length;_.push(F);e:for(;0<j;){var X=j-1>>>1,q=_[X];if(0<o(q,F))_[X]=F,_[j]=q,j=X;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var F=_[0],j=_.pop();if(j!==F){_[0]=j;e:for(var X=0,q=_.length,Bt=q>>>1;X<Bt;){var st=2*(X+1)-1,Bn=_[st],At=st+1,$t=_[At];if(0>o(Bn,j))At<q&&0>o($t,Bn)?(_[X]=$t,_[At]=j,X=At):(_[X]=Bn,_[st]=j,X=st);else if(At<q&&0>o($t,j))_[X]=$t,_[At]=j,X=At;else break e}}return F}function o(_,F){var j=_.sortIndex-F.sortIndex;return j!==0?j:_.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,y=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(_){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=_)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function C(_){if(T=!1,m(_),!y)if(n(c)!==null)y=!0,O(N);else{var F=n(u);F!==null&&K(C,F.startTime-_)}}function N(_,F){y=!1,T&&(T=!1,v(D),D=-1),p=!0;var j=f;try{for(m(F),h=n(c);h!==null&&(!(h.expirationTime>F)||_&&!Ie());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var q=X(h.expirationTime<=F);F=t.unstable_now(),typeof q=="function"?h.callback=q:h===n(c)&&r(c),m(F)}else r(c);h=n(c)}if(h!==null)var Bt=!0;else{var st=n(u);st!==null&&K(C,st.startTime-F),Bt=!1}return Bt}finally{h=null,f=j,p=!1}}var M=!1,L=null,D=-1,re=5,W=-1;function Ie(){return!(t.unstable_now()-W<re)}function k(){if(L!==null){var _=t.unstable_now();W=_;var F=!0;try{F=L(!0,_)}finally{F?B():(M=!1,L=null)}}else M=!1}var B;if(typeof g=="function")B=function(){g(k)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,E=$.port2;$.port1.onmessage=k,B=function(){E.postMessage(null)}}else B=function(){R(k,0)};function O(_){L=_,M||(M=!0,B())}function K(_,F){D=R(function(){_(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,O(N))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(_){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var j=f;f=F;try{return _()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,F){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var j=f;f=_;try{return F()}finally{f=j}},t.unstable_scheduleCallback=function(_,F,j){var X=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?X+j:X):j=X,_){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=j+q,_={id:d++,callback:F,priorityLevel:_,startTime:j,expirationTime:q,sortIndex:-1},j>X?(_.sortIndex=j,e(u,_),n(c)===null&&_===n(u)&&(T?(v(D),D=-1):T=!0,K(C,j-X))):(_.sortIndex=q,e(c,_),y||p||(y=!0,O(N))),_},t.unstable_shouldYield=Ie,t.unstable_wrapCallback=function(_){var F=f;return function(){var j=f;f=F;try{return _.apply(this,arguments)}finally{f=j}}}})(gf);mf.exports=gf;var dv=mf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv=A,ft=dv;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pf=new Set,No={};function lr(t,e){jr(t,e),jr(t+"Capture",e)}function jr(t,e){for(No[t]=e,t=0;t<e.length;t++)pf.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,fv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hd={},fd={};function mv(t){return Va.call(fd,t)?!0:Va.call(hd,t)?!1:fv.test(t)?fd[t]=!0:(hd[t]=!0,!1)}function gv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pv(t,e,n,r){if(e===null||typeof e>"u"||gv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Me[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Me[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Me[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Me[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Me[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Me[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Me[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Me[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Me[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var ic=/[\-:]([a-z])/g;function sc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ic,sc);Me[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ic,sc);Me[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ic,sc);Me[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Me[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Me[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function ac(t,e,n,r){var o=Me.hasOwnProperty(e)?Me[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pv(e,n,o,r)&&(n=null),r||o===null?mv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mn=hv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ai=Symbol.for("react.element"),gr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),lc=Symbol.for("react.strict_mode"),Wa=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),cc=Symbol.for("react.forward_ref"),qa=Symbol.for("react.suspense"),Qa=Symbol.for("react.suspense_list"),uc=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),wf=Symbol.for("react.offscreen"),md=Symbol.iterator;function Zr(t){return t===null||typeof t!="object"?null:(t=md&&t[md]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,ma;function lo(t){if(ma===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ma=e&&e[1]||""}return`
`+ma+t}var ga=!1;function pa(t,e){if(!t||ga)return"";ga=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var c=`
`+o[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{ga=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lo(t):""}function yv(t){switch(t.tag){case 5:return lo(t.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return t=pa(t.type,!1),t;case 11:return t=pa(t.type.render,!1),t;case 1:return t=pa(t.type,!0),t;default:return""}}function Ya(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pr:return"Fragment";case gr:return"Portal";case Wa:return"Profiler";case lc:return"StrictMode";case qa:return"Suspense";case Qa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vf:return(t.displayName||"Context")+".Consumer";case yf:return(t._context.displayName||"Context")+".Provider";case cc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uc:return e=t.displayName||null,e!==null?e:Ya(t.type)||"Memo";case pn:e=t._payload,t=t._init;try{return Ya(t(e))}catch{}}return null}function vv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ya(e);case 8:return e===lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wv(t){var e=Cf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function li(t){t._valueTracker||(t._valueTracker=wv(t))}function Tf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Cf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ki(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ja(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sf(t,e){e=e.checked,e!=null&&ac(t,"checked",e,!1)}function Xa(t,e){Sf(t,e);var n=Ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Za(t,e.type,n):e.hasOwnProperty("defaultValue")&&Za(t,e.type,Ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Za(t,e,n){(e!=="number"||Ki(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var co=Array.isArray;function Ar(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ln(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function el(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(co(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ln(n)}}function xf(t,e){var n=Ln(e.value),r=Ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ci,Ef=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ci=ci||document.createElement("div"),ci.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ci.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cv=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(t){Cv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),go[e]=go[t]})});function If(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||go.hasOwnProperty(t)&&go[t]?(""+e).trim():e+"px"}function Af(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=If(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Tv=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nl(t,e){if(e){if(Tv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function rl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ol=null;function dc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var il=null,Nr=null,_r=null;function wd(t){if(t=ei(t)){if(typeof il!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Us(e),il(t.stateNode,t.type,e))}}function Nf(t){Nr?_r?_r.push(t):_r=[t]:Nr=t}function _f(){if(Nr){var t=Nr,e=_r;if(_r=Nr=null,wd(t),e)for(t=0;t<e.length;t++)wd(e[t])}}function Rf(t,e){return t(e)}function bf(){}var ya=!1;function Pf(t,e,n){if(ya)return t(e,n);ya=!0;try{return Rf(t,e,n)}finally{ya=!1,(Nr!==null||_r!==null)&&(bf(),_f())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=Us(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var sl=!1;if(cn)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){sl=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{sl=!1}function Sv(t,e,n,r,o,i,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var po=!1,Gi=null,Vi=!1,al=null,xv={onError:function(t){po=!0,Gi=t}};function kv(t,e,n,r,o,i,s,a,c){po=!1,Gi=null,Sv.apply(xv,arguments)}function Ev(t,e,n,r,o,i,s,a,c){if(kv.apply(this,arguments),po){if(po){var u=Gi;po=!1,Gi=null}else throw Error(P(198));Vi||(Vi=!0,al=u)}}function cr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Of(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cd(t){if(cr(t)!==t)throw Error(P(188))}function Iv(t){var e=t.alternate;if(!e){if(e=cr(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Cd(o),t;if(i===r)return Cd(o),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Mf(t){return t=Iv(t),t!==null?Lf(t):null}function Lf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lf(t);if(e!==null)return e;t=t.sibling}return null}var jf=ft.unstable_scheduleCallback,Td=ft.unstable_cancelCallback,Av=ft.unstable_shouldYield,Nv=ft.unstable_requestPaint,Ce=ft.unstable_now,_v=ft.unstable_getCurrentPriorityLevel,hc=ft.unstable_ImmediatePriority,Df=ft.unstable_UserBlockingPriority,Wi=ft.unstable_NormalPriority,Rv=ft.unstable_LowPriority,Uf=ft.unstable_IdlePriority,Ms=null,Jt=null;function bv(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Ms,t,void 0,(t.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Mv,Pv=Math.log,Ov=Math.LN2;function Mv(t){return t>>>=0,t===0?32:31-(Pv(t)/Ov|0)|0}var ui=64,di=4194304;function uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=uo(a):(i&=s,i!==0&&(r=uo(i)))}else s=n&~o,s!==0?r=uo(s):i!==0&&(r=uo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dt(e),o=1<<n,r|=t[n],e&=~o;return r}function Lv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Dt(i),a=1<<s,c=o[s];c===-1?(!(a&n)||a&r)&&(o[s]=Lv(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function ll(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ff(){var t=ui;return ui<<=1,!(ui&4194240)&&(ui=64),t}function va(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dt(e),t[e]=n}function Dv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Dt(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function fc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dt(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var ie=0;function Hf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zf,mc,Bf,$f,Kf,cl=!1,hi=[],kn=null,En=null,In=null,bo=new Map,Po=new Map,vn=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sd(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function to(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=ei(e),e!==null&&mc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Fv(t,e,n,r,o){switch(e){case"focusin":return kn=to(kn,t,e,n,r,o),!0;case"dragenter":return En=to(En,t,e,n,r,o),!0;case"mouseover":return In=to(In,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return bo.set(i,to(bo.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Po.set(i,to(Po.get(i)||null,t,e,n,r,o)),!0}return!1}function Gf(t){var e=Wn(t.target);if(e!==null){var n=cr(e);if(n!==null){if(e=n.tag,e===13){if(e=Of(n),e!==null){t.blockedOn=e,Kf(t.priority,function(){Bf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ul(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ol=r,n.target.dispatchEvent(r),ol=null}else return e=ei(n),e!==null&&mc(e),t.blockedOn=n,!1;e.shift()}return!0}function xd(t,e,n){Pi(t)&&n.delete(e)}function Hv(){cl=!1,kn!==null&&Pi(kn)&&(kn=null),En!==null&&Pi(En)&&(En=null),In!==null&&Pi(In)&&(In=null),bo.forEach(xd),Po.forEach(xd)}function no(t,e){t.blockedOn===e&&(t.blockedOn=null,cl||(cl=!0,ft.unstable_scheduleCallback(ft.unstable_NormalPriority,Hv)))}function Oo(t){function e(o){return no(o,t)}if(0<hi.length){no(hi[0],t);for(var n=1;n<hi.length;n++){var r=hi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&no(kn,t),En!==null&&no(En,t),In!==null&&no(In,t),bo.forEach(e),Po.forEach(e),n=0;n<vn.length;n++)r=vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vn.length&&(n=vn[0],n.blockedOn===null);)Gf(n),n.blockedOn===null&&vn.shift()}var Rr=mn.ReactCurrentBatchConfig,Qi=!0;function zv(t,e,n,r){var o=ie,i=Rr.transition;Rr.transition=null;try{ie=1,gc(t,e,n,r)}finally{ie=o,Rr.transition=i}}function Bv(t,e,n,r){var o=ie,i=Rr.transition;Rr.transition=null;try{ie=4,gc(t,e,n,r)}finally{ie=o,Rr.transition=i}}function gc(t,e,n,r){if(Qi){var o=ul(t,e,n,r);if(o===null)Na(t,e,r,Yi,n),Sd(t,r);else if(Fv(o,t,e,n,r))r.stopPropagation();else if(Sd(t,r),e&4&&-1<Uv.indexOf(t)){for(;o!==null;){var i=ei(o);if(i!==null&&zf(i),i=ul(t,e,n,r),i===null&&Na(t,e,r,Yi,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Na(t,e,r,null,n)}}var Yi=null;function ul(t,e,n,r){if(Yi=null,t=dc(r),t=Wn(t),t!==null)if(e=cr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Of(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yi=t,null}function Vf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_v()){case hc:return 1;case Df:return 4;case Wi:case Rv:return 16;case Uf:return 536870912;default:return 16}default:return 16}}var Tn=null,pc=null,Oi=null;function Wf(){if(Oi)return Oi;var t,e=pc,n=e.length,r,o="value"in Tn?Tn.value:Tn.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return Oi=o.slice(t,1<r?1-r:void 0)}function Mi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fi(){return!0}function kd(){return!1}function gt(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fi:kd,this.isPropagationStopped=kd,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),e}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yc=gt(Wr),Zo=ve({},Wr,{view:0,detail:0}),$v=gt(Zo),wa,Ca,ro,Ls=ve({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ro&&(ro&&t.type==="mousemove"?(wa=t.screenX-ro.screenX,Ca=t.screenY-ro.screenY):Ca=wa=0,ro=t),wa)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),Ed=gt(Ls),Kv=ve({},Ls,{dataTransfer:0}),Gv=gt(Kv),Vv=ve({},Zo,{relatedTarget:0}),Ta=gt(Vv),Wv=ve({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),qv=gt(Wv),Qv=ve({},Wr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yv=gt(Qv),Jv=ve({},Wr,{data:0}),Id=gt(Jv),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ew[t])?!!e[t]:!1}function vc(){return tw}var nw=ve({},Zo,{key:function(t){if(t.key){var e=Xv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(t){return t.type==="keypress"?Mi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rw=gt(nw),ow=ve({},Ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ad=gt(ow),iw=ve({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),sw=gt(iw),aw=ve({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),lw=gt(aw),cw=ve({},Ls,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uw=gt(cw),dw=[9,13,27,32],wc=cn&&"CompositionEvent"in window,yo=null;cn&&"documentMode"in document&&(yo=document.documentMode);var hw=cn&&"TextEvent"in window&&!yo,qf=cn&&(!wc||yo&&8<yo&&11>=yo),Nd=String.fromCharCode(32),_d=!1;function Qf(t,e){switch(t){case"keyup":return dw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function fw(t,e){switch(t){case"compositionend":return Yf(e);case"keypress":return e.which!==32?null:(_d=!0,Nd);case"textInput":return t=e.data,t===Nd&&_d?null:t;default:return null}}function mw(t,e){if(yr)return t==="compositionend"||!wc&&Qf(t,e)?(t=Wf(),Oi=pc=Tn=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qf&&e.locale!=="ko"?null:e.data;default:return null}}var gw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gw[t.type]:e==="textarea"}function Jf(t,e,n,r){Nf(r),e=Ji(e,"onChange"),0<e.length&&(n=new yc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Mo=null;function pw(t){lm(t,0)}function js(t){var e=Cr(t);if(Tf(e))return t}function yw(t,e){if(t==="change")return e}var Xf=!1;if(cn){var Sa;if(cn){var xa="oninput"in document;if(!xa){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),xa=typeof bd.oninput=="function"}Sa=xa}else Sa=!1;Xf=Sa&&(!document.documentMode||9<document.documentMode)}function Pd(){vo&&(vo.detachEvent("onpropertychange",Zf),Mo=vo=null)}function Zf(t){if(t.propertyName==="value"&&js(Mo)){var e=[];Jf(e,Mo,t,dc(t)),Pf(pw,e)}}function vw(t,e,n){t==="focusin"?(Pd(),vo=e,Mo=n,vo.attachEvent("onpropertychange",Zf)):t==="focusout"&&Pd()}function ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return js(Mo)}function Cw(t,e){if(t==="click")return js(e)}function Tw(t,e){if(t==="input"||t==="change")return js(e)}function Sw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Sw;function Lo(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Va.call(e,o)||!Ht(t[o],e[o]))return!1}return!0}function Od(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Md(t,e){var n=Od(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Od(n)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=Ki();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ki(t.document)}return e}function Cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xw(t){var e=tm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&em(n.ownerDocument.documentElement,n)){if(r!==null&&Cc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=Md(n,i);var s=Md(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kw=cn&&"documentMode"in document&&11>=document.documentMode,vr=null,dl=null,wo=null,hl=!1;function Ld(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hl||vr==null||vr!==Ki(r)||(r=vr,"selectionStart"in r&&Cc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wo&&Lo(wo,r)||(wo=r,r=Ji(dl,"onSelect"),0<r.length&&(e=new yc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vr)))}function mi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionend:mi("Transition","TransitionEnd")},ka={},nm={};cn&&(nm=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function Ds(t){if(ka[t])return ka[t];if(!wr[t])return t;var e=wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nm)return ka[t]=e[n];return t}var rm=Ds("animationend"),om=Ds("animationiteration"),im=Ds("animationstart"),sm=Ds("transitionend"),am=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(t,e){am.set(t,e),lr(e,[t])}for(var Ea=0;Ea<jd.length;Ea++){var Ia=jd[Ea],Ew=Ia.toLowerCase(),Iw=Ia[0].toUpperCase()+Ia.slice(1);Fn(Ew,"on"+Iw)}Fn(rm,"onAnimationEnd");Fn(om,"onAnimationIteration");Fn(im,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(sm,"onTransitionEnd");jr("onMouseEnter",["mouseout","mouseover"]);jr("onMouseLeave",["mouseout","mouseover"]);jr("onPointerEnter",["pointerout","pointerover"]);jr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function Dd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ev(r,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;Dd(o,a,u),i=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;Dd(o,a,u),i=c}}}if(Vi)throw t=al,Vi=!1,al=null,t}function ue(t,e){var n=e[yl];n===void 0&&(n=e[yl]=new Set);var r=t+"__bubble";n.has(r)||(cm(e,t,2,!1),n.add(r))}function Aa(t,e,n){var r=0;e&&(r|=4),cm(n,t,r,e)}var gi="_reactListening"+Math.random().toString(36).slice(2);function jo(t){if(!t[gi]){t[gi]=!0,pf.forEach(function(n){n!=="selectionchange"&&(Aw.has(n)||Aa(n,!1,t),Aa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gi]||(e[gi]=!0,Aa("selectionchange",!1,e))}}function cm(t,e,n,r){switch(Vf(e)){case 1:var o=zv;break;case 4:o=Bv;break;default:o=gc}n=o.bind(null,e,n,t),o=void 0,!sl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Na(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;a!==null;){if(s=Wn(a),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Pf(function(){var u=i,d=dc(n),h=[];e:{var f=am.get(t);if(f!==void 0){var p=yc,y=t;switch(t){case"keypress":if(Mi(n)===0)break e;case"keydown":case"keyup":p=rw;break;case"focusin":y="focus",p=Ta;break;case"focusout":y="blur",p=Ta;break;case"beforeblur":case"afterblur":p=Ta;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Gv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sw;break;case rm:case om:case im:p=qv;break;case sm:p=lw;break;case"scroll":p=$v;break;case"wheel":p=uw;break;case"copy":case"cut":case"paste":p=Yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ad}var T=(e&4)!==0,R=!T&&t==="scroll",v=T?f!==null?f+"Capture":null:f;T=[];for(var g=u,m;g!==null;){m=g;var C=m.stateNode;if(m.tag===5&&C!==null&&(m=C,v!==null&&(C=Ro(g,v),C!=null&&T.push(Do(g,C,m)))),R)break;g=g.return}0<T.length&&(f=new p(f,y,null,n,d),h.push({event:f,listeners:T}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==ol&&(y=n.relatedTarget||n.fromElement)&&(Wn(y)||y[un]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?Wn(y):null,y!==null&&(R=cr(y),y!==R||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(T=Ed,C="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(T=Ad,C="onPointerLeave",v="onPointerEnter",g="pointer"),R=p==null?f:Cr(p),m=y==null?f:Cr(y),f=new T(C,g+"leave",p,n,d),f.target=R,f.relatedTarget=m,C=null,Wn(d)===u&&(T=new T(v,g+"enter",y,n,d),T.target=m,T.relatedTarget=R,C=T),R=C,p&&y)t:{for(T=p,v=y,g=0,m=T;m;m=dr(m))g++;for(m=0,C=v;C;C=dr(C))m++;for(;0<g-m;)T=dr(T),g--;for(;0<m-g;)v=dr(v),m--;for(;g--;){if(T===v||v!==null&&T===v.alternate)break t;T=dr(T),v=dr(v)}T=null}else T=null;p!==null&&Ud(h,f,p,T,!1),y!==null&&R!==null&&Ud(h,R,y,T,!0)}}e:{if(f=u?Cr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=yw;else if(Rd(f))if(Xf)N=Tw;else{N=ww;var M=vw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Cw);if(N&&(N=N(t,u))){Jf(h,N,n,d);break e}M&&M(t,f,u),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Za(f,"number",f.value)}switch(M=u?Cr(u):window,t){case"focusin":(Rd(M)||M.contentEditable==="true")&&(vr=M,dl=u,wo=null);break;case"focusout":wo=dl=vr=null;break;case"mousedown":hl=!0;break;case"contextmenu":case"mouseup":case"dragend":hl=!1,Ld(h,n,d);break;case"selectionchange":if(kw)break;case"keydown":case"keyup":Ld(h,n,d)}var L;if(wc)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else yr?Qf(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(qf&&n.locale!=="ko"&&(yr||D!=="onCompositionStart"?D==="onCompositionEnd"&&yr&&(L=Wf()):(Tn=d,pc="value"in Tn?Tn.value:Tn.textContent,yr=!0)),M=Ji(u,D),0<M.length&&(D=new Id(D,t,null,n,d),h.push({event:D,listeners:M}),L?D.data=L:(L=Yf(n),L!==null&&(D.data=L)))),(L=hw?fw(t,n):mw(t,n))&&(u=Ji(u,"onBeforeInput"),0<u.length&&(d=new Id("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=L))}lm(h,e)})}function Do(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ji(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Ro(t,n),i!=null&&r.unshift(Do(t,i,o)),i=Ro(t,e),i!=null&&r.push(Do(t,i,o))),t=t.return}return r}function dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ud(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,o?(c=Ro(n,i),c!=null&&s.unshift(Do(n,c,a))):o||(c=Ro(n,i),c!=null&&s.push(Do(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Nw=/\r\n?/g,_w=/\u0000|\uFFFD/g;function Fd(t){return(typeof t=="string"?t:""+t).replace(Nw,`
`).replace(_w,"")}function pi(t,e,n){if(e=Fd(e),Fd(t)!==e&&n)throw Error(P(425))}function Xi(){}var fl=null,ml=null;function gl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pl=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,Hd=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Hd<"u"?function(t){return Hd.resolve(null).then(t).catch(Pw)}:pl;function Pw(t){setTimeout(function(){throw t})}function _a(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Oo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Oo(e)}function An(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qr=Math.random().toString(36).slice(2),qt="__reactFiber$"+qr,Uo="__reactProps$"+qr,un="__reactContainer$"+qr,yl="__reactEvents$"+qr,Ow="__reactListeners$"+qr,Mw="__reactHandles$"+qr;function Wn(t){var e=t[qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[un]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zd(t);t!==null;){if(n=t[qt])return n;t=zd(t)}return e}t=n,n=t.parentNode}return null}function ei(t){return t=t[qt]||t[un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Us(t){return t[Uo]||null}var vl=[],Tr=-1;function Hn(t){return{current:t}}function he(t){0>Tr||(t.current=vl[Tr],vl[Tr]=null,Tr--)}function ce(t,e){Tr++,vl[Tr]=t.current,t.current=e}var jn={},Be=Hn(jn),nt=Hn(!1),Zn=jn;function Dr(t,e){var n=t.type.contextTypes;if(!n)return jn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function rt(t){return t=t.childContextTypes,t!=null}function Zi(){he(nt),he(Be)}function Bd(t,e,n){if(Be.current!==jn)throw Error(P(168));ce(Be,e),ce(nt,n)}function um(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(P(108,vv(t)||"Unknown",o));return ve({},n,r)}function es(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jn,Zn=Be.current,ce(Be,t),ce(nt,nt.current),!0}function $d(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=um(t,e,Zn),r.__reactInternalMemoizedMergedChildContext=t,he(nt),he(Be),ce(Be,t)):he(nt),ce(nt,n)}var rn=null,Fs=!1,Ra=!1;function dm(t){rn===null?rn=[t]:rn.push(t)}function Lw(t){Fs=!0,dm(t)}function zn(){if(!Ra&&rn!==null){Ra=!0;var t=0,e=ie;try{var n=rn;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rn=null,Fs=!1}catch(o){throw rn!==null&&(rn=rn.slice(t+1)),jf(hc,zn),o}finally{ie=e,Ra=!1}}return null}var Sr=[],xr=0,ts=null,ns=0,yt=[],vt=0,er=null,on=1,sn="";function $n(t,e){Sr[xr++]=ns,Sr[xr++]=ts,ts=t,ns=e}function hm(t,e,n){yt[vt++]=on,yt[vt++]=sn,yt[vt++]=er,er=t;var r=on;t=sn;var o=32-Dt(r)-1;r&=~(1<<o),n+=1;var i=32-Dt(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,on=1<<32-Dt(e)+o|n<<o|r,sn=i+t}else on=1<<i|n<<o|r,sn=t}function Tc(t){t.return!==null&&($n(t,1),hm(t,1,0))}function Sc(t){for(;t===ts;)ts=Sr[--xr],Sr[xr]=null,ns=Sr[--xr],Sr[xr]=null;for(;t===er;)er=yt[--vt],yt[vt]=null,sn=yt[--vt],yt[vt]=null,on=yt[--vt],yt[vt]=null}var dt=null,ut=null,ge=!1,Mt=null;function fm(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dt=t,ut=An(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dt=t,ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=er!==null?{id:on,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dt=t,ut=null,!0):!1;default:return!1}}function wl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cl(t){if(ge){var e=ut;if(e){var n=e;if(!Kd(t,e)){if(wl(t))throw Error(P(418));e=An(n.nextSibling);var r=dt;e&&Kd(t,e)?fm(r,n):(t.flags=t.flags&-4097|2,ge=!1,dt=t)}}else{if(wl(t))throw Error(P(418));t.flags=t.flags&-4097|2,ge=!1,dt=t}}}function Gd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dt=t}function yi(t){if(t!==dt)return!1;if(!ge)return Gd(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gl(t.type,t.memoizedProps)),e&&(e=ut)){if(wl(t))throw mm(),Error(P(418));for(;e;)fm(t,e),e=An(e.nextSibling)}if(Gd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ut=An(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ut=null}}else ut=dt?An(t.stateNode.nextSibling):null;return!0}function mm(){for(var t=ut;t;)t=An(t.nextSibling)}function Ur(){ut=dt=null,ge=!1}function xc(t){Mt===null?Mt=[t]:Mt.push(t)}var jw=mn.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function vi(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vd(t){var e=t._init;return e(t._payload)}function gm(t){function e(v,g){if(t){var m=v.deletions;m===null?(v.deletions=[g],v.flags|=16):m.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function o(v,g){return v=bn(v,g),v.index=0,v.sibling=null,v}function i(v,g,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<g?(v.flags|=2,g):m):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,m,C){return g===null||g.tag!==6?(g=Da(m,v.mode,C),g.return=v,g):(g=o(g,m),g.return=v,g)}function c(v,g,m,C){var N=m.type;return N===pr?d(v,g,m.props.children,C,m.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===pn&&Vd(N)===g.type)?(C=o(g,m.props),C.ref=oo(v,g,m),C.return=v,C):(C=zi(m.type,m.key,m.props,null,v.mode,C),C.ref=oo(v,g,m),C.return=v,C)}function u(v,g,m,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Ua(m,v.mode,C),g.return=v,g):(g=o(g,m.children||[]),g.return=v,g)}function d(v,g,m,C,N){return g===null||g.tag!==7?(g=Jn(m,v.mode,C,N),g.return=v,g):(g=o(g,m),g.return=v,g)}function h(v,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Da(""+g,v.mode,m),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ai:return m=zi(g.type,g.key,g.props,null,v.mode,m),m.ref=oo(v,null,g),m.return=v,m;case gr:return g=Ua(g,v.mode,m),g.return=v,g;case pn:var C=g._init;return h(v,C(g._payload),m)}if(co(g)||Zr(g))return g=Jn(g,v.mode,m,null),g.return=v,g;vi(v,g)}return null}function f(v,g,m,C){var N=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return N!==null?null:a(v,g,""+m,C);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ai:return m.key===N?c(v,g,m,C):null;case gr:return m.key===N?u(v,g,m,C):null;case pn:return N=m._init,f(v,g,N(m._payload),C)}if(co(m)||Zr(m))return N!==null?null:d(v,g,m,C,null);vi(v,m)}return null}function p(v,g,m,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(m)||null,a(g,v,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ai:return v=v.get(C.key===null?m:C.key)||null,c(g,v,C,N);case gr:return v=v.get(C.key===null?m:C.key)||null,u(g,v,C,N);case pn:var M=C._init;return p(v,g,m,M(C._payload),N)}if(co(C)||Zr(C))return v=v.get(m)||null,d(g,v,C,N,null);vi(g,C)}return null}function y(v,g,m,C){for(var N=null,M=null,L=g,D=g=0,re=null;L!==null&&D<m.length;D++){L.index>D?(re=L,L=null):re=L.sibling;var W=f(v,L,m[D],C);if(W===null){L===null&&(L=re);break}t&&L&&W.alternate===null&&e(v,L),g=i(W,g,D),M===null?N=W:M.sibling=W,M=W,L=re}if(D===m.length)return n(v,L),ge&&$n(v,D),N;if(L===null){for(;D<m.length;D++)L=h(v,m[D],C),L!==null&&(g=i(L,g,D),M===null?N=L:M.sibling=L,M=L);return ge&&$n(v,D),N}for(L=r(v,L);D<m.length;D++)re=p(L,v,D,m[D],C),re!==null&&(t&&re.alternate!==null&&L.delete(re.key===null?D:re.key),g=i(re,g,D),M===null?N=re:M.sibling=re,M=re);return t&&L.forEach(function(Ie){return e(v,Ie)}),ge&&$n(v,D),N}function T(v,g,m,C){var N=Zr(m);if(typeof N!="function")throw Error(P(150));if(m=N.call(m),m==null)throw Error(P(151));for(var M=N=null,L=g,D=g=0,re=null,W=m.next();L!==null&&!W.done;D++,W=m.next()){L.index>D?(re=L,L=null):re=L.sibling;var Ie=f(v,L,W.value,C);if(Ie===null){L===null&&(L=re);break}t&&L&&Ie.alternate===null&&e(v,L),g=i(Ie,g,D),M===null?N=Ie:M.sibling=Ie,M=Ie,L=re}if(W.done)return n(v,L),ge&&$n(v,D),N;if(L===null){for(;!W.done;D++,W=m.next())W=h(v,W.value,C),W!==null&&(g=i(W,g,D),M===null?N=W:M.sibling=W,M=W);return ge&&$n(v,D),N}for(L=r(v,L);!W.done;D++,W=m.next())W=p(L,v,D,W.value,C),W!==null&&(t&&W.alternate!==null&&L.delete(W.key===null?D:W.key),g=i(W,g,D),M===null?N=W:M.sibling=W,M=W);return t&&L.forEach(function(k){return e(v,k)}),ge&&$n(v,D),N}function R(v,g,m,C){if(typeof m=="object"&&m!==null&&m.type===pr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ai:e:{for(var N=m.key,M=g;M!==null;){if(M.key===N){if(N=m.type,N===pr){if(M.tag===7){n(v,M.sibling),g=o(M,m.props.children),g.return=v,v=g;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===pn&&Vd(N)===M.type){n(v,M.sibling),g=o(M,m.props),g.ref=oo(v,M,m),g.return=v,v=g;break e}n(v,M);break}else e(v,M);M=M.sibling}m.type===pr?(g=Jn(m.props.children,v.mode,C,m.key),g.return=v,v=g):(C=zi(m.type,m.key,m.props,null,v.mode,C),C.ref=oo(v,g,m),C.return=v,v=C)}return s(v);case gr:e:{for(M=m.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){n(v,g.sibling),g=o(g,m.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Ua(m,v.mode,C),g.return=v,v=g}return s(v);case pn:return M=m._init,R(v,g,M(m._payload),C)}if(co(m))return y(v,g,m,C);if(Zr(m))return T(v,g,m,C);vi(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(n(v,g.sibling),g=o(g,m),g.return=v,v=g):(n(v,g),g=Da(m,v.mode,C),g.return=v,v=g),s(v)):n(v,g)}return R}var Fr=gm(!0),pm=gm(!1),rs=Hn(null),os=null,kr=null,kc=null;function Ec(){kc=kr=os=null}function Ic(t){var e=rs.current;he(rs),t._currentValue=e}function Tl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function br(t,e){os=t,kc=kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(et=!0),t.firstContext=null)}function xt(t){var e=t._currentValue;if(kc!==t)if(t={context:t,memoizedValue:e,next:null},kr===null){if(os===null)throw Error(P(308));kr=t,os.dependencies={lanes:0,firstContext:t}}else kr=kr.next=t;return e}var qn=null;function Ac(t){qn===null?qn=[t]:qn.push(t)}function ym(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Ac(e)):(n.next=o.next,o.next=n),e.interleaved=n,dn(t,r)}function dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yn=!1;function Nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,dn(t,n)}return o=r.interleaved,o===null?(e.next=e,Ac(r)):(e.next=o.next,o.next=e),r.interleaved=e,dn(t,n)}function Li(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fc(t,n)}}function Wd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function is(t,e,n,r){var o=t.updateQueue;yn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,u=c.next;c.next=null,s===null?i=u:s.next=u,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,T=a;switch(f=e,p=n,T.tag){case 1:if(y=T.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=T.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=ve({},h,f);break e;case 2:yn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,s|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(1);if(d===null&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);nr|=s,t.lanes=s,t.memoizedState=h}}function qd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(P(191,o));o.call(r)}}}var ti={},Xt=Hn(ti),Fo=Hn(ti),Ho=Hn(ti);function Qn(t){if(t===ti)throw Error(P(174));return t}function _c(t,e){switch(ce(Ho,e),ce(Fo,t),ce(Xt,ti),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tl(e,t)}he(Xt),ce(Xt,e)}function Hr(){he(Xt),he(Fo),he(Ho)}function wm(t){Qn(Ho.current);var e=Qn(Xt.current),n=tl(e,t.type);e!==n&&(ce(Fo,t),ce(Xt,n))}function Rc(t){Fo.current===t&&(he(Xt),he(Fo))}var pe=Hn(0);function ss(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ba=[];function bc(){for(var t=0;t<ba.length;t++)ba[t]._workInProgressVersionPrimary=null;ba.length=0}var ji=mn.ReactCurrentDispatcher,Pa=mn.ReactCurrentBatchConfig,tr=0,ye=null,xe=null,Ne=null,as=!1,Co=!1,zo=0,Dw=0;function je(){throw Error(P(321))}function Pc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Oc(t,e,n,r,o,i){if(tr=i,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ji.current=t===null||t.memoizedState===null?zw:Bw,t=n(r,o),Co){i=0;do{if(Co=!1,zo=0,25<=i)throw Error(P(301));i+=1,Ne=xe=null,e.updateQueue=null,ji.current=$w,t=n(r,o)}while(Co)}if(ji.current=ls,e=xe!==null&&xe.next!==null,tr=0,Ne=xe=ye=null,as=!1,e)throw Error(P(300));return t}function Mc(){var t=zo!==0;return zo=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ye.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function kt(){if(xe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=xe.next;var e=Ne===null?ye.memoizedState:Ne.next;if(e!==null)Ne=e,xe=t;else{if(t===null)throw Error(P(310));xe=t,t={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ne===null?ye.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function Bo(t,e){return typeof e=="function"?e(t):e}function Oa(t){var e=kt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=xe,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,c=null,u=i;do{var d=u.lane;if((tr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,ye.lanes|=d,nr|=d}u=u.next}while(u!==null&&u!==i);c===null?s=r:c.next=a,Ht(r,e.memoizedState)||(et=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,ye.lanes|=i,nr|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ma(t){var e=kt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Ht(i,e.memoizedState)||(et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Cm(){}function Tm(t,e){var n=ye,r=kt(),o=e(),i=!Ht(r.memoizedState,o);if(i&&(r.memoizedState=o,et=!0),r=r.queue,Lc(km.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,$o(9,xm.bind(null,n,r,o,e),void 0,null),Re===null)throw Error(P(349));tr&30||Sm(n,e,o)}return o}function Sm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xm(t,e,n,r){e.value=n,e.getSnapshot=r,Em(e)&&Im(t)}function km(t,e,n){return n(function(){Em(e)&&Im(t)})}function Em(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Im(t){var e=dn(t,1);e!==null&&Ut(e,t,1,-1)}function Qd(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},e.queue=t,t=t.dispatch=Hw.bind(null,ye,t),[e.memoizedState,t]}function $o(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Am(){return kt().memoizedState}function Di(t,e,n,r){var o=Wt();ye.flags|=t,o.memoizedState=$o(1|e,n,void 0,r===void 0?null:r)}function Hs(t,e,n,r){var o=kt();r=r===void 0?null:r;var i=void 0;if(xe!==null){var s=xe.memoizedState;if(i=s.destroy,r!==null&&Pc(r,s.deps)){o.memoizedState=$o(e,n,i,r);return}}ye.flags|=t,o.memoizedState=$o(1|e,n,i,r)}function Yd(t,e){return Di(8390656,8,t,e)}function Lc(t,e){return Hs(2048,8,t,e)}function Nm(t,e){return Hs(4,2,t,e)}function _m(t,e){return Hs(4,4,t,e)}function Rm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bm(t,e,n){return n=n!=null?n.concat([t]):null,Hs(4,4,Rm.bind(null,e,t),n)}function jc(){}function Pm(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Om(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mm(t,e,n){return tr&21?(Ht(n,e)||(n=Ff(),ye.lanes|=n,nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,et=!0),t.memoizedState=n)}function Uw(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=Pa.transition;Pa.transition={};try{t(!1),e()}finally{ie=n,Pa.transition=r}}function Lm(){return kt().memoizedState}function Fw(t,e,n){var r=Rn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jm(t))Dm(e,n);else if(n=ym(t,e,n,r),n!==null){var o=We();Ut(n,t,r,o),Um(n,e,r)}}function Hw(t,e,n){var r=Rn(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jm(t))Dm(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Ht(a,s)){var c=e.interleaved;c===null?(o.next=o,Ac(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=ym(t,e,o,r),n!==null&&(o=We(),Ut(n,t,r,o),Um(n,e,r))}}function jm(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function Dm(t,e){Co=as=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Um(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fc(t,n)}}var ls={readContext:xt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},zw={readContext:xt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:xt,useEffect:Yd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Di(4194308,4,Rm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Di(4194308,4,t,e)},useInsertionEffect:function(t,e){return Di(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fw.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:Qd,useDebugValue:jc,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=Qd(!1),e=t[0];return t=Uw.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,o=Wt();if(ge){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Re===null)throw Error(P(349));tr&30||Sm(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,Yd(km.bind(null,r,i,t),[t]),r.flags|=2048,$o(9,xm.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=Re.identifierPrefix;if(ge){var n=sn,r=on;n=(r&~(1<<32-Dt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bw={readContext:xt,useCallback:Pm,useContext:xt,useEffect:Lc,useImperativeHandle:bm,useInsertionEffect:Nm,useLayoutEffect:_m,useMemo:Om,useReducer:Oa,useRef:Am,useState:function(){return Oa(Bo)},useDebugValue:jc,useDeferredValue:function(t){var e=kt();return Mm(e,xe.memoizedState,t)},useTransition:function(){var t=Oa(Bo)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Cm,useSyncExternalStore:Tm,useId:Lm,unstable_isNewReconciler:!1},$w={readContext:xt,useCallback:Pm,useContext:xt,useEffect:Lc,useImperativeHandle:bm,useInsertionEffect:Nm,useLayoutEffect:_m,useMemo:Om,useReducer:Ma,useRef:Am,useState:function(){return Ma(Bo)},useDebugValue:jc,useDeferredValue:function(t){var e=kt();return xe===null?e.memoizedState=t:Mm(e,xe.memoizedState,t)},useTransition:function(){var t=Ma(Bo)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Cm,useSyncExternalStore:Tm,useId:Lm,unstable_isNewReconciler:!1};function bt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zs={isMounted:function(t){return(t=t._reactInternals)?cr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),o=Rn(t),i=ln(r,o);i.payload=e,n!=null&&(i.callback=n),e=Nn(t,i,o),e!==null&&(Ut(e,t,o,r),Li(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),o=Rn(t),i=ln(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Nn(t,i,o),e!==null&&(Ut(e,t,o,r),Li(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=Rn(t),o=ln(n,r);o.tag=2,e!=null&&(o.callback=e),e=Nn(t,o,r),e!==null&&(Ut(e,t,r,n),Li(e,t,r))}};function Jd(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Lo(n,r)||!Lo(o,i):!0}function Fm(t,e,n){var r=!1,o=jn,i=e.contextType;return typeof i=="object"&&i!==null?i=xt(i):(o=rt(e)?Zn:Be.current,r=e.contextTypes,i=(r=r!=null)?Dr(t,o):jn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zs.enqueueReplaceState(e,e.state,null)}function xl(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Nc(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=xt(i):(i=rt(e)?Zn:Be.current,o.context=Dr(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sl(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&zs.enqueueReplaceState(o,o.state,null),is(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function zr(t,e){try{var n="",r=e;do n+=yv(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function La(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kw=typeof WeakMap=="function"?WeakMap:Map;function Hm(t,e,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){us||(us=!0,Ml=r),kl(t,e)},n}function zm(t,e,n){n=ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){kl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kl(t,e),typeof r!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Zd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kw;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=oC.bind(null,t,e,n),e.then(t,t))}function eh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function th(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ln(-1,1),e.tag=2,Nn(n,e,1))),n.lanes|=1),t)}var Gw=mn.ReactCurrentOwner,et=!1;function Ke(t,e,n,r){e.child=t===null?pm(e,null,n,r):Fr(e,t.child,n,r)}function nh(t,e,n,r,o){n=n.render;var i=e.ref;return br(e,o),r=Oc(t,e,n,r,i,o),n=Mc(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hn(t,e,o)):(ge&&n&&Tc(e),e.flags|=1,Ke(t,e,r,o),e.child)}function rh(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Kc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Bm(t,e,i,r,o)):(t=zi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Lo,n(s,r)&&t.ref===e.ref)return hn(t,e,o)}return e.flags|=1,t=bn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Bm(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(Lo(i,r)&&t.ref===e.ref)if(et=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(et=!0);else return e.lanes=t.lanes,hn(t,e,o)}return El(t,e,n,r,o)}function $m(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Ir,ct),ct|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Ir,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ce(Ir,ct),ct|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ce(Ir,ct),ct|=r;return Ke(t,e,o,n),e.child}function Km(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function El(t,e,n,r,o){var i=rt(n)?Zn:Be.current;return i=Dr(e,i),br(e,o),n=Oc(t,e,n,r,i,o),r=Mc(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hn(t,e,o)):(ge&&r&&Tc(e),e.flags|=1,Ke(t,e,n,o),e.child)}function oh(t,e,n,r,o){if(rt(n)){var i=!0;es(e)}else i=!1;if(br(e,o),e.stateNode===null)Ui(t,e),Fm(e,n,r),xl(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=xt(u):(u=rt(n)?Zn:Be.current,u=Dr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Xd(e,s,r,u),yn=!1;var f=e.memoizedState;s.state=f,is(e,r,s,o),c=e.memoizedState,a!==r||f!==c||nt.current||yn?(typeof d=="function"&&(Sl(e,n,d,r),c=e.memoizedState),(a=yn||Jd(e,n,a,r,f,c,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,vm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:bt(e.type,a),s.props=u,h=e.pendingProps,f=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=xt(c):(c=rt(n)?Zn:Be.current,c=Dr(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==c)&&Xd(e,s,r,c),yn=!1,f=e.memoizedState,s.state=f,is(e,r,s,o);var y=e.memoizedState;a!==h||f!==y||nt.current||yn?(typeof p=="function"&&(Sl(e,n,p,r),y=e.memoizedState),(u=yn||Jd(e,n,u,r,f,y,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=c,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Il(t,e,n,r,i,o)}function Il(t,e,n,r,o,i){Km(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&$d(e,n,!1),hn(t,e,i);r=e.stateNode,Gw.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Fr(e,t.child,null,i),e.child=Fr(e,null,a,i)):Ke(t,e,a,i),e.memoizedState=r.state,o&&$d(e,n,!0),e.child}function Gm(t){var e=t.stateNode;e.pendingContext?Bd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bd(t,e.context,!1),_c(t,e.containerInfo)}function ih(t,e,n,r,o){return Ur(),xc(o),e.flags|=256,Ke(t,e,n,r),e.child}var Al={dehydrated:null,treeContext:null,retryLane:0};function Nl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vm(t,e,n){var r=e.pendingProps,o=pe.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ce(pe,o&1),t===null)return Cl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Ks(s,r,0,null),t=Jn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nl(n),e.memoizedState=Al,t):Dc(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Vw(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=bn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=bn(a,i):(i=Jn(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Nl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Al,r}return i=t.child,t=i.sibling,r=bn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dc(t,e){return e=Ks({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wi(t,e,n,r){return r!==null&&xc(r),Fr(e,t.child,null,n),t=Dc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Vw(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=La(Error(P(422))),wi(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Ks({mode:"visible",children:r.children},o,0,null),i=Jn(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fr(e,t.child,null,s),e.child.memoizedState=Nl(s),e.memoizedState=Al,i);if(!(e.mode&1))return wi(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=La(i,r,void 0),wi(t,e,s,r)}if(a=(s&t.childLanes)!==0,et||a){if(r=Re,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,dn(t,o),Ut(r,t,o,-1))}return $c(),r=La(Error(P(421))),wi(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=iC.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,ut=An(o.nextSibling),dt=e,ge=!0,Mt=null,t!==null&&(yt[vt++]=on,yt[vt++]=sn,yt[vt++]=er,on=t.id,sn=t.overflow,er=e),e=Dc(e,r.children),e.flags|=4096,e)}function sh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tl(t.return,e,n)}function ja(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Wm(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Ke(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sh(t,n,e);else if(t.tag===19)sh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(pe,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ss(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),ja(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ss(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}ja(e,!0,n,null,i);break;case"together":ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ui(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=bn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ww(t,e,n){switch(e.tag){case 3:Gm(e),Ur();break;case 5:wm(e);break;case 1:rt(e.type)&&es(e);break;case 4:_c(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;ce(rs,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?Vm(t,e,n):(ce(pe,pe.current&1),t=hn(t,e,n),t!==null?t.sibling:null);ce(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wm(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ce(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return hn(t,e,n)}var qm,_l,Qm,Ym;qm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_l=function(){};Qm=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Qn(Xt.current);var i=null;switch(n){case"input":o=Ja(t,o),r=Ja(t,r),i=[];break;case"select":o=ve({},o,{value:void 0}),r=ve({},r,{value:void 0}),i=[];break;case"textarea":o=el(t,o),r=el(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xi)}nl(n,r);var s;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(No.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(No.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ym=function(t,e,n,r){n!==r&&(e.flags|=4)};function io(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qw(t,e,n){var r=e.pendingProps;switch(Sc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return rt(e.type)&&Zi(),De(e),null;case 3:return r=e.stateNode,Hr(),he(nt),he(Be),bc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(Dl(Mt),Mt=null))),_l(t,e),De(e),null;case 5:Rc(e);var o=Qn(Ho.current);if(n=e.type,t!==null&&e.stateNode!=null)Qm(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return De(e),null}if(t=Qn(Xt.current),yi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qt]=e,r[Uo]=i,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(o=0;o<ho.length;o++)ue(ho[o],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":gd(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":yd(r,i),ue("invalid",r)}nl(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&pi(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&pi(r.textContent,a,t),o=["children",""+a]):No.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ue("scroll",r)}switch(n){case"input":li(r),pd(r,i,!0);break;case"textarea":li(r),vd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xi)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[qt]=e,t[Uo]=r,qm(t,e,!1,!1),e.stateNode=t;e:{switch(s=rl(n,r),n){case"dialog":ue("cancel",t),ue("close",t),o=r;break;case"iframe":case"object":case"embed":ue("load",t),o=r;break;case"video":case"audio":for(o=0;o<ho.length;o++)ue(ho[o],t);o=r;break;case"source":ue("error",t),o=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),o=r;break;case"details":ue("toggle",t),o=r;break;case"input":gd(t,r),o=Ja(t,r),ue("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ve({},r,{value:void 0}),ue("invalid",t);break;case"textarea":yd(t,r),o=el(t,r),ue("invalid",t);break;default:o=r}nl(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Af(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ef(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_o(t,c):typeof c=="number"&&_o(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(No.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ue("scroll",t):c!=null&&ac(t,i,c,s))}switch(n){case"input":li(t),pd(t,r,!1);break;case"textarea":li(t),vd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ln(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ar(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ar(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Xi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(t&&e.stateNode!=null)Ym(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=Qn(Ho.current),Qn(Xt.current),yi(e)){if(r=e.stateNode,n=e.memoizedProps,r[qt]=e,(i=r.nodeValue!==n)&&(t=dt,t!==null))switch(t.tag){case 3:pi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=e,e.stateNode=r}return De(e),null;case 13:if(he(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&ut!==null&&e.mode&1&&!(e.flags&128))mm(),Ur(),e.flags|=98560,i=!1;else if(i=yi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[qt]=e}else Ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else Mt!==null&&(Dl(Mt),Mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?ke===0&&(ke=3):$c())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return Hr(),_l(t,e),t===null&&jo(e.stateNode.containerInfo),De(e),null;case 10:return Ic(e.type._context),De(e),null;case 17:return rt(e.type)&&Zi(),De(e),null;case 19:if(he(pe),i=e.memoizedState,i===null)return De(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)io(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ss(t),s!==null){for(e.flags|=128,io(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(pe,pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ce()>Br&&(e.flags|=128,r=!0,io(i,!1),e.lanes=4194304)}else{if(!r)if(t=ss(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),io(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ge)return De(e),null}else 2*Ce()-i.renderingStartTime>Br&&n!==1073741824&&(e.flags|=128,r=!0,io(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ce(),e.sibling=null,n=pe.current,ce(pe,r?n&1|2:n&1),e):(De(e),null);case 22:case 23:return Bc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ct&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function Qw(t,e){switch(Sc(e),e.tag){case 1:return rt(e.type)&&Zi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hr(),he(nt),he(Be),bc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rc(e),null;case 13:if(he(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(pe),null;case 4:return Hr(),null;case 10:return Ic(e.type._context),null;case 22:case 23:return Bc(),null;case 24:return null;default:return null}}var Ci=!1,Fe=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,z=null;function Er(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function Rl(t,e,n){try{n()}catch(r){we(t,e,r)}}var ah=!1;function Jw(t,e){if(fl=Qi,t=tm(),Cc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||o!==0&&h.nodeType!==3||(a=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===o&&(a=s),f===i&&++d===r&&(c=s),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ml={focusedElem:t,selectionRange:n},Qi=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var T=y.memoizedProps,R=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?T:bt(e.type,T),R);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(C){we(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return y=ah,ah=!1,y}function To(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Rl(e,n,i)}o=o.next}while(o!==r)}}function Bs(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jm(t){var e=t.alternate;e!==null&&(t.alternate=null,Jm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qt],delete e[Uo],delete e[yl],delete e[Ow],delete e[Mw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xm(t){return t.tag===5||t.tag===3||t.tag===4}function lh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xi));else if(r!==4&&(t=t.child,t!==null))for(Pl(t,e,n),t=t.sibling;t!==null;)Pl(t,e,n),t=t.sibling}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}var Pe=null,Pt=!1;function gn(t,e,n){for(n=n.child;n!==null;)Zm(t,e,n),n=n.sibling}function Zm(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Ms,n)}catch{}switch(n.tag){case 5:Fe||Er(n,e);case 6:var r=Pe,o=Pt;Pe=null,gn(t,e,n),Pe=r,Pt=o,Pe!==null&&(Pt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(Pt?(t=Pe,n=n.stateNode,t.nodeType===8?_a(t.parentNode,n):t.nodeType===1&&_a(t,n),Oo(t)):_a(Pe,n.stateNode));break;case 4:r=Pe,o=Pt,Pe=n.stateNode.containerInfo,Pt=!0,gn(t,e,n),Pe=r,Pt=o;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Rl(n,e,s),o=o.next}while(o!==r)}gn(t,e,n);break;case 1:if(!Fe&&(Er(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){we(n,e,a)}gn(t,e,n);break;case 21:gn(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,gn(t,e,n),Fe=r):gn(t,e,n);break;default:gn(t,e,n)}}function ch(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yw),e.forEach(function(r){var o=sC.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function _t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,Pt=!1;break e;case 3:Pe=a.stateNode.containerInfo,Pt=!0;break e;case 4:Pe=a.stateNode.containerInfo,Pt=!0;break e}a=a.return}if(Pe===null)throw Error(P(160));Zm(i,s,o),Pe=null,Pt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){we(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eg(e,t),e=e.sibling}function eg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),Gt(t),r&4){try{To(3,t,t.return),Bs(3,t)}catch(T){we(t,t.return,T)}try{To(5,t,t.return)}catch(T){we(t,t.return,T)}}break;case 1:_t(e,t),Gt(t),r&512&&n!==null&&Er(n,n.return);break;case 5:if(_t(e,t),Gt(t),r&512&&n!==null&&Er(n,n.return),t.flags&32){var o=t.stateNode;try{_o(o,"")}catch(T){we(t,t.return,T)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Sf(o,i),rl(a,s);var u=rl(a,i);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];d==="style"?Af(o,h):d==="dangerouslySetInnerHTML"?Ef(o,h):d==="children"?_o(o,h):ac(o,d,h,u)}switch(a){case"input":Xa(o,i);break;case"textarea":xf(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ar(o,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ar(o,!!i.multiple,i.defaultValue,!0):Ar(o,!!i.multiple,i.multiple?[]:"",!1))}o[Uo]=i}catch(T){we(t,t.return,T)}}break;case 6:if(_t(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(P(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(T){we(t,t.return,T)}}break;case 3:if(_t(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oo(e.containerInfo)}catch(T){we(t,t.return,T)}break;case 4:_t(e,t),Gt(t);break;case 13:_t(e,t),Gt(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Hc=Ce())),r&4&&ch(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(u=Fe)||d,_t(e,t),Fe=u):_t(e,t),Gt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(z=t,d=t.child;d!==null;){for(h=z=d;z!==null;){switch(f=z,p=f.child,f.tag){case 0:case 11:case 14:case 15:To(4,f,f.return);break;case 1:Er(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(T){we(r,n,T)}}break;case 5:Er(f,f.return);break;case 22:if(f.memoizedState!==null){dh(h);continue}}p!==null?(p.return=f,z=p):dh(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=If("display",s))}catch(T){we(t,t.return,T)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(T){we(t,t.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_t(e,t),Gt(t),r&4&&ch(t);break;case 21:break;default:_t(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xm(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(_o(o,""),r.flags&=-33);var i=lh(t);Ol(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=lh(t);Pl(t,a,s);break;default:throw Error(P(161))}}catch(c){we(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xw(t,e,n){z=t,tg(t)}function tg(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var o=z,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Ci;if(!s){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Fe;a=Ci;var u=Fe;if(Ci=s,(Fe=c)&&!u)for(z=o;z!==null;)s=z,c=s.child,s.tag===22&&s.memoizedState!==null?hh(o):c!==null?(c.return=s,z=c):hh(o);for(;i!==null;)z=i,tg(i),i=i.sibling;z=o,Ci=a,Fe=u}uh(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,z=i):uh(t)}}function uh(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Bs(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:bt(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qd(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qd(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Fe||e.flags&512&&bl(e)}catch(f){we(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function dh(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function hh(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bs(4,e)}catch(c){we(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){we(e,o,c)}}var i=e.return;try{bl(e)}catch(c){we(e,i,c)}break;case 5:var s=e.return;try{bl(e)}catch(c){we(e,s,c)}}}catch(c){we(e,e.return,c)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var Zw=Math.ceil,cs=mn.ReactCurrentDispatcher,Uc=mn.ReactCurrentOwner,St=mn.ReactCurrentBatchConfig,ee=0,Re=null,Se=null,Oe=0,ct=0,Ir=Hn(0),ke=0,Ko=null,nr=0,$s=0,Fc=0,So=null,Xe=null,Hc=0,Br=1/0,tn=null,us=!1,Ml=null,_n=null,Ti=!1,Sn=null,ds=0,xo=0,Ll=null,Fi=-1,Hi=0;function We(){return ee&6?Ce():Fi!==-1?Fi:Fi=Ce()}function Rn(t){return t.mode&1?ee&2&&Oe!==0?Oe&-Oe:jw.transition!==null?(Hi===0&&(Hi=Ff()),Hi):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Vf(t.type)),t):1}function Ut(t,e,n,r){if(50<xo)throw xo=0,Ll=null,Error(P(185));Xo(t,n,r),(!(ee&2)||t!==Re)&&(t===Re&&(!(ee&2)&&($s|=n),ke===4&&wn(t,Oe)),ot(t,r),n===1&&ee===0&&!(e.mode&1)&&(Br=Ce()+500,Fs&&zn()))}function ot(t,e){var n=t.callbackNode;jv(t,e);var r=qi(t,t===Re?Oe:0);if(r===0)n!==null&&Td(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Td(n),e===1)t.tag===0?Lw(fh.bind(null,t)):dm(fh.bind(null,t)),bw(function(){!(ee&6)&&zn()}),n=null;else{switch(Hf(r)){case 1:n=hc;break;case 4:n=Df;break;case 16:n=Wi;break;case 536870912:n=Uf;break;default:n=Wi}n=cg(n,ng.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ng(t,e){if(Fi=-1,Hi=0,ee&6)throw Error(P(327));var n=t.callbackNode;if(Pr()&&t.callbackNode!==n)return null;var r=qi(t,t===Re?Oe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hs(t,r);else{e=r;var o=ee;ee|=2;var i=og();(Re!==t||Oe!==e)&&(tn=null,Br=Ce()+500,Yn(t,e));do try{nC();break}catch(a){rg(t,a)}while(1);Ec(),cs.current=i,ee=o,Se!==null?e=0:(Re=null,Oe=0,e=ke)}if(e!==0){if(e===2&&(o=ll(t),o!==0&&(r=o,e=jl(t,o))),e===1)throw n=Ko,Yn(t,0),wn(t,r),ot(t,Ce()),n;if(e===6)wn(t,r);else{if(o=t.current.alternate,!(r&30)&&!eC(o)&&(e=hs(t,r),e===2&&(i=ll(t),i!==0&&(r=i,e=jl(t,i))),e===1))throw n=Ko,Yn(t,0),wn(t,r),ot(t,Ce()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Kn(t,Xe,tn);break;case 3:if(wn(t,r),(r&130023424)===r&&(e=Hc+500-Ce(),10<e)){if(qi(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){We(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=pl(Kn.bind(null,t,Xe,tn),e);break}Kn(t,Xe,tn);break;case 4:if(wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Dt(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Zw(r/1960))-r,10<r){t.timeoutHandle=pl(Kn.bind(null,t,Xe,tn),r);break}Kn(t,Xe,tn);break;case 5:Kn(t,Xe,tn);break;default:throw Error(P(329))}}}return ot(t,Ce()),t.callbackNode===n?ng.bind(null,t):null}function jl(t,e){var n=So;return t.current.memoizedState.isDehydrated&&(Yn(t,e).flags|=256),t=hs(t,e),t!==2&&(e=Xe,Xe=n,e!==null&&Dl(e)),t}function Dl(t){Xe===null?Xe=t:Xe.push.apply(Xe,t)}function eC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Ht(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wn(t,e){for(e&=~Fc,e&=~$s,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dt(e),r=1<<n;t[n]=-1,e&=~r}}function fh(t){if(ee&6)throw Error(P(327));Pr();var e=qi(t,0);if(!(e&1))return ot(t,Ce()),null;var n=hs(t,e);if(t.tag!==0&&n===2){var r=ll(t);r!==0&&(e=r,n=jl(t,r))}if(n===1)throw n=Ko,Yn(t,0),wn(t,e),ot(t,Ce()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kn(t,Xe,tn),ot(t,Ce()),null}function zc(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(Br=Ce()+500,Fs&&zn())}}function rr(t){Sn!==null&&Sn.tag===0&&!(ee&6)&&Pr();var e=ee;ee|=1;var n=St.transition,r=ie;try{if(St.transition=null,ie=1,t)return t()}finally{ie=r,St.transition=n,ee=e,!(ee&6)&&zn()}}function Bc(){ct=Ir.current,he(Ir)}function Yn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Rw(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Sc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zi();break;case 3:Hr(),he(nt),he(Be),bc();break;case 5:Rc(r);break;case 4:Hr();break;case 13:he(pe);break;case 19:he(pe);break;case 10:Ic(r.type._context);break;case 22:case 23:Bc()}n=n.return}if(Re=t,Se=t=bn(t.current,null),Oe=ct=e,ke=0,Ko=null,Fc=$s=nr=0,Xe=So=null,qn!==null){for(e=0;e<qn.length;e++)if(n=qn[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}qn=null}return t}function rg(t,e){do{var n=Se;try{if(Ec(),ji.current=ls,as){for(var r=ye.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}as=!1}if(tr=0,Ne=xe=ye=null,Co=!1,zo=0,Uc.current=null,n===null||n.return===null){ke=1,Ko=e,Se=null;break}e:{var i=t,s=n.return,a=n,c=e;if(e=Oe,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=eh(s);if(p!==null){p.flags&=-257,th(p,s,a,i,e),p.mode&1&&Zd(i,u,e),e=p,c=u;var y=e.updateQueue;if(y===null){var T=new Set;T.add(c),e.updateQueue=T}else y.add(c);break e}else{if(!(e&1)){Zd(i,u,e),$c();break e}c=Error(P(426))}}else if(ge&&a.mode&1){var R=eh(s);if(R!==null){!(R.flags&65536)&&(R.flags|=256),th(R,s,a,i,e),xc(zr(c,a));break e}}i=c=zr(c,a),ke!==4&&(ke=2),So===null?So=[i]:So.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Hm(i,c,e);Wd(i,v);break e;case 1:a=c;var g=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(_n===null||!_n.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=zm(i,a,e);Wd(i,C);break e}}i=i.return}while(i!==null)}sg(n)}catch(N){e=N,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(1)}function og(){var t=cs.current;return cs.current=ls,t===null?ls:t}function $c(){(ke===0||ke===3||ke===2)&&(ke=4),Re===null||!(nr&268435455)&&!($s&268435455)||wn(Re,Oe)}function hs(t,e){var n=ee;ee|=2;var r=og();(Re!==t||Oe!==e)&&(tn=null,Yn(t,e));do try{tC();break}catch(o){rg(t,o)}while(1);if(Ec(),ee=n,cs.current=r,Se!==null)throw Error(P(261));return Re=null,Oe=0,ke}function tC(){for(;Se!==null;)ig(Se)}function nC(){for(;Se!==null&&!Av();)ig(Se)}function ig(t){var e=lg(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?sg(t):Se=e,Uc.current=null}function sg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qw(n,e),n!==null){n.flags&=32767,Se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,Se=null;return}}else if(n=qw(n,e,ct),n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);ke===0&&(ke=5)}function Kn(t,e,n){var r=ie,o=St.transition;try{St.transition=null,ie=1,rC(t,e,n,r)}finally{St.transition=o,ie=r}return null}function rC(t,e,n,r){do Pr();while(Sn!==null);if(ee&6)throw Error(P(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Dv(t,i),t===Re&&(Se=Re=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ti||(Ti=!0,cg(Wi,function(){return Pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=St.transition,St.transition=null;var s=ie;ie=1;var a=ee;ee|=4,Uc.current=null,Jw(t,n),eg(n,t),xw(ml),Qi=!!fl,ml=fl=null,t.current=n,Xw(n),Nv(),ee=a,ie=s,St.transition=i}else t.current=n;if(Ti&&(Ti=!1,Sn=t,ds=o),i=t.pendingLanes,i===0&&(_n=null),bv(n.stateNode),ot(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(us)throw us=!1,t=Ml,Ml=null,t;return ds&1&&t.tag!==0&&Pr(),i=t.pendingLanes,i&1?t===Ll?xo++:(xo=0,Ll=t):xo=0,zn(),null}function Pr(){if(Sn!==null){var t=Hf(ds),e=St.transition,n=ie;try{if(St.transition=null,ie=16>t?16:t,Sn===null)var r=!1;else{if(t=Sn,Sn=null,ds=0,ee&6)throw Error(P(331));var o=ee;for(ee|=4,z=t.current;z!==null;){var i=z,s=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(z=u;z!==null;){var d=z;switch(d.tag){case 0:case 11:case 15:To(8,d,i)}var h=d.child;if(h!==null)h.return=d,z=h;else for(;z!==null;){d=z;var f=d.sibling,p=d.return;if(Jm(d),d===u){z=null;break}if(f!==null){f.return=p,z=f;break}z=p}}}var y=i.alternate;if(y!==null){var T=y.child;if(T!==null){y.child=null;do{var R=T.sibling;T.sibling=null,T=R}while(T!==null)}}z=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,z=s;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:To(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,z=v;break e}z=i.return}}var g=t.current;for(z=g;z!==null;){s=z;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,z=m;else e:for(s=g;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bs(9,a)}}catch(N){we(a,a.return,N)}if(a===s){z=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,z=C;break e}z=a.return}}if(ee=o,zn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Ms,t)}catch{}r=!0}return r}finally{ie=n,St.transition=e}}return!1}function mh(t,e,n){e=zr(n,e),e=Hm(t,e,1),t=Nn(t,e,1),e=We(),t!==null&&(Xo(t,1,e),ot(t,e))}function we(t,e,n){if(t.tag===3)mh(t,t,n);else for(;e!==null;){if(e.tag===3){mh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_n===null||!_n.has(r))){t=zr(n,t),t=zm(e,t,1),e=Nn(e,t,1),t=We(),e!==null&&(Xo(e,1,t),ot(e,t));break}}e=e.return}}function oC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(Oe&n)===n&&(ke===4||ke===3&&(Oe&130023424)===Oe&&500>Ce()-Hc?Yn(t,0):Fc|=n),ot(t,e)}function ag(t,e){e===0&&(t.mode&1?(e=di,di<<=1,!(di&130023424)&&(di=4194304)):e=1);var n=We();t=dn(t,e),t!==null&&(Xo(t,e,n),ot(t,n))}function iC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ag(t,n)}function sC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),ag(t,n)}var lg;lg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nt.current)et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return et=!1,Ww(t,e,n);et=!!(t.flags&131072)}else et=!1,ge&&e.flags&1048576&&hm(e,ns,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ui(t,e),t=e.pendingProps;var o=Dr(e,Be.current);br(e,n),o=Oc(null,e,r,t,o,n);var i=Mc();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rt(r)?(i=!0,es(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Nc(e),o.updater=zs,e.stateNode=o,o._reactInternals=e,xl(e,r,t,n),e=Il(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&Tc(e),Ke(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ui(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=lC(r),t=bt(r,t),o){case 0:e=El(null,e,r,t,n);break e;case 1:e=oh(null,e,r,t,n);break e;case 11:e=nh(null,e,r,t,n);break e;case 14:e=rh(null,e,r,bt(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),El(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),oh(t,e,r,o,n);case 3:e:{if(Gm(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,o=i.element,vm(t,e),is(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=zr(Error(P(423)),e),e=ih(t,e,r,n,o);break e}else if(r!==o){o=zr(Error(P(424)),e),e=ih(t,e,r,n,o);break e}else for(ut=An(e.stateNode.containerInfo.firstChild),dt=e,ge=!0,Mt=null,n=pm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===o){e=hn(t,e,n);break e}Ke(t,e,r,n)}e=e.child}return e;case 5:return wm(e),t===null&&Cl(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,gl(r,o)?s=null:i!==null&&gl(r,i)&&(e.flags|=32),Km(t,e),Ke(t,e,s,n),e.child;case 6:return t===null&&Cl(e),null;case 13:return Vm(t,e,n);case 4:return _c(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fr(e,null,r,n):Ke(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),nh(t,e,r,o,n);case 7:return Ke(t,e,e.pendingProps,n),e.child;case 8:return Ke(t,e,e.pendingProps.children,n),e.child;case 12:return Ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,ce(rs,r._currentValue),r._currentValue=s,i!==null)if(Ht(i.value,s)){if(i.children===o.children&&!nt.current){e=hn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ln(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Tl(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(P(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Tl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ke(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,br(e,n),o=xt(o),r=r(o),e.flags|=1,Ke(t,e,r,n),e.child;case 14:return r=e.type,o=bt(r,e.pendingProps),o=bt(r.type,o),rh(t,e,r,o,n);case 15:return Bm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),Ui(t,e),e.tag=1,rt(r)?(t=!0,es(e)):t=!1,br(e,n),Fm(e,r,o),xl(e,r,o,n),Il(null,e,r,!0,t,n);case 19:return Wm(t,e,n);case 22:return $m(t,e,n)}throw Error(P(156,e.tag))};function cg(t,e){return jf(t,e)}function aC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new aC(t,e,n,r)}function Kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lC(t){if(typeof t=="function")return Kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cc)return 11;if(t===uc)return 14}return 2}function bn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zi(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Kc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case pr:return Jn(n.children,o,i,e);case lc:s=8,o|=8;break;case Wa:return t=Ct(12,n,e,o|2),t.elementType=Wa,t.lanes=i,t;case qa:return t=Ct(13,n,e,o),t.elementType=qa,t.lanes=i,t;case Qa:return t=Ct(19,n,e,o),t.elementType=Qa,t.lanes=i,t;case wf:return Ks(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yf:s=10;break e;case vf:s=9;break e;case cc:s=11;break e;case uc:s=14;break e;case pn:s=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Ct(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function Jn(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function Ks(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=wf,t.lanes=n,t.stateNode={isHidden:!1},t}function Da(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function Ua(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cC(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Gc(t,e,n,r,o,i,s,a,c){return t=new cC(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ct(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(i),t}function uC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ug(t){if(!t)return jn;t=t._reactInternals;e:{if(cr(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(rt(n))return um(t,n,e)}return e}function dg(t,e,n,r,o,i,s,a,c){return t=Gc(n,r,!0,t,o,i,s,a,c),t.context=ug(null),n=t.current,r=We(),o=Rn(n),i=ln(r,o),i.callback=e??null,Nn(n,i,o),t.current.lanes=o,Xo(t,o,r),ot(t,r),t}function Gs(t,e,n,r){var o=e.current,i=We(),s=Rn(o);return n=ug(n),e.context===null?e.context=n:e.pendingContext=n,e=ln(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nn(o,e,s),t!==null&&(Ut(t,o,s,i),Li(t,o,s)),s}function fs(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vc(t,e){gh(t,e),(t=t.alternate)&&gh(t,e)}function dC(){return null}var hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wc(t){this._internalRoot=t}Vs.prototype.render=Wc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Gs(t,e,null,null)};Vs.prototype.unmount=Wc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rr(function(){Gs(null,t,null,null)}),e[un]=null}};function Vs(t){this._internalRoot=t}Vs.prototype.unstable_scheduleHydration=function(t){if(t){var e=$f();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vn.length&&e!==0&&e<vn[n].priority;n++);vn.splice(n,0,t),n===0&&Gf(t)}};function qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ws(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ph(){}function hC(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=fs(s);i.call(u)}}var s=dg(e,r,t,0,null,!1,!1,"",ph);return t._reactRootContainer=s,t[un]=s.current,jo(t.nodeType===8?t.parentNode:t),rr(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=fs(c);a.call(u)}}var c=Gc(t,0,!1,null,null,!1,!1,"",ph);return t._reactRootContainer=c,t[un]=c.current,jo(t.nodeType===8?t.parentNode:t),rr(function(){Gs(e,c,n,r)}),c}function qs(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var c=fs(s);a.call(c)}}Gs(e,s,t,o)}else s=hC(n,e,t,o,r);return fs(s)}zf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uo(e.pendingLanes);n!==0&&(fc(e,n|1),ot(e,Ce()),!(ee&6)&&(Br=Ce()+500,zn()))}break;case 13:rr(function(){var r=dn(t,1);if(r!==null){var o=We();Ut(r,t,1,o)}}),Vc(t,1)}};mc=function(t){if(t.tag===13){var e=dn(t,134217728);if(e!==null){var n=We();Ut(e,t,134217728,n)}Vc(t,134217728)}};Bf=function(t){if(t.tag===13){var e=Rn(t),n=dn(t,e);if(n!==null){var r=We();Ut(n,t,e,r)}Vc(t,e)}};$f=function(){return ie};Kf=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};il=function(t,e,n){switch(e){case"input":if(Xa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Us(r);if(!o)throw Error(P(90));Tf(r),Xa(r,o)}}}break;case"textarea":xf(t,n);break;case"select":e=n.value,e!=null&&Ar(t,!!n.multiple,e,!1)}};Rf=zc;bf=rr;var fC={usingClientEntryPoint:!1,Events:[ei,Cr,Us,Nf,_f,zc]},so={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mC={bundleType:so.bundleType,version:so.version,rendererPackageName:so.rendererPackageName,rendererConfig:so.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mf(t),t===null?null:t.stateNode},findFiberByHostInstance:so.findFiberByHostInstance||dC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{Ms=Si.inject(mC),Jt=Si}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fC;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(e))throw Error(P(200));return uC(t,e,null,n)};mt.createRoot=function(t,e){if(!qc(t))throw Error(P(299));var n=!1,r="",o=hg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Gc(t,1,!1,null,null,n,!1,r,o),t[un]=e.current,jo(t.nodeType===8?t.parentNode:t),new Wc(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Mf(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return rr(t)};mt.hydrate=function(t,e,n){if(!Ws(e))throw Error(P(200));return qs(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!qc(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=hg;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=dg(e,null,t,1,n??null,o,!1,i,s),t[un]=e.current,jo(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Vs(e)};mt.render=function(t,e,n){if(!Ws(e))throw Error(P(200));return qs(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Ws(t))throw Error(P(40));return t._reactRootContainer?(rr(function(){qs(null,null,t,!1,function(){t._reactRootContainer=null,t[un]=null})}),!0):!1};mt.unstable_batchedUpdates=zc;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ws(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return qs(t,e,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fg)}catch(t){console.error(t)}}fg(),ff.exports=mt;var gC=ff.exports,yh=gC;Ga.createRoot=yh.createRoot,Ga.hydrateRoot=yh.hydrateRoot;const pC="modulepreload",yC=function(t){return"/"+t},vh={},wh=function(e,n,r){if(!n||n.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=yC(i),i in vh)return;vh[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let d=o.length-1;d>=0;d--){const h=o[d];if(h.href===i&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":pC,s||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),s)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var vC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=(t,e)=>{const n=A.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:a,...c},u)=>A.createElement("svg",{ref:u,...vC,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:`lucide lucide-${wC(t)}`,...c},[...e.map(([d,h])=>A.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var te=CC;const TC=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),tt=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),SC=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mg=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Qc=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Lt=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),xC=te("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),kC=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),EC=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ms=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),IC=te("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),AC=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ch=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),gg=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),NC=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),_C=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),RC=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),bC=te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),PC=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),OC=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Th=te("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),MC=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Sh=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Yc=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),pg=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),LC=te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),jC=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Vn=te("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Go=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),yg=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),DC=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),$r=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ze=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/*! @azure/msal-common v15.8.1 2025-07-08 */const x={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},xn={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},ni=[x.OPENID_SCOPE,x.PROFILE_SCOPE,x.OFFLINE_ACCESS_SCOPE],xh=[...ni,x.EMAIL_SCOPE],Ge={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},kh={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Pn={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},xi={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Ve={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},vg={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Qs={QUERY:"query",FRAGMENT:"fragment"},UC={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},wg={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},ki={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},He={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},me={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Jc="appmetadata",FC="client_info",ko="1",gs={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},at={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},be={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},oe={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Eo={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},Eh={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},hr={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Fa={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Gn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},HC={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},zC=300;/*! @azure/msal-common v15.8.1 2025-07-08 */const ps="unexpected_error",BC="post_request_failed";/*! @azure/msal-common v15.8.1 2025-07-08 */const Ih={[ps]:"Unexpected error in authentication.",[BC]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ae extends Error{constructor(e,n,r){const o=n?`${e}: ${n}`:e;super(o),Object.setPrototypeOf(this,ae.prototype),this.errorCode=e||x.EMPTY_STRING,this.errorMessage=n||x.EMPTY_STRING,this.subError=r||x.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Ul(t,e){return new ae(t,e?`${Ih[t]} ${e}`:Ih[t])}/*! @azure/msal-common v15.8.1 2025-07-08 */const Xc="client_info_decoding_error",Cg="client_info_empty_error",Zc="token_parsing_error",Tg="null_or_empty_token",nn="endpoints_resolution_error",Sg="network_error",xg="openid_config_error",kg="hash_not_deserialized",Kr="invalid_state",Eg="state_mismatch",Fl="state_not_found",Ig="nonce_mismatch",eu="auth_time_not_found",Ag="max_age_transpired",$C="multiple_matching_tokens",KC="multiple_matching_accounts",Ng="multiple_matching_appMetadata",_g="request_cannot_be_made",Rg="cannot_remove_empty_scope",bg="cannot_append_scopeset",Hl="empty_input_scopeset",GC="device_code_polling_cancelled",VC="device_code_expired",WC="device_code_unknown_error",tu="no_account_in_silent_request",Pg="invalid_cache_record",nu="invalid_cache_environment",zl="no_account_found",Bl="no_crypto_object",qC="unexpected_credential_type",QC="invalid_assertion",YC="invalid_client_credential",On="token_refresh_required",JC="user_timeout_reached",Og="token_claims_cnf_required_for_signedjwt",Mg="authorization_code_missing_from_server_response",Lg="binding_key_not_removed",jg="end_session_endpoint_not_supported",ru="key_id_missing",XC="no_network_connectivity",ZC="user_canceled",e0="missing_tenant_id_error",Q="method_not_implemented",t0="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.8.1 2025-07-08 */const Ah={[Xc]:"The client info could not be parsed/decoded correctly",[Cg]:"The client info was empty",[Zc]:"Token cannot be parsed",[Tg]:"The token is null or empty",[nn]:"Endpoints cannot be resolved",[Sg]:"Network request failed",[xg]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[kg]:"The hash parameters could not be deserialized",[Kr]:"State was not the expected format",[Eg]:"State mismatch error",[Fl]:"State not found",[Ig]:"Nonce mismatch error",[eu]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Ag]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[$C]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[KC]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ng]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[_g]:"Token request cannot be made without authorization code or refresh token.",[Rg]:"Cannot remove null or empty scope from ScopeSet",[bg]:"Cannot append ScopeSet",[Hl]:"Empty input ScopeSet cannot be processed",[GC]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[VC]:"Device code is expired.",[WC]:"Device code stopped polling for unknown reasons.",[tu]:"Please pass an account object, silent flow is not supported without account information",[Pg]:"Cache record object was null or undefined.",[nu]:"Invalid environment when attempting to create cache entry",[zl]:"No account found in cache for given key.",[Bl]:"No crypto object detected.",[qC]:"Unexpected credential type.",[QC]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[YC]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[On]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[JC]:"User defined timeout for device code polling reached",[Og]:"Cannot generate a POP jwt if the token_claims are not populated",[Mg]:"Server response does not contain an authorization code to proceed",[Lg]:"Could not remove the credential's binding key from storage.",[jg]:"The provided authority does not support logout",[ru]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[XC]:"No network connectivity. Check your internet connection.",[ZC]:"User cancelled the flow.",[e0]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Q]:"This method has not been implemented",[t0]:"The nested app auth bridge is disabled"};class ou extends ae{constructor(e,n){super(e,n?`${Ah[e]}: ${n}`:Ah[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,ou.prototype)}}function b(t,e){return new ou(t,e)}/*! @azure/msal-common v15.8.1 2025-07-08 */const ys={createNewGuid:()=>{throw b(Q)},base64Decode:()=>{throw b(Q)},base64Encode:()=>{throw b(Q)},base64UrlEncode:()=>{throw b(Q)},encodeKid:()=>{throw b(Q)},async getPublicKeyThumbprint(){throw b(Q)},async removeTokenBindingKey(){throw b(Q)},async clearKeystore(){throw b(Q)},async signJwt(){throw b(Q)},async hashString(){throw b(Q)}};/*! @azure/msal-common v15.8.1 2025-07-08 */var se;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(se||(se={}));class Dn{constructor(e,n,r){this.level=se.Info;const o=()=>{},i=e||Dn.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:se.Info,this.correlationId=i.correlationId||x.EMPTY_STRING,this.packageName=n||x.EMPTY_STRING,this.packageVersion=r||x.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:se.Info}}clone(e,n,r){return new Dn({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${se[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:se.Error,containsPii:!1,correlationId:n||x.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:se.Error,containsPii:!0,correlationId:n||x.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:se.Warning,containsPii:!1,correlationId:n||x.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:se.Warning,containsPii:!0,correlationId:n||x.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:se.Info,containsPii:!1,correlationId:n||x.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:se.Info,containsPii:!0,correlationId:n||x.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:se.Verbose,containsPii:!1,correlationId:n||x.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:se.Verbose,containsPii:!0,correlationId:n||x.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:se.Trace,containsPii:!1,correlationId:n||x.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:se.Trace,containsPii:!0,correlationId:n||x.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.8.1 2025-07-08 */const Dg="@azure/msal-common",iu="15.8.1";/*! @azure/msal-common v15.8.1 2025-07-08 */const su={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.8.1 2025-07-08 */function Qr(t,e){const n=n0(t);try{const r=e(n);return JSON.parse(r)}catch{throw b(Zc)}}function n0(t){if(!t)throw b(Tg);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw b(Zc);return n[2]}function Ug(t,e){if(e===0||Date.now()-3e5>t+e)throw b(Ag)}/*! @azure/msal-common v15.8.1 2025-07-08 */function it(){return Math.round(new Date().getTime()/1e3)}function Nh(t){return t.getTime()/1e3}function Or(t){return t?new Date(Number(t)*1e3):new Date}function $l(t,e){const n=Number(t)||0;return it()+e>n}function r0(t){return Number(t)>it()}/*! @azure/msal-common v15.8.1 2025-07-08 */function Io(t){return[a0(t),l0(t),c0(t),u0(t),d0(t)].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}function Ys(t,e,n,r,o){return{credentialType:me.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function Js(t,e,n,r,o,i,s,a,c,u,d,h,f,p,y){var R,v;const T={homeAccountId:t,credentialType:me.ACCESS_TOKEN,secret:n,cachedAt:it().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:d||oe.BEARER};if(h&&(T.userAssertionHash=h),u&&(T.refreshOn=u.toString()),p&&(T.requestedClaims=p,T.requestedClaimsHash=y),((R=T.tokenType)==null?void 0:R.toLowerCase())!==oe.BEARER.toLowerCase())switch(T.credentialType=me.ACCESS_TOKEN_WITH_AUTH_SCHEME,T.tokenType){case oe.POP:const g=Qr(n,c);if(!((v=g==null?void 0:g.cnf)!=null&&v.kid))throw b(Og);T.keyId=g.cnf.kid;break;case oe.SSH:T.keyId=f}return T}function Fg(t,e,n,r,o,i,s){const a={credentialType:me.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function au(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function o0(t){return t?au(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===me.ACCESS_TOKEN||t.credentialType===me.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function i0(t){return t?au(t)&&t.hasOwnProperty("realm")&&t.credentialType===me.ID_TOKEN:!1}function s0(t){return t?au(t)&&t.credentialType===me.REFRESH_TOKEN:!1}function a0(t){return[t.homeAccountId,t.environment].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}function l0(t){const e=t.credentialType===me.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}function c0(t){return(t.target||"").toLowerCase()}function u0(t){return(t.requestedClaimsHash||"").toLowerCase()}function d0(t){return t.tokenType&&t.tokenType.toLowerCase()!==oe.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function h0(t,e){const n=t.indexOf(be.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function f0(t,e){let n=!1;t&&(n=t.indexOf(Eo.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function m0({environment:t,clientId:e}){return[Jc,t,e].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}function g0(t,e){return e?t.indexOf(Jc)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function p0(t,e){return e?t.indexOf(gs.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function _h(){return it()+gs.REFRESH_TIME_SECONDS}function Ei(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function Ha(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function Rh(t){return t.expiresAt<=it()}/*! @azure/msal-common v15.8.1 2025-07-08 */const Hg="redirect_uri_empty",y0="claims_request_parsing_error",zg="authority_uri_insecure",fo="url_parse_error",Bg="empty_url_error",$g="empty_input_scopes_error",lu="invalid_claims",Kg="token_request_empty",Gg="logout_request_empty",v0="invalid_code_challenge_method",cu="pkce_params_missing",uu="invalid_cloud_discovery_metadata",Vg="invalid_authority_metadata",Wg="untrusted_authority",Xs="missing_ssh_jwk",qg="missing_ssh_kid",w0="missing_nonce_authentication_header",C0="invalid_authentication_header",Qg="cannot_set_OIDCOptions",Yg="cannot_allow_platform_broker",Jg="authority_mismatch";/*! @azure/msal-common v15.8.1 2025-07-08 */const T0={[Hg]:"A redirect URI is required for all calls, and none has been set.",[y0]:"Could not parse the given claims request object.",[zg]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[fo]:"URL could not be parsed into appropriate segments.",[Bg]:"URL was empty or null.",[$g]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[lu]:"Given claims parameter must be a stringified JSON object.",[Kg]:"Token request was empty and not found in cache.",[Gg]:"The logout request was null or undefined.",[v0]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[cu]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[uu]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Vg]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Wg]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Xs]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[qg]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[w0]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[C0]:"Invalid authentication header provided",[Qg]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Yg]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Jg]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class du extends ae{constructor(e){super(e,T0[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,du.prototype)}}function de(t){return new du(t)}/*! @azure/msal-common v15.8.1 2025-07-08 */class Zt{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class Ee{constructor(e){const n=e?Zt.trimArrayEntries([...e]):[],r=n?Zt.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw de($g);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||x.EMPTY_STRING).split(" ");return new Ee(r)}static createSearchScopes(e){const n=new Ee(e);return n.containsOnlyOIDCScopes()?n.removeScope(x.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Ee(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return xh.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw b(bg)}}removeScope(e){if(!e)throw b(Rg);this.scopes.delete(e.trim())}removeOIDCScopes(){xh.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw b(Hl);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw b(Hl);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):x.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.8.1 2025-07-08 */function vs(t,e){if(!t)throw b(Cg);try{const n=e(t);return JSON.parse(n)}catch{throw b(Xc)}}function Mr(t){if(!t)throw b(Xc);const e=t.split(He.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?x.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.8.1 2025-07-08 */function bh(t,e){return!!t&&!!e&&t===e.split(".")[1]}function hu(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:u}=r,d=s||c||u||"";return{tenantId:d,localAccountId:o||i||"",name:a,isHomeTenant:bh(d,t)}}else return{tenantId:n,localAccountId:e,isHomeTenant:bh(n,t)}}function fu(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=hu(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}/*! @azure/msal-common v15.8.1 2025-07-08 */const Ot={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.8.1 2025-07-08 */function Xg(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.8.1 2025-07-08 */const ht={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.8.1 2025-07-08 */class qe{generateAccountId(){return[this.homeAccountId,this.environment].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return qe.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(He.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,r){var u,d,h,f,p,y;const o=new qe;n.authorityType===Ot.Adfs?o.authorityType=ki.ADFS_ACCOUNT_TYPE:n.protocolMode===ht.OIDC?o.authorityType=ki.GENERIC_ACCOUNT_TYPE:o.authorityType=ki.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=vs(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw b(nu);o.environment=s,o.realm=(i==null?void 0:i.utid)||Xg(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((u=e.idTokenClaims)==null?void 0:u.oid)||((d=e.idTokenClaims)==null?void 0:d.sub)||"";const a=((h=e.idTokenClaims)==null?void 0:h.preferred_username)||((f=e.idTokenClaims)==null?void 0:f.upn),c=(p=e.idTokenClaims)!=null&&p.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=((y=e.idTokenClaims)==null?void 0:y.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const T=hu(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[T]}return o}static createFromAccountInfo(e,n,r){var i;const o=new qe;return o.authorityType=e.authorityType||ki.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,n,r,o,i){if(!(n===Ot.Adfs||n===Ot.Dsts)){if(e)try{const s=vs(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}/*! @azure/msal-common v15.8.1 2025-07-08 */function Zg(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function ws(t){if(!t||t.indexOf("=")<0)return null;try{const e=Zg(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw b(kg)}return null}function Vo(t,e=!0,n){const r=new Array;return t.forEach((o,i)=>{!e&&n&&i in n?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}/*! @azure/msal-common v15.8.1 2025-07-08 */class Z{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw de(Bg);e.includes("#")||(this._urlString=Z.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Zt.endsWith(n,"?")?n=n.slice(0,-1):Zt.endsWith(n,"?/")&&(n=n.slice(0,-2)),Zt.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw de(fo)}if(!e.HostNameAndPort||!e.PathSegments)throw de(fo);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw de(zg)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Z.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===Pn.COMMON||r[0]===Pn.ORGANIZATIONS)&&(r[0]=e),Z.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw de(fo);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw de(fo);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===x.FORWARD_SLASH){const o=new Z(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Z(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!ws(e)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const ep={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Ph=ep.endpointMetadata,mu=ep.instanceDiscoveryMetadata,tp=new Set;mu.metadata.forEach(t=>{t.aliases.forEach(e=>{tp.add(e)})});function S0(t,e){var o;let n;const r=t.canonicalAuthority;if(r){const i=new Z(r).getUrlComponents().HostNameAndPort;n=Oh(i,(o=t.cloudDiscoveryMetadata)==null?void 0:o.metadata,at.CONFIG,e)||Oh(i,mu.metadata,at.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function Oh(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=Cs(e,t);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function x0(t){return Cs(mu.metadata,t)}function Cs(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.8.1 2025-07-08 */const Ts="cache_quota_exceeded",gu="cache_error_unknown";/*! @azure/msal-common v15.8.1 2025-07-08 */const za={[Ts]:"Exceeded cache storage capacity.",[gu]:"Unexpected error occurred when using cache storage."};class Lr extends ae{constructor(e,n){const r=n||(za[e]?za[e]:za[gu]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Lr.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Kl(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Lr(Ts):new Lr(t.name,t.message):new Lr(gu)}/*! @azure/msal-common v15.8.1 2025-07-08 */class Gl{constructor(e,n,r,o,i){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(Dg,iu),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){const r=this.getAllAccounts(e,n);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,n,r==null?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,n,r.tenantId);return c&&(a=Qr(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=fu(e,r,a,c==null?void 0:c.secret),s)}getTenantProfilesFromAccountEntity(e,n,r,o){const i=e.getAccountInfo();let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const u=s.get(r);if(u)s=new Map([[r,u]]);else return[]}const c=[];return s.forEach(u=>{const d=this.getTenantedAccountInfoByFilter(i,a,u,n,o);d&&c.push(d)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var o;if(!e)throw b(Pg);try{e.account&&await this.setAccount(e.account,n),e.idToken&&(r==null?void 0:r.idToken)!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&(r==null?void 0:r.accessToken)!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&(r==null?void 0:r.refreshToken)!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(i){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),i instanceof ae?i:Kl(i)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),i=Ee.fromString(e.target);o.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,r,!1))return;const a=this.getAccessTokenCredential(s,n);a&&this.credentialMatchesFilter(a,r)&&Ee.fromString(a.target).intersectingScopeSets(i)&&this.removeAccessToken(s,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{var u;if(!this.isAccountKey(i,e.homeAccountId))return;const s=this.getAccount(i,n);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},c=(u=s.tenantProfiles)==null?void 0:u.filter(d=>this.tenantProfileMatchesFilter(d,a));c&&c.length===0||o.push(s)}),o}isAccountKey(e,n,r){return!(e.split(He.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(He.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(n.indexOf(me.ID_TOKEN.toLowerCase())===-1&&n.indexOf(me.ACCESS_TOKEN.toLowerCase())===-1&&n.indexOf(me.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&n.indexOf(me.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(n.indexOf(me.REFRESH_TOKEN.toLowerCase())>-1){const r=`${me.REFRESH_TOKEN}${He.CACHE_KEY_SEPARATOR}${this.clientId}${He.CACHE_KEY_SEPARATOR}`,o=`${me.REFRESH_TOKEN}${He.CACHE_KEY_SEPARATOR}${ko}${He.CACHE_KEY_SEPARATOR}`;if(n.indexOf(r.toLowerCase())===-1&&n.indexOf(o.toLowerCase())===-1)return!1}else if(n.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===me.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===oe.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){this.getAccountKeys().forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){const r=this.getAccount(e,n);r&&(this.removeAccountContext(r,n),this.removeItem(e,n))}removeAccountContext(e,n){const r=this.getTokenKeys(),o=e.generateAccountId();r.idToken.forEach(i=>{i.indexOf(o)===0&&this.removeIdToken(i,n)}),r.accessToken.forEach(i=>{i.indexOf(o)===0&&this.removeAccessToken(i,n)}),r.refreshToken.forEach(i=>{i.indexOf(o)===0&&this.removeRefreshToken(i,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==me.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==oe.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{var i;this.commonLogger.error(`Failed to remove token binding key ${o}`,n),(i=this.performanceClient)==null||i.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,n){const r=qe.generateAccountCacheKey(e);return this.getAccount(r,n)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:me.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=a;if(!o){const d=new Map;a.forEach((f,p)=>{f.realm===e.tenantId&&d.set(p,f)});const h=d.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,h)=>{this.removeIdToken(h,n)}),i&&n&&i.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,n);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,o){const i=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);const s=Ee.createSearchScopes(n.scopes),a=n.authenticationScheme||oe.BEARER,c=a&&a.toLowerCase()!==oe.BEARER.toLowerCase()?me.ACCESS_TOKEN_WITH_AUTH_SCHEME:me.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,h=[];d.forEach(p=>{if(this.accessTokenKeyMatchesFilter(p,u,!0)){const y=this.getAccessTokenCredential(p,i);y&&this.credentialMatchesFilter(y,u)&&h.push(y)}});const f=h.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),h.forEach(p=>{this.removeAccessToken(Io(p),i)}),this.performanceClient.addFields({multiMatchedAT:h.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),h[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&o.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,n);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=n?ko:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:me.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){const f=this.getRefreshTokenCredential(h,r);f&&this.credentialMatchesFilter(f,a)&&u.push(f)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&i&&r&&i.addFields({multiMatchedRT:d},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw b(Ng);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===ko)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=S0(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==me.ACCESS_TOKEN&&e.credentialType!==me.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Ee.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(Jc)!==-1}isAuthorityMetadata(e){return e.indexOf(gs.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${gs.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class k0 extends Gl{async setAccount(){throw b(Q)}getAccount(){throw b(Q)}async setIdTokenCredential(){throw b(Q)}getIdTokenCredential(){throw b(Q)}async setAccessTokenCredential(){throw b(Q)}getAccessTokenCredential(){throw b(Q)}async setRefreshTokenCredential(){throw b(Q)}getRefreshTokenCredential(){throw b(Q)}setAppMetadata(){throw b(Q)}getAppMetadata(){throw b(Q)}setServerTelemetry(){throw b(Q)}getServerTelemetry(){throw b(Q)}setAuthorityMetadata(){throw b(Q)}getAuthorityMetadata(){throw b(Q)}getAuthorityMetadataKeys(){throw b(Q)}setThrottlingCache(){throw b(Q)}getThrottlingCache(){throw b(Q)}removeItem(){throw b(Q)}getKeys(){throw b(Q)}getAccountKeys(){throw b(Q)}getTokenKeys(){throw b(Q)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const w={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},E0={NotStarted:0,InProgress:1,Completed:2};/*! @azure/msal-common v15.8.1 2025-07-08 */class Mh{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class np{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:E0.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new Mh}}startPerformanceMeasurement(){return new Mh}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.8.1 2025-07-08 */const rp={tokenRenewalOffsetSeconds:zC,preventCorsPreflight:!1},I0={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:se.Info,correlationId:x.EMPTY_STRING},A0={claimsBasedCachingEnabled:!1},N0={async sendGetRequestAsync(){throw b(Q)},async sendPostRequestAsync(){throw b(Q)}},_0={sku:x.SKU,version:iu,cpu:x.EMPTY_STRING,os:x.EMPTY_STRING},R0={clientSecret:x.EMPTY_STRING,clientAssertion:void 0},b0={azureCloudInstance:su.None,tenant:`${x.DEFAULT_COMMON_TENANT}`},P0={application:{appName:"",appVersion:""}};function O0({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:f}){const p={...I0,...n};return{authOptions:M0(t),systemOptions:{...rp,...e},loggerOptions:p,cacheOptions:{...A0,...r},storageInterface:o||new k0(t.clientId,ys,new Dn(p),new np),networkInterface:i||N0,cryptoInterface:s||ys,clientCredentials:a||R0,libraryInfo:{..._0,...c},telemetry:{...P0,...u},serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:f||null}}function M0(t){return{clientCapabilities:[],azureCloudOptions:b0,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function op(t){return t.authOptions.authority.options.protocolMode===ht.OIDC}/*! @azure/msal-common v15.8.1 2025-07-08 */const jt={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.8.1 2025-07-08 */const or="client_id",ip="redirect_uri",L0="response_type",j0="response_mode",D0="grant_type",U0="claims",F0="scope",H0="refresh_token",z0="state",B0="nonce",$0="prompt",K0="code",G0="code_challenge",V0="code_challenge_method",W0="code_verifier",q0="client-request-id",Q0="x-client-SKU",Y0="x-client-VER",J0="x-client-OS",X0="x-client-CPU",Z0="x-client-current-telemetry",eT="x-client-last-telemetry",tT="x-ms-lib-capability",nT="x-app-name",rT="x-app-ver",oT="post_logout_redirect_uri",iT="id_token_hint",sT="client_secret",aT="client_assertion",lT="client_assertion_type",sp="token_type",ap="req_cnf",Lh="return_spa_code",cT="nativebroker",uT="logout_hint",dT="sid",hT="login_hint",fT="domain_hint",mT="x-client-xtra-sku",Ss="brk_client_id",xs="brk_redirect_uri",Vl="instance_aware",gT="ear_jwk",pT="ear_jwe_crypto";/*! @azure/msal-common v15.8.1 2025-07-08 */function Zs(t,e,n){if(!e)return;const r=t.get(or);r&&t.has(Ss)&&(n==null||n.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(ip)},e))}function lp(t,e){t.set(L0,e)}function yT(t,e){t.set(j0,e||UC.QUERY)}function vT(t){t.set(cT,"1")}function pu(t,e,n=!0,r=ni){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new Ee(o);t.set(F0,i.printScopes())}function yu(t,e){t.set(or,e)}function vu(t,e){t.set(ip,e)}function wT(t,e){t.set(oT,e)}function CT(t,e){t.set(iT,e)}function TT(t,e){t.set(fT,e)}function Ii(t,e){t.set(hT,e)}function ks(t,e){t.set(Ge.CCS_HEADER,`UPN:${e}`)}function Ao(t,e){t.set(Ge.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function jh(t,e){t.set(dT,e)}function wu(t,e,n){const r=NT(e,n);try{JSON.parse(r)}catch{throw de(lu)}t.set(U0,r)}function Cu(t,e){t.set(q0,e)}function Tu(t,e){t.set(Q0,e.sku),t.set(Y0,e.version),e.os&&t.set(J0,e.os),e.cpu&&t.set(X0,e.cpu)}function Su(t,e){e!=null&&e.appName&&t.set(nT,e.appName),e!=null&&e.appVersion&&t.set(rT,e.appVersion)}function ST(t,e){t.set($0,e)}function cp(t,e){e&&t.set(z0,e)}function xT(t,e){t.set(B0,e)}function kT(t,e,n){if(e&&n)t.set(G0,e),t.set(V0,n);else throw de(cu)}function ET(t,e){t.set(K0,e)}function IT(t,e){t.set(H0,e)}function AT(t,e){t.set(W0,e)}function up(t,e){t.set(sT,e)}function dp(t,e){e&&t.set(aT,e)}function hp(t,e){e&&t.set(lT,e)}function fp(t,e){t.set(D0,e)}function xu(t){t.set(FC,"1")}function mp(t){t.has(Vl)||t.set(Vl,"true")}function Xn(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function NT(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw de(lu)}return e&&e.length>0&&(n.hasOwnProperty(xi.ACCESS_TOKEN)||(n[xi.ACCESS_TOKEN]={}),n[xi.ACCESS_TOKEN][xi.XMS_CC]={values:e}),JSON.stringify(n)}function ku(t,e){e&&(t.set(sp,oe.POP),t.set(ap,e))}function gp(t,e){e&&(t.set(sp,oe.SSH),t.set(ap,e))}function pp(t,e){t.set(Z0,e.generateCurrentRequestHeaderValue()),t.set(eT,e.generateLastRequestHeaderValue())}function yp(t){t.set(tT,Eo.X_MS_LIB_CAPABILITY_VALUE)}function _T(t,e){t.set(uT,e)}function ea(t,e,n){t.has(Ss)||t.set(Ss,e),t.has(xs)||t.set(xs,n)}function RT(t,e){t.set(gT,encodeURIComponent(e));const n="eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0";t.set(pT,n)}/*! @azure/msal-common v15.8.1 2025-07-08 */function bT(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.8.1 2025-07-08 */function PT(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.8.1 2025-07-08 */function OT(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.8.1 2025-07-08 */const Et=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}try{const a=t(...i);return s==null||s.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a}},I=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}return r==null||r.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a})};/*! @azure/msal-common v15.8.1 2025-07-08 */class ta{constructor(e,n,r,o){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=o}async detectRegion(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(w.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=hr.ENVIRONMENT_VARIABLE;else{const i=ta.IMDS_OPTIONS;try{const s=await I(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(x.IMDS_VERSION,i);if(s.status===xn.SUCCESS&&(r=s.body,n.region_source=hr.IMDS),s.status===xn.BAD_REQUEST){const a=await I(this.getCurrentVersion.bind(this),w.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return n.region_source=hr.FAILED_AUTO_DETECTION,null;const c=await I(this.getRegionFromIMDS.bind(this),w.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===xn.SUCCESS&&(r=c.body,n.region_source=hr.IMDS)}}catch{return n.region_source=hr.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=hr.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(w.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${x.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,x.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(w.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${x.IMDS_ENDPOINT}?format=json`,e);return r.status===xn.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}ta.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.8.1 2025-07-08 */class Ue{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new ta(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(x.CIAM_AUTH_URL))return Ot.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case x.ADFS:return Ot.Adfs;case x.DSTS:return Ot.Dsts}return Ot.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Z(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw b(nn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw b(nn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw b(nn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw b(jg);return this.replacePath(this.metadata.end_session_endpoint)}else throw b(nn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw b(nn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw b(nn)}canReplaceTenant(e){return e.PathSegments.length===1&&!Ue.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ot.Default&&this.protocolMode!==ht.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new Z(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let u=i[c];if(c===0&&this.canReplaceTenant(o)){const d=new Z(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}a!==u&&(n=n.replace(`/${u}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ot.Adfs||this.protocolMode===ht.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(w.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await I(this.updateCloudDiscoveryMetadata.bind(this),w.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await I(this.updateEndpointMetadata.bind(this),w.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:_h(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==at.CACHE&&(r==null?void 0:r.source)!==at.CACHE&&(e.expiresAt=_h(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(w.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===at.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&n.metadata){const a=await I(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);Ei(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await I(this.getEndpointMetadataFromNetwork.bind(this),w.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await I(this.updateMetadataWithRegionalInformation.bind(this),w.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ei(e,r,!0),at.NETWORK;throw b(xg,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ei(e,n,!1),{source:at.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Ei(e,o,!1),{source:at.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Rh(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:at.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Z(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw de(Vg)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(w.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const o=await this.networkInterface.sendGetRequestAsync(n,e);return bT(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Ph?Ph[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(w.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(n){if(n!==x.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Fa.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,Ue.replaceWithRegionalInformation(e,n);const s=await I(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),w.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=Fa.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,Ue.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=Fa.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(w.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await I(this.getCloudDiscoveryMetadataFromNetwork.bind(this),w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Ha(e,r,!0),at.NETWORK;throw de(Wg)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||x.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||x.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||x.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Ha(e,n,!1),at.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=x0(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Ha(e,o,!1),at.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Rh(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),at.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ot.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Ue.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Cs(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),de(uu)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Ue.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(w.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${x.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,n);let s,a;if(PT(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(OT(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===x.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Cs(a,this.hostnameAndPort)}catch(i){if(i instanceof ae)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Ue.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Z.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==su.None){const o=n.tenant?n.tenant:x.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return x.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw b(nn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return tp.has(e)}static isPublicCloudAuthority(e){return x.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new Z(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${x.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=Z.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Ue.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Ue.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Ue.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new Z(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(x.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];n=`${n}${i}${x.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}Ue.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Pn.COMMON,Pn.CONSUMERS,Pn.ORGANIZATIONS]);function MT(t){var o;const r=(o=new Z(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case Pn.COMMON:case Pn.ORGANIZATIONS:case Pn.CONSUMERS:return;default:return r}}function vp(t){return t.endsWith(x.FORWARD_SLASH)?t:`${t}${x.FORWARD_SLASH}`}function LT(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw de(uu)}return{canonicalAuthority:t.authority?vp(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.8.1 2025-07-08 */async function wp(t,e,n,r,o,i,s){s==null||s.addQueueMeasurement(w.AuthorityFactoryCreateDiscoveredInstance,i);const a=Ue.transformCIAMAuthority(vp(t)),c=new Ue(a,e,n,r,o,i,s);try{return await I(c.resolveEndpointsAsync.bind(c),w.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw b(nn)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class ur extends ae{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,ur.prototype)}}/*! @azure/msal-common v15.8.1 2025-07-08 */function na(t,e,n){var r;return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||((r=e.tokenBodyParameters)==null?void 0:r.clientId)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class Qt{static generateThrottlingStorageKey(e){return`${Eo.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){var s;const o=Qt.generateThrottlingStorageKey(n),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new ur(((s=i.errorCodes)==null?void 0:s.join(" "))||x.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,n,r,o){if(Qt.checkResponseStatus(r)||Qt.checkResponseForRetryAfter(r)){const i={throttleTime:Qt.calculateThrottleTime(parseInt(r.headers[Ge.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Qt.generateThrottlingStorageKey(n),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Ge.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Eo.DEFAULT_THROTTLE_TIME_SECONDS),r+Eo.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,o){const i=na(n,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class ra extends ae{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,ra.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function mo(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r==null?void 0:r.name}, error.message:${r==null?void 0:r.message}`,new ra(t,e,n)}/*! @azure/msal-common v15.8.1 2025-07-08 */class Eu{constructor(e,n){this.config=O0(e),this.logger=new Dn(this.config.loggerOptions,Dg,iu),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Ge.CONTENT_TYPE]=x.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case jt.HOME_ACCOUNT_ID:try{const r=Mr(e.credential);n[Ge.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case jt.UPN:n[Ge.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,o,i,s){var c;s&&((c=this.performanceClient)==null||c.addQueueMeasurement(s,i));const a=await this.sendPostRequest(o,e,{body:n,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,n,r,o){var s,a,c;Qt.preProcess(this.cacheManager,e,o);let i;try{i=await I(this.networkClient.sendPostRequestAsync.bind(this.networkClient),w.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(n,r);const u=i.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((s=i.body.refresh_token)==null?void 0:s.length)||0,httpVerToken:u[Ge.X_MS_HTTP_VERSION]||"",requestId:u[Ge.X_MS_REQUEST_ID]||""},o)}catch(u){if(u instanceof ra){const d=u.responseHeaders;throw d&&((c=this.performanceClient)==null||c.addFields({httpVerToken:d[Ge.X_MS_HTTP_VERSION]||"",requestId:d[Ge.X_MS_REQUEST_ID]||"",contentTypeHeader:d[Ge.CONTENT_TYPE]||void 0,contentLengthHeader:d[Ge.CONTENT_LENGTH]||void 0,httpStatus:u.httpStatus},o)),u.error}throw u instanceof ae?u:b(Sg)}return Qt.postProcess(this.cacheManager,e,i,o),i}async updateAuthority(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(w.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,o=await wp(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&ea(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Xn(n,e.tokenQueryParameters),Cu(n,e.correlationId),Zs(n,e.correlationId,this.performanceClient),Vo(n)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const Es="no_tokens_found",Cp="native_account_unavailable",Iu="refresh_token_expired",Au="ux_not_allowed",jT="interaction_required",DT="consent_required",UT="login_required",oa="bad_token";/*! @azure/msal-common v15.8.1 2025-07-08 */const Dh=[jT,DT,UT,oa,Au],FT=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],HT={[Es]:"No refresh token found in the cache. Please sign-in.",[Cp]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Iu]:"Refresh token has expired.",[oa]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Au]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class It extends ae{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,It.prototype),this.timestamp=o||x.EMPTY_STRING,this.traceId=i||x.EMPTY_STRING,this.correlationId=s||x.EMPTY_STRING,this.claims=a||x.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function Tp(t,e,n){const r=!!t&&Dh.indexOf(t)>-1,o=!!n&&FT.indexOf(n)>-1,i=!!e&&Dh.some(s=>e.indexOf(s)>-1);return r||i||o}function Is(t){return new It(t,HT[t])}/*! @azure/msal-common v15.8.1 2025-07-08 */class Yr{static setRequestState(e,n,r){const o=Yr.generateLibraryState(e,r);return n?`${o}${x.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw b(Bl);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw b(Bl);if(!n)throw b(Kr);try{const r=n.split(x.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(x.RESOURCE_DELIM):x.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||x.EMPTY_STRING,libraryState:a}}catch{throw b(Kr)}}}/*! @azure/msal-common v15.8.1 2025-07-08 */const zT={SW:"sw"};class Gr{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(w.PopTokenGenerateCnf,e.correlationId);const r=await I(this.generateKid.bind(this),w.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(w.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:zT.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,o){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:u}=r,d=s?new Z(s):void 0,h=d==null?void 0:d.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:it(),m:i==null?void 0:i.toUpperCase(),u:h==null?void 0:h.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:h==null?void 0:h.AbsolutePath,q:h!=null&&h.QueryString?[[],h.QueryString]:void 0,client_claims:a||void 0,...o},n,u,r.correlationId)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class BT{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.8.1 2025-07-08 */class ir{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||x.NOT_AVAILABLE} - Timestamp: ${e.timestamp||x.NOT_AVAILABLE} - Description: ${e.error_description||x.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||x.NOT_AVAILABLE} - Trace ID: ${e.trace_id||x.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,s=new ur(e.error,o,e.suberror,i,e.status);if(n&&e.status&&e.status>=xn.SERVER_ERROR_RANGE_START&&e.status<=xn.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(n&&e.status&&e.status>=xn.CLIENT_ERROR_RANGE_START&&e.status<=xn.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw Tp(e.error,e.error_description,e.suberror)?new It(e.error,e.error_description,e.suberror,e.timestamp||x.EMPTY_STRING,e.trace_id||x.EMPTY_STRING,e.correlation_id||x.EMPTY_STRING,e.claims||x.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,n,r,o,i,s,a,c,u){var y;(y=this.performanceClient)==null||y.addQueueMeasurement(w.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=Qr(e.id_token||x.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw b(Ig);if(o.maxAge||o.maxAge===0){const T=d.auth_time;if(!T)throw b(eu);Ug(T,o.maxAge)}}this.homeAccountIdentifier=qe.generateHomeAccountId(e.client_info||x.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,d);let h;i&&i.state&&(h=Yr.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=this.generateCacheRecord(e,n,r,o,d,s,i);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new BT(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),a&&!c&&f.account){const T=f.account.generateAccountKey();if(!this.cacheStorage.getAccount(T,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ir.generateAuthenticationResult(this.cryptoObj,n,f,!1,o,d,h,void 0,u)}await this.cacheStorage.saveCacheRecord(f,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return ir.generateAuthenticationResult(this.cryptoObj,n,f,!1,o,d,h,e,u)}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw b(nu);const u=Xg(i);let d,h;e.id_token&&i&&(d=Ys(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),h=Nu(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,u,a,void 0,this.logger));let f=null;if(e.access_token){const T=e.scope?Ee.fromString(e.scope):new Ee(o.scopes||[]),R=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,v=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,g=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,m=r+R,C=m+v,N=g&&g>0?r+g:void 0;f=Js(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||n.tenant||"",T.printScopes(),m,C,this.cryptoObj.base64Decode,N,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let p=null;if(e.refresh_token){let T;if(e.refresh_token_expires_in){const R=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;T=r+R}p=Fg(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,T)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:c,familyId:e.foci}),{account:h,idToken:d,accessToken:f,refreshToken:p,appMetadata:y}}static async generateAuthenticationResult(e,n,r,o,i,s,a,c,u){var m,C,N,M,L;let d=x.EMPTY_STRING,h=[],f=null,p,y,T=x.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===oe.POP&&!i.popKid){const D=new Gr(e),{secret:re,keyId:W}=r.accessToken;if(!W)throw b(ru);d=await D.signPopToken(re,W,i)}else d=r.accessToken.secret;h=Ee.fromString(r.accessToken.target).asArray(),f=Or(r.accessToken.expiresOn),p=Or(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(y=Or(r.accessToken.refreshOn))}r.appMetadata&&(T=r.appMetadata.familyId===ko?ko:"");const R=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",v=(s==null?void 0:s.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const g=r.account?fu(r.account.getAccountInfo(),void 0,s,(m=r.idToken)==null?void 0:m.secret):null;return{authority:n.canonicalAuthority,uniqueId:R,tenantId:v,scopes:h,account:g,idToken:((C=r==null?void 0:r.idToken)==null?void 0:C.secret)||"",idTokenClaims:s||{},accessToken:d,fromCache:o,expiresOn:f,extExpiresOn:p,refreshOn:y,correlationId:i.correlationId,requestId:u||x.EMPTY_STRING,familyId:T,tokenType:((N=r.accessToken)==null?void 0:N.tokenType)||x.EMPTY_STRING,state:a?a.userRequestState:x.EMPTY_STRING,cloudGraphHostName:((M=r.account)==null?void 0:M.cloudGraphHostName)||x.EMPTY_STRING,msGraphHost:((L=r.account)==null?void 0:L.msGraphHost)||x.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function Nu(t,e,n,r,o,i,s,a,c,u,d,h){h==null||h.verbose("setCachedAccount called");const p=t.getAccountKeys().find(g=>g.startsWith(n));let y=null;p&&(y=t.getAccount(p,o));const T=y||qe.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:u==null?void 0:u.cloud_graph_host_name,msGraphHost:u==null?void 0:u.msgraph_host,nativeAccountId:d},e,r),R=T.tenantProfiles||[],v=c||T.realm;if(v&&!R.find(g=>g.tenantId===v)){const g=hu(n,T.localAccountId,v,i);R.push(g)}return T.tenantProfiles=R,T}/*! @azure/msal-common v15.8.1 2025-07-08 */async function Sp(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.8.1 2025-07-08 */class xp extends Eu{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(w.AuthClientAcquireToken,e.correlationId),!e.code)throw b(_g);const r=it(),o=await I(this.executeTokenRequest.bind(this),w.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=o.headers)==null?void 0:c[Ge.X_MS_REQUEST_ID],s=new ir(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),I(s.handleServerTokenResponse.bind(s),w.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,n,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw de(Gg);const n=this.createLogoutUrlQueryString(e);return Z.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var u;(u=this.performanceClient)==null||u.addQueueMeasurement(w.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),o=Z.appendQueryString(e.tokenEndpoint,r),i=await I(this.createTokenRequestBody.bind(this),w.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let s;if(n.clientInfo)try{const d=vs(n.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${d.uid}${He.CLIENT_INFO_SEPARATOR}${d.utid}`,type:jt.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}const a=this.createTokenRequestHeaders(s||n.ccsCredential),c=na(this.config.authOptions.clientId,n);return I(this.executePostToTokenEndpoint.bind(this),w.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(o,i,a,c,n.correlationId,w.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(w.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(yu(n,e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[or])||this.config.authOptions.clientId),this.includeRedirectUri)vu(n,e.redirectUri);else if(!e.redirectUri)throw de(Hg);if(pu(n,e.scopes,!0,this.oidcDefaultScopes),ET(n,e.code),Tu(n,this.config.libraryInfo),Su(n,this.config.telemetry.application),yp(n),this.serverTelemetryManager&&!op(this.config)&&pp(n,this.serverTelemetryManager),e.codeVerifier&&AT(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&up(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;dp(n,await Sp(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),hp(n,s.assertionType)}if(fp(n,wg.AUTHORIZATION_CODE_GRANT),xu(n),e.authenticationScheme===oe.POP){const s=new Gr(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await I(s.generateCnf.bind(s),w.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ku(n,a)}else if(e.authenticationScheme===oe.SSH)if(e.sshJwk)gp(n,e.sshJwk);else throw de(Xs);(!Zt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&wu(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const s=vs(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${He.CLIENT_INFO_SEPARATOR}${s.utid}`,type:jt.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case jt.HOME_ACCOUNT_ID:try{const s=Mr(r.credential);Ao(n,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case jt.UPN:ks(n,r.credential);break}return e.embeddedClientId&&ea(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Xn(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Lh])&&Xn(n,{[Lh]:"1"}),Zs(n,e.correlationId,this.performanceClient),Vo(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&wT(n,e.postLogoutRedirectUri),e.correlationId&&Cu(n,e.correlationId),e.idTokenHint&&CT(n,e.idTokenHint),e.state&&cp(n,e.state),e.logoutHint&&_T(n,e.logoutHint),e.extraQueryParameters&&Xn(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&mp(n),Vo(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const $T=300;class KT extends Eu{constructor(e,n){super(e,n)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(w.RefreshTokenClientAcquireToken,e.correlationId);const n=it(),r=await I(this.executeTokenRequest.bind(this),w.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(a=r.headers)==null?void 0:a[Ge.X_MS_REQUEST_ID],i=new ir(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),I(i.handleServerTokenResponse.bind(i),w.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw de(Kg);if((r=this.performanceClient)==null||r.addQueueMeasurement(w.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw b(tu);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await I(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof It&&o.errorCode===Es,s=o instanceof ur&&o.errorCode===Eh.INVALID_GRANT_ERROR&&o.subError===Eh.CLIENT_MISMATCH_ERROR;if(i||s)return I(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return I(this.acquireTokenWithCachedRefreshToken.bind(this),w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var i,s,a;(i=this.performanceClient)==null||i.addQueueMeasurement(w.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Et(this.cacheManager.getRefreshToken.bind(this.cacheManager),w.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Is(Es);if(r.expiresOn&&$l(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||$T))throw(s=this.performanceClient)==null||s.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Is(Iu);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||oe.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:jt.HOME_ACCOUNT_ID}};try{return await I(this.acquireToken.bind(this),w.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(c){if(c instanceof It&&((a=this.performanceClient)==null||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===oa)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const u=Io(r);this.cacheManager.removeRefreshToken(u,e.correlationId)}throw c}}async executeTokenRequest(e,n){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(w.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=Z.appendQueryString(n.tokenEndpoint,r),i=await I(this.createTokenRequestBody.bind(this),w.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=na(this.config.authOptions.clientId,e);return I(this.executePostToTokenEndpoint.bind(this),w.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,w.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(w.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(yu(n,e.embeddedClientId||((o=e.tokenBodyParameters)==null?void 0:o[or])||this.config.authOptions.clientId),e.redirectUri&&vu(n,e.redirectUri),pu(n,e.scopes,!0,(i=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:i.defaultScopes),fp(n,wg.REFRESH_TOKEN_GRANT),xu(n),Tu(n,this.config.libraryInfo),Su(n,this.config.telemetry.application),yp(n),this.serverTelemetryManager&&!op(this.config)&&pp(n,this.serverTelemetryManager),IT(n,e.refreshToken),this.config.clientCredentials.clientSecret&&up(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;dp(n,await Sp(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),hp(n,s.assertionType)}if(e.authenticationScheme===oe.POP){const s=new Gr(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await I(s.generateCnf.bind(s),w.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,ku(n,a)}else if(e.authenticationScheme===oe.SSH)if(e.sshJwk)gp(n,e.sshJwk);else throw de(Xs);if((!Zt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&wu(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case jt.HOME_ACCOUNT_ID:try{const s=Mr(e.ccsCredential.credential);Ao(n,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case jt.UPN:ks(n,e.ccsCredential.credential);break}return e.embeddedClientId&&ea(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Xn(n,e.tokenBodyParameters),Zs(n,e.correlationId,this.performanceClient),Vo(n)}}/*! @azure/msal-common v15.8.1 2025-07-08 */class GT extends Eu{constructor(e,n){super(e,n)}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(w.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Gn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Zt.isEmptyObj(e.claims))throw this.setCacheOutcome(Gn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),b(On);if(!e.account)throw b(tu);const r=e.account.tenantId||MT(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(i){if(r0(i.cachedAt)||$l(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Gn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),b(On);i.refreshOn&&$l(i.refreshOn,0)&&(n=Gn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Gn.NO_CACHED_ACCESS_TOKEN,e.correlationId),b(On);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await I(this.generateResultFromCacheRecord.bind(this),w.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},n),e!==Gn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(w.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=Qr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw b(eu);Ug(i,n.maxAge)}return ir.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const VT={sendGetRequestAsync:()=>Promise.reject(b(Q)),sendPostRequestAsync:()=>Promise.reject(b(Q))};/*! @azure/msal-common v15.8.1 2025-07-08 */function WT(t,e,n,r){var a,c;const o=e.correlationId,i=new Map;yu(i,e.embeddedClientId||((a=e.extraQueryParameters)==null?void 0:a[or])||t.clientId);const s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(pu(i,s,!0,(c=t.authority.options.OIDCOptions)==null?void 0:c.defaultScopes),vu(i,e.redirectUri),Cu(i,o),yT(i,e.responseMode),xu(i),e.prompt&&(ST(i,e.prompt),r==null||r.addFields({prompt:e.prompt},o)),e.domainHint&&(TT(i,e.domainHint),r==null||r.addFields({domainHintFromRequest:!0},o)),e.prompt!==Ve.SELECT_ACCOUNT)if(e.sid&&e.prompt===Ve.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),jh(i,e.sid),r==null||r.addFields({sidFromRequest:!0},o);else if(e.account){const u=YT(e.account);let d=JT(e.account);if(d&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),d=null),d){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ii(i,d),r==null||r.addFields({loginHintFromClaim:!0},o);try{const h=Mr(e.account.homeAccountId);Ao(i,h)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(u&&e.prompt===Ve.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),jh(i,u),r==null||r.addFields({sidFromClaim:!0},o);try{const h=Mr(e.account.homeAccountId);Ao(i,h)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ii(i,e.loginHint),ks(i,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ii(i,e.account.username),r==null||r.addFields({loginHintFromUpn:!0},o);try{const h=Mr(e.account.homeAccountId);Ao(i,h)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ii(i,e.loginHint),ks(i,e.loginHint),r==null||r.addFields({loginHintFromRequest:!0},o));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&xT(i,e.nonce),e.state&&cp(i,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&wu(i,e.claims,t.clientCapabilities),e.embeddedClientId&&ea(i,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Vl))&&mp(i),i}function kp(t,e,n,r){const o=Vo(e,n,r);return Z.appendQueryString(t.authorizationEndpoint,o)}function qT(t,e){if(Ep(t,e),!t.code)throw b(Mg);return t}function Ep(t,e){if(!t.state||!e)throw t.state?b(Fl,"Cached State"):b(Fl,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw b(Kr,t.state)}try{r=decodeURIComponent(e)}catch{throw b(Kr,t.state)}if(n!==r)throw b(Eg);if(t.error||t.error_description||t.suberror){const o=QT(t);throw Tp(t.error,t.error_description,t.suberror)?new It(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",o):new ur(t.error||"",t.error_description,t.suberror,o)}}function QT(t){var r,o;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(o=t.error_uri)==null?void 0:o.substring(n+e.length):void 0}function YT(t){var e;return((e=t.idTokenClaims)==null?void 0:e.sid)||null}function JT(t){var e;return((e=t.idTokenClaims)==null?void 0:e.login_hint)||null}/*! @azure/msal-common v15.8.1 2025-07-08 */const Uh=",",Ip="|";function XT(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e!=null&&e.length){if(a=e.split(Uh),a.length<4)return e}else a=Array.from({length:4},()=>Ip);return s.forEach((c,u)=>{var d,h;c.length===2&&((d=c[0])!=null&&d.length)&&((h=c[1])!=null&&h.length)&&ZT({skuArr:a,index:u,skuName:c[0],skuVersion:c[1]})}),a.join(Uh)}function ZT(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join(Ip))}class Wo{constructor(e,n){this.cacheOutcome=Gn.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||x.EMPTY_STRING,this.wrapperVer=e.wrapperVer||x.EMPTY_STRING,this.telemetryCacheKey=be.CACHE_KEY+He.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${be.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const o=n.join(be.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(be.VALUE_SEPARATOR);return[be.SCHEMA_VERSION,s,o].join(be.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Wo.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(be.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(be.VALUE_SEPARATOR),i=e.errors.length,s=n<i?be.OVERFLOW_TRUE:be.OVERFLOW_FALSE,a=[i,s].join(be.VALUE_SEPARATOR);return[be.SCHEMA_VERSION,e.cacheHits,r,o,a].join(be.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=be.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ae?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(be.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Wo.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const s=e.failedRequests[2*n]||x.EMPTY_STRING,a=e.failedRequests[2*n+1]||x.EMPTY_STRING,c=e.errors[n]||x.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<be.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||x.EMPTY_STRING),e.push(this.regionSource||x.EMPTY_STRING),e.push(this.regionOutcome||x.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return XT(e)}}/*! @azure/msal-common v15.8.1 2025-07-08 */const Ap="missing_kid_error",Np="missing_alg_error";/*! @azure/msal-common v15.8.1 2025-07-08 */const eS={[Ap]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Np]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class _u extends ae{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,_u.prototype)}}function Fh(t){return new _u(t,eS[t])}/*! @azure/msal-common v15.8.1 2025-07-08 */class Ru{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Fh(Ap);if(!e.alg)throw Fh(Np);const n=new Ru({typ:e.typ||HC.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const bu="pkce_not_created",Pu="ear_jwk_empty",_p="ear_jwe_empty",Wl="crypto_nonexistent",ia="empty_navigate_uri",Rp="hash_empty_error",Ou="no_state_in_hash",bp="hash_does_not_contain_known_properties",Pp="unable_to_parse_state",Op="state_interaction_type_mismatch",Mp="interaction_in_progress",Lp="popup_window_error",jp="empty_window_error",qo="user_cancelled",tS="monitor_popup_timeout",Dp="monitor_window_timeout",Up="redirect_in_iframe",Fp="block_iframe_reload",Hp="block_nested_popups",nS="iframe_closed_prematurely",sa="silent_logout_unsupported",zp="no_account_error",rS="silent_prompt_value_error",Bp="no_token_request_cache_error",$p="unable_to_parse_token_request_cache_error",oS="auth_request_not_set_error",iS="invalid_cache_type",aa="non_browser_environment",fr="database_not_open",As="no_network_connectivity",Kp="post_request_failed",Gp="get_request_failed",ql="failed_to_parse_response",Vp="unable_to_load_token",Mu="crypto_key_not_found",Wp="auth_code_required",qp="auth_code_or_nativeAccountId_required",Qp="spa_code_and_nativeAccountId_present",Lu="database_unavailable",Yp="unable_to_acquire_token_from_native_platform",Jp="native_handshake_timeout",Xp="native_extension_not_installed",ju="native_connection_not_established",Ns="uninitialized_public_client_application",Zp="native_prompt_not_supported",ey="invalid_base64_string",ty="invalid_pop_token_request",ny="failed_to_build_headers",ry="failed_to_parse_headers",Bi="failed_to_decrypt_ear_response",Du="timed_out";/*! @azure/msal-browser v4.15.0 2025-07-08 */const en="For more visit: aka.ms/msaljs/browser-errors",sS={[bu]:"The PKCE code challenge and verifier could not be generated.",[Pu]:"No EAR encryption key provided. This is unexpected.",[_p]:"Server response does not contain ear_jwe property. This is unexpected.",[Wl]:"The crypto object or function is not available.",[ia]:"Navigation URI is empty. Please check stack trace for more info.",[Rp]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${en}`,[Ou]:"Hash does not contain state. Please verify that the request originated from msal.",[bp]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${en}`,[Pp]:"Unable to parse state. Please verify that the request originated from msal.",[Op]:"Hash contains state but the interaction type does not match the caller.",[Mp]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${en}`,[Lp]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[jp]:"window.open returned null or undefined window object.",[qo]:"User cancelled the flow.",[tS]:`Token acquisition in popup failed due to timeout.  ${en}`,[Dp]:`Token acquisition in iframe failed due to timeout.  ${en}`,[Up]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Fp]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${en}`,[Hp]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[nS]:"The iframe being monitored was closed prematurely.",[sa]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[zp]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[rS]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Bp]:"No token request found in cache.",[$p]:"The cached token request could not be parsed.",[oS]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[iS]:"Invalid cache type",[aa]:"Login and token requests are not supported in non-browser environments.",[fr]:"Database is not open!",[As]:"No network connectivity. Check your internet connection.",[Kp]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Gp]:"Network request failed. Please check the network trace to determine root cause.",[ql]:"Failed to parse network response. Check network trace.",[Vp]:"Error loading token to cache.",[Mu]:"Cryptographic Key or Keypair not found in browser storage.",[Wp]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[qp]:"An authorization code or nativeAccountId must be provided to this flow.",[Qp]:"Request cannot contain both spa code and native account id.",[Lu]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Yp]:`Unable to acquire token from native platform.  ${en}`,[Jp]:"Timed out while attempting to establish connection to browser extension",[Xp]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ju]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${en}`,[Ns]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${en}`,[Zp]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[ey]:"Invalid base64 encoded string.",[ty]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[ny]:"Failed to build request headers object.",[ry]:"Failed to parse response headers",[Bi]:"Failed to decrypt ear response",[Du]:"The request timed out."};class ri extends ae{constructor(e,n){super(e,sS[e],n),Object.setPrototypeOf(this,ri.prototype),this.name="BrowserAuthError"}}function U(t,e){return new ri(t,e)}/*! @azure/msal-browser v4.15.0 2025-07-08 */const Ze={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},wt={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},ao={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},_e={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Hh={GET:"GET",POST:"POST"},Cn={SIGNIN:"signin",SIGNOUT:"signout"},Te={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},pt={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys",VERSION:"msal.version"},Ai={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},le={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var V;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(V||(V={}));const zh={scopes:ni},oy="jwk",Ql="msal.db",aS=1,lS=`${Ql}.keys`,$e={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},cS=[$e.Default,$e.Skip,$e.RefreshTokenAndNetwork],uS="msal.browser.log.level",dS="msal.browser.log.pii",hS="msal.browser.platform.auth.dom";/*! @azure/msal-browser v4.15.0 2025-07-08 */function Ni(t){return encodeURIComponent(Qo(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Un(t){return iy(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qo(t){return iy(new TextEncoder().encode(t))}function iy(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.15.0 2025-07-08 */function Ft(t){return new TextDecoder().decode(Mn(t))}function Mn(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw U(ey)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.15.0 2025-07-08 */const fS="RSASSA-PKCS1-v1_5",Jr="AES-GCM",sy="HKDF",Uu="SHA-256",mS=2048,gS=new Uint8Array([1,0,1]),Bh="0123456789abcdef",$h=new Uint32Array(1),Fu="raw",ay="encrypt",Hu="decrypt",pS="deriveKey",yS="crypto_subtle_undefined",zu={name:fS,hash:Uu,modulusLength:mS,publicExponent:gS};function vS(t){if(!window)throw U(aa);if(!window.crypto)throw U(Wl);if(!t&&!window.crypto.subtle)throw U(Wl,yS)}async function ly(t,e,n){e==null||e.addQueueMeasurement(w.Sha256Digest,n);const o=new TextEncoder().encode(t);return window.crypto.subtle.digest(Uu,o)}function wS(t){return window.crypto.getRandomValues(t)}function Ba(){return window.crypto.getRandomValues($h),$h[0]}function zt(){const t=Date.now(),e=Ba()*1024+(Ba()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Ba();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=Bh.charAt(n[a]>>>4),s+=Bh.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function CS(t,e){return window.crypto.subtle.generateKey(zu,t,e)}async function $a(t){return window.crypto.subtle.exportKey(oy,t)}async function TS(t,e,n){return window.crypto.subtle.importKey(oy,t,zu,e,n)}async function SS(t,e){return window.crypto.subtle.sign(zu,t,e)}async function Bu(){const t=await cy(),n={alg:"dir",kty:"oct",k:Un(new Uint8Array(t))};return Qo(JSON.stringify(n))}async function xS(t){const e=Ft(t),r=JSON.parse(e).k,o=Mn(r);return window.crypto.subtle.importKey(Fu,o,Jr,!1,[Hu])}async function kS(t,e){const n=e.split(".");if(n.length!==5)throw U(Bi,"jwe_length");const r=await xS(t).catch(()=>{throw U(Bi,"import_key")});try{const o=new TextEncoder().encode(n[0]),i=Mn(n[2]),s=Mn(n[3]),a=Mn(n[4]),c=a.byteLength*8,u=new Uint8Array(s.length+a.length);u.set(s),u.set(a,s.length);const d=await window.crypto.subtle.decrypt({name:Jr,iv:i,tagLength:c,additionalData:o},r,u);return new TextDecoder().decode(d)}catch{throw U(Bi,"decrypt")}}async function cy(){const t=await window.crypto.subtle.generateKey({name:Jr,length:256},!0,[ay,Hu]);return window.crypto.subtle.exportKey(Fu,t)}async function Kh(t){return window.crypto.subtle.importKey(Fu,t,sy,!1,[pS])}async function uy(t,e,n){return window.crypto.subtle.deriveKey({name:sy,salt:e,hash:Uu,info:new TextEncoder().encode(n)},t,{name:Jr,length:256},!1,[ay,Hu])}async function ES(t,e,n){const r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await uy(t,o,n),s=await window.crypto.subtle.encrypt({name:Jr,iv:new Uint8Array(12)},i,r);return{data:Un(new Uint8Array(s)),nonce:Un(o)}}async function IS(t,e,n,r){const o=Mn(r),i=await uy(t,Mn(e),n),s=await window.crypto.subtle.decrypt({name:Jr,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)}async function dy(t){const e=await ly(t),n=new Uint8Array(e);return Un(n)}/*! @azure/msal-browser v4.15.0 2025-07-08 */const $u="storage_not_supported",AS="stubbed_public_client_application_called",hy="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.15.0 2025-07-08 */const NS={[$u]:"Given storage configuration option was not supported.",[AS]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[hy]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Ku extends ae{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Ku.prototype)}}function Gu(t){return new Ku(t,NS[t])}/*! @azure/msal-browser v4.15.0 2025-07-08 */function fy(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function _S(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Vu(){return window.parent!==window}function RS(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Ze.POPUP_NAME_PREFIX}.`)===0}function an(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function bS(){const e=new Z(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function PS(){if(Z.hashContainsKnownProperties(window.location.hash)&&Vu())throw U(Fp)}function OS(t){if(Vu()&&!t)throw U(Up)}function MS(){if(RS())throw U(Hp)}function my(){if(typeof window>"u")throw U(aa)}function gy(t){if(!t)throw U(Ns)}function Wu(t){my(),PS(),MS(),gy(t)}function Gh(t,e){if(Wu(t),OS(e.system.allowRedirectInIframe),e.cache.cacheLocation===_e.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Gu(hy)}function py(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function LS(){return zt()}/*! @azure/msal-browser v4.15.0 2025-07-08 */class _s{navigateInternal(e,n){return _s.defaultNavigateWindow(e,n)}navigateExternal(e,n){return _s.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(U(Du,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class jS{async sendGetRequestAsync(e,n){let r,o={},i=0;const s=Vh(n);try{r=await fetch(e,{method:Hh.GET,headers:s})}catch(a){throw mo(U(window.navigator.onLine?Gp:As),void 0,void 0,a)}o=Wh(r.headers);try{return i=r.status,{headers:o,body:await r.json(),status:i}}catch(a){throw mo(U(ql),i,o,a)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",o=Vh(n);let i,s=0,a={};try{i=await fetch(e,{method:Hh.POST,headers:o,body:r})}catch(c){throw mo(U(window.navigator.onLine?Kp:As),void 0,void 0,c)}a=Wh(i.headers);try{return s=i.status,{headers:a,body:await i.json(),status:s}}catch(c){throw mo(U(ql),s,a,c)}}}function Vh(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw mo(U(ny),void 0,void 0,e)}}function Wh(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw U(ry)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const DS=6e4,Yl=1e4,US=3e4,yy=2e3;function FS({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:x.EMPTY_STRING,authority:`${x.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:x.EMPTY_STRING,authorityMetadata:x.EMPTY_STRING,redirectUri:typeof window<"u"?an():"",postLogoutRedirectUri:x.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ht.AAD,OIDCOptions:{serverResponseType:Qs.FRAGMENT,defaultScopes:[x.OPENID_SCOPE,x.PROFILE_SCOPE,x.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:su.None,tenant:x.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:_e.SessionStorage,temporaryCacheLocation:_e.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===_e.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:se.Info,piiLoggingEnabled:!1},u={...{...rp,loggerOptions:a,networkClient:o?new jS:VT,navigationClient:new _s,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||DS,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Yl,navigateFrameWait:0,redirectNavigationTimeout:US,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||yy,pollIntervalMilliseconds:Ze.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},d={application:{appName:x.EMPTY_STRING,appVersion:x.EMPTY_STRING},client:new np};if((t==null?void 0:t.protocolMode)!==ht.OIDC&&(t!=null&&t.OIDCOptions)&&new Dn(u.loggerOptions).warning(JSON.stringify(de(Qg))),t!=null&&t.protocolMode&&t.protocolMode===ht.OIDC&&(u!=null&&u.allowPlatformBroker))throw de(Yg);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...s,...e},system:u,telemetry:{...d,...r}}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const HS="@azure/msal-browser",sr="4.15.0";/*! @azure/msal-browser v4.15.0 2025-07-08 */class qu{static loggerCallback(e,n){switch(e){case se.Error:console.error(n);return;case se.Info:console.info(n);return;case se.Verbose:console.debug(n);return;case se.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=FS(e,this.browserEnvironment);let n;try{n=window[_e.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(uS),o=(c=n==null?void 0:n.getItem(dS))==null?void 0:c.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(se).includes(r)?se[r]:void 0;a&&(s.loggerCallback=qu.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new Dn(s,HS,sr),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class ar extends qu{getModuleName(){return ar.MODULE_NAME}getId(){return ar.ID}async initialize(){return this.available=typeof window<"u",this.available}}ar.MODULE_NAME="";ar.ID="StandardOperatingContext";/*! @azure/msal-browser v4.15.0 2025-07-08 */class zS{constructor(){this.dbName=Ql,this.version=aS,this.tableName=lS,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(U(Lu)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(U(fr));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(U(fr));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(U(fr));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),n()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(U(fr));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),n(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(U(fr));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(Ql),o=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),n(!1)))})}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class la{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class BS{constructor(e){this.inMemoryCache=new la,this.indexedDBCache=new zS,this.logger=e}handleDatabaseAccessError(e){if(e instanceof ri&&e.errorCode===Lu)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class fn{constructor(e,n,r){this.logger=e,vS(r??!1),this.cache=new BS(this.logger),this.performanceClient=n}createNewGuid(){return zt()}base64Encode(e){return Qo(e)}base64Decode(e){return Ft(e)}base64UrlEncode(e){return Ni(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var d;const n=(d=this.performanceClient)==null?void 0:d.startMeasurement(w.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await CS(fn.EXTRACTABLE,fn.POP_KEY_USAGES),o=await $a(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},s=qh(i),a=await this.hashString(s),c=await $a(r.privateKey),u=await TS(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw b(Lg)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,o){var m;const i=(m=this.performanceClient)==null?void 0:m.startMeasurement(w.CryptoOptsSignJwt,o),s=await this.cache.getItem(n);if(!s)throw U(Mu);const a=await $a(s.publicKey),c=qh(a),u=Ni(JSON.stringify({kid:n})),d=Ru.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:u}),h=Ni(d);e.cnf={jwk:JSON.parse(c)};const f=Ni(JSON.stringify(e)),p=`${h}.${f}`,T=new TextEncoder().encode(p),R=await SS(s.privateKey,T),v=Un(new Uint8Array(R)),g=`${p}.${v}`;return i&&i.end({success:!0}),g}async hashString(e){return dy(e)}}fn.POP_KEY_USAGES=["sign","verify"];fn.EXTRACTABLE=!0;function qh(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.15.0 2025-07-08 */const $S=24*60*60*1e3,Jl={Lax:"Lax",None:"None"};class vy{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===n)return c}return""}getUserData(){throw b(Q)}setItem(e,n,r,o=!0,i=Jl.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${i};`;if(r){const a=KS(r);s+=`expires=${a};`}(o||i===Jl.None)&&(s+="Secure;"),document.cookie=s}async setUserData(){return Promise.reject(b(Q))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");n.push(o[0])}),n}containsKey(e){return this.getKeys().includes(e)}}function KS(t){const e=new Date;return new Date(e.getTime()+t*$S).toUTCString()}/*! @azure/msal-browser v4.15.0 2025-07-08 */function Xl(t){const e=t.getItem(pt.ACCOUNT_KEYS);return e?JSON.parse(e):[]}function Zl(t,e){const n=e.getItem(`${pt.TOKEN_KEYS}.${t}`);if(n){const r=JSON.parse(n);if(r&&r.hasOwnProperty("idToken")&&r.hasOwnProperty("accessToken")&&r.hasOwnProperty("refreshToken"))return r}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const Qh="msal.cache.encryption",GS="msal.broadcast.cache";class VS{constructor(e,n,r){if(!window.localStorage)throw Gu($u);this.memoryStorage=new la,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(GS)}async initialize(e){const n=new vy,r=n.getItem(Qh);let o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){const i=Et(Mn,w.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await I(Kh,w.GenerateHKDF,this.logger,this.performanceClient,e)(i)},await I(this.importExistingCache.bind(this),w.ImportExistingCache,this.logger,this.performanceClient,e)(e)}else{this.clear();const i=zt(),s=await I(cy,w.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Et(Un,w.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:await I(Kh,w.GenerateHKDF,this.logger,this.performanceClient,e)(s)};const c={id:i,key:a};n.setItem(Qh,JSON.stringify(c),0,!0,Jl.None)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw U(Ns);return this.memoryStorage.getItem(e)}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,o){if(!this.initialized||!this.encryptionCookie)throw U(Ns);const{data:i,nonce:s}=await I(ES,w.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:s,data:i,lastUpdatedAt:o};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Xl(this).forEach(r=>this.removeItem(r));const n=Zl(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(x.CACHE_PREFIX)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Xl(this);n=await this.importArray(n,e),this.setItem(pt.ACCOUNT_KEYS,JSON.stringify(n));const r=Zl(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),this.setItem(`${pt.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return!o.id||!o.nonce||!o.data?(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),null):o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):I(IS,w.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)}async importArray(e,n){const r=[],o=[];return e.forEach(i=>{const s=this.getItemFromEncryptedCache(i,n).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),await Promise.all(o),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(w.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),n.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class WS{constructor(){if(!window.sessionStorage)throw Gu($u)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const G={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.15.0 2025-07-08 */class ec extends Gl{constructor(e,n,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=n,this.logger=o,this.internalStorage=new la,this.browserStorage=Yh(e,n.cacheLocation,o,i),this.temporaryCacheStorage=Yh(e,n.temporaryCacheLocation,o,i),this.cookieStorage=new vy,this.eventHandler=s}async initialize(e){await this.browserStorage.initialize(e),this.trackVersionChanges(e)}trackVersionChanges(e){const n=this.browserStorage.getItem(pt.VERSION);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==sr&&this.setItem(pt.VERSION,sr,e)}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,n),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){const c=Kl(a);if(c.errorCode===Ts&&s<20){if(o.length||(e===`${pt.TOKEN_KEYS}.${this.clientId}`?o=JSON.parse(n).accessToken:o=this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}else throw c}}async setUserData(e,n,r,o){let i=[];for(let a=0;a<=20;a++)try{await I(this.browserStorage.setUserData.bind(this.browserStorage),w.SetUserData,this.logger,this.performanceClient)(e,n,r,o),a>0&&this.removeAccessTokenKeys(i.slice(0,a),r);break}catch(c){const u=Kl(c);if(u.errorCode===Ts&&a<20){if(i.length||(i=this.getTokenKeys().accessToken),i.length<=a)throw u;this.removeAccessToken(i[a],r,!1)}else throw u}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const o=this.validateAndParseJson(r);return!o||!qe.isAccountEntity(o)?null:Gl.toObject(new qe,o)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey(),o=Date.now().toString();e.lastUpdatedAt=o,await this.setUserData(r,JSON.stringify(e),n,o);const i=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===_e.LocalStorage&&i&&this.eventHandler.emitEvent(G.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Xl(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(pt.ACCOUNT_KEYS,JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),r.length===0){this.removeItem(pt.ACCOUNT_KEYS);return}else this.setItem(pt.ACCOUNT_KEYS,JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){super.removeAccount(e,n),this.removeAccountKeyFromMap(e,n)}removeAccountContext(e,n){super.removeAccountContext(e,n),this.cacheConfig.cacheLocation===_e.LocalStorage&&this.eventHandler.emitEvent(G.ACCOUNT_REMOVED,void 0,e.getAccountInfo())}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let o=0;if(e.forEach(i=>{const s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0){this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),this.setTokenKeys(r,n);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,n))}getTokenKeys(){return Zl(this.clientId,this.browserStorage)}setTokenKeys(e,n){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(`${pt.TOKEN_KEYS}.${this.clientId}`);return}else this.setItem(`${pt.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const o=this.validateAndParseJson(r);return!o||!i0(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=Io(e),o=Date.now().toString();e.lastUpdatedAt=o,await this.setUserData(r,JSON.stringify(e),n,o);const i=this.getTokenKeys();i.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(r),this.setTokenKeys(i,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const o=this.validateAndParseJson(r);return!o||!o0(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=Io(e),o=Date.now().toString();e.lastUpdatedAt=o,await this.setUserData(r,JSON.stringify(e),n,o);const i=this.getTokenKeys(),s=i.accessToken.indexOf(r);s!==-1&&i.accessToken.splice(s,1),this.logger.trace(`access token ${s===-1?"added to":"updated in"} map`),i.accessToken.push(r),this.setTokenKeys(i,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const o=this.validateAndParseJson(r);return!o||!s0(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=Io(e),o=Date.now().toString();e.lastUpdatedAt=o,await this.setUserData(r,JSON.stringify(e),n,o);const i=this.getTokenKeys();i.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(r),this.setTokenKeys(i,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!g0(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=m0(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!h0(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&p0(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(Ai.WRAPPER_SKU,e),this.internalStorage.setItem(Ai.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(Ai.WRAPPER_SKU)||x.EMPTY_STRING,n=this.internalStorage.getItem(Ai.WRAPPER_VER)||x.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(kh.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(kh.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:it().toString()};this.setItem(r,JSON.stringify(o),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(G.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!f0(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===_e.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(x.CACHE_PREFIX)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(x.CACHE_PREFIX)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(w.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(o=>{const i=this.getAccessTokenCredential(o,e);i!=null&&i.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Zt.startsWith(e,x.CACHE_PREFIX)?e:`${x.CACHE_PREFIX}.${this.clientId}.${e}`}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Te.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Te.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Te.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Te.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Te.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=Qo(JSON.stringify(e));if(this.setTemporaryCache(Te.REQUEST_PARAMS,r,!0),n){const o=Qo(n);this.setTemporaryCache(Te.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Te.REQUEST_PARAMS,!0);if(!e)throw U(Bp);const n=this.getTemporaryCache(Te.VERIFIER,!0);let r,o="";try{r=JSON.parse(Ft(e)),n&&(o=Ft(n))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),U($p)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Te.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var r;const n=(r=this.getInteractionInProgress())==null?void 0:r.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${x.CACHE_PREFIX}.${Te.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),fy(window),null}}setInteractionInProgress(e,n=Cn.SIGNIN){var o;const r=`${x.CACHE_PREFIX}.${Te.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw U(Mp);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&((o=this.getInteractionInProgress())==null?void 0:o.clientId)===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){var a,c,u;const r=Ys((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let o;n.claims&&(o=await this.cryptoImpl.hashString(n.claims));const i=Js((u=e.account)==null?void 0:u.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Nh(e.expiresOn):0,e.extExpiresOn?Nh(e.extExpiresOn):0,Ft,void 0,e.tokenType,void 0,n.sshKid,n.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(o){if(o instanceof Lr&&this.performanceClient&&n)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},n)}catch{}throw o}}}function Yh(t,e,n,r){try{switch(e){case _e.LocalStorage:return new VS(t,n,r);case _e.SessionStorage:return new WS;case _e.MemoryStorage:default:break}}catch(o){n.error(o)}return new la}const qS=(t,e,n,r)=>{const o={cacheLocation:_e.MemoryStorage,temporaryCacheLocation:_e.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new ec(t,o,ys,e,n,r)};/*! @azure/msal-browser v4.15.0 2025-07-08 */function QS(t,e,n,r,o){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(o||{},r):[]}function YS(t,e,n,r){if(e.trace("getAccount called"),Object.keys(t).length===0)return e.warning("getAccount: No accountFilter provided"),null;const o=n.getAccountInfoFilteredBy(t,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function JS(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:t},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function XS(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:t},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function ZS(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:t},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function ex(t,e,n){e.setActiveAccount(t,n)}function tx(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.15.0 2025-07-08 */const nx="msal.broadcast.event";class rx{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Dn({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(nx)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||LS();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){var s;const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case G.ACCOUNT_ADDED:case G.ACCOUNT_REMOVED:case G.ACTIVE_ACCOUNT_CHANGED:(s=this.broadcastChannel)==null||s.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;(e=this.broadcastChannel)==null||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class wy{constructor(e,n,r,o,i,s,a,c,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=u||zt(),this.logger=o.clone(Ze.MSAL_SKU,sr,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,n){if(n){qe.accountInfoIsEqual(n,this.browserStorage.getActiveAccount(e),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null,e));try{this.browserStorage.removeAccount(qe.generateAccountCacheKey(n),e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return Z.getAbsoluteUrl(n,an())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Wo(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&s?this.config.auth.authority.replace(Z.getDomainFromUrl(i),n.environment):i,c=Ue.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await I(wp,w.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(n&&!u.isAlias(n.environment))throw de(Jg);return u}}/*! @azure/msal-browser v4.15.0 2025-07-08 */async function Qu(t,e,n,r){n.addQueueMeasurement(w.InitializeBaseRequest,t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(!s.authenticationScheme)s.authenticationScheme=oe.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===oe.SSH){if(!t.sshJwk)throw de(Xs);if(!t.sshKid)throw de(qg)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!Zt.isEmptyObj(t.claims)&&(s.requestedClaimsHash=await dy(t.claims)),s}async function ox(t,e,n,r,o){r.addQueueMeasurement(w.InitializeSilentRequest,t.correlationId);const i=await I(Qu,w.InitializeBaseRequest,o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Xr extends wy{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||zt(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Z.getAbsoluteUrl(e.postLogoutRedirectUri,an())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Z.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,an())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Z.getAbsoluteUrl(an(),an())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await I(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new xp(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(w.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await I(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:Ze.MSAL_SKU,version:sr,cpu:x.EMPTY_STRING,os:x.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(w.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:n},i=Yr.setRequestState(this.browserCrypto,e&&e.state||x.EMPTY_STRING,o),a={...await I(Qu,w.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||zt(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return a;const c=e.account||this.browserStorage.getActiveAccount(this.correlationId);return c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),a}}/*! @azure/msal-browser v4.15.0 2025-07-08 */function ix(t,e){if(!e)return null;try{return Yr.parseRequestState(t,e).libraryState.meta}catch{throw b(Kr)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */function Rs(t,e,n){const r=ws(t);if(!r)throw Zg(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),U(bp)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),U(Rp));return r}function sx(t,e,n){if(!t.state)throw U(Ou);const r=ix(e,t.state);if(!r)throw U(Pp);if(r.interactionType!==n)throw U(Op)}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Cy{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(w.HandleCodeResponse,n.correlationId);let r;try{r=qT(e,n.state)}catch(o){throw o instanceof ur&&o.subError===qo?U(qo):o}return I(this.handleCodeResponseFromServer.bind(this),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(w.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await I(this.authModule.updateAuthority.bind(this.authModule),w.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(n);i&&(this.authCodeRequest.ccsCredential=i)}return await I(this.authModule.acquireToken.bind(this.authModule),w.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:jt.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:jt.UPN}:null}}/*! @azure/msal-browser v4.15.0 2025-07-08 */const ax="ContentError",Ty="user_switch";/*! @azure/msal-browser v4.15.0 2025-07-08 */const lx="USER_INTERACTION_REQUIRED",cx="USER_CANCEL",ux="NO_NETWORK",dx="PERSISTENT_ERROR",hx="DISABLED",fx="ACCOUNT_UNAVAILABLE",mx="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.15.0 2025-07-08 */const gx=-2147186943,px={[Ty]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Yt extends ae{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,Yt.prototype),this.name="NativeAuthError",this.ext=r}}function mr(t){if(t.ext&&t.ext.status&&(t.ext.status===dx||t.ext.status===hx)||t.ext&&t.ext.error&&t.ext.error===gx)return!0;switch(t.errorCode){case ax:return!0;default:return!1}}function bs(t,e,n){if(n&&n.status)switch(n.status){case fx:return Is(Cp);case lx:return new It(t,e);case cx:return U(qo);case ux:return U(As);case mx:return Is(Au)}return new Yt(t,px[t]||e,n)}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Sy extends Xr{async acquireToken(e){this.performanceClient.addQueueMeasurement(w.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(le.acquireTokenSilent_silentFlow),r=await I(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new GT(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const s=(await I(o.acquireCachedToken.bind(o),w.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof ri&&i.errorCode===Mu&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n==null?void 0:n.account)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class $i extends wy{constructor(e,n,r,o,i,s,a,c,u,d,h,f){super(e,n,r,o,i,s,c,u,f),this.apiId=a,this.accountId=d,this.platformAuthProvider=u,this.nativeStorageManager=h,this.silentCacheClient=new Sy(e,this.nativeStorageManager,r,o,i,s,c,u,f);const p=this.platformAuthProvider.getExtensionName();this.skus=Wo.makeExtraSkuString({libraryName:Ze.MSAL_SKU,libraryVersion:sr,extensionName:p,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[mT]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(w.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(w.NativeInteractionClientAcquireToken,e.correlationId),o=it(),i=this.initializeServerTelemetryManager(this.apiId);try{const s=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(n===$e.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const a=await this.platformAuthProvider.sendMessage(s);return await this.handleNativeResponse(a,s,o).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),i.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError,isNativeBroker:!0}),c})}catch(s){throw s instanceof Yt&&i.setNativeBrokerErrorCode(s.errorCode),s}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Ee.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),b(zl);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw b(zl);try{const o=this.createSilentCacheRequest(n,r),i=await this.silentCacheClient.acquireToken(o),s={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:s}}catch(o){throw o}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(o)}catch(a){if(a instanceof Yt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),mr(a)))throw a}this.browserStorage.setTemporaryCache(Te.NATIVE_REQUEST,JSON.stringify(o),!0);const i={apiId:le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(s,i)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Te.NATIVE_REQUEST));const s=it();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const a=await this.platformAuthProvider.sendMessage(i),c=await this.handleNativeResponse(a,i,s);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),c}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var d,h;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=Qr(e.id_token,Ft),i=this.createHomeAccountIdentifier(e,o),s=(d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId))==null?void 0:d.homeAccountId;if((h=n.extraParameters)!=null&&h.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==n.accountId)throw bs(Ty);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=Nu(this.browserStorage,a,i,Ft,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const u=await this.generateAuthenticationResult(e,n,o,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId),await this.cacheNativeTokens(e,n,i,o,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,n){return qe.generateHomeAccountId(e.client_info||x.EMPTY_STRING,Ot.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?Ee.fromString(n):Ee.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===oe.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Gr(this.browserCrypto),o={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw b(ru);return r.signPopToken(e.access_token,n.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,n,r,o,i,s){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(n.scope,e.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||x.EMPTY_STRING,h=u.TenantId||r.tid||x.EMPTY_STRING,f=fu(o.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const p=await this.generatePopAccessToken(e,n),y=n.tokenType===oe.POP?oe.POP:oe.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:c.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:p,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:Or(s+e.expires_in),tokenType:y,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,n)}cacheNativeTokens(e,n,r,o,i,s,a){const c=Ys(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=n.tokenType===oe.POP?x.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=a+u,h=this.generateScopes(e.scope,n.scope),f=Js(r,n.authority,i,n.clientId,o.tid||s,h.printScopes(),d,0,Ft,void 0,n.tokenType,void 0,n.keyId),p={idToken:c,accessToken:f};return this.nativeStorageManager.saveCacheRecord(p,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===oe.POP?x.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...o}=e,i=new Ee(r||[]);i.appendScopes(ni);const s={...o,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(s.signPopToken&&e.popKid)throw U(ty);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=wt.MATS_TELEMETRY,e.authenticationScheme===oe.POP){const a={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},c=new Gr(this.browserCrypto);let u;if(s.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{const d=await I(c.generateCnf.bind(c),w.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(a,this.logger);u=d.reqCnfString,s.keyId=d.kid,s.signPopToken=!0}s.reqCnf=u}return this.addRequestSKUs(s),s}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Z(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case le.ssoSilent:case le.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Ve.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Ve.NONE:case Ve.CONSENT:case Ve.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),U(Zp)}}handleExtraBrokerParams(e){var i;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Ss)&&e.extraParameters.hasOwnProperty(xs)&&e.extraParameters.hasOwnProperty(or);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[xs],r=e.extraParameters[or]),e.extraParameters={child_client_id:r,child_redirect_uri:o},(i=this.performanceClient)==null||i.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */async function xy(t,e,n,r,o){const i=WT({...t.auth,authority:e},n,r,o);if(Tu(i,{sku:Ze.MSAL_SKU,version:sr,os:"",cpu:""}),t.auth.protocolMode!==ht.OIDC&&Su(i,t.telemetry.application),n.platformBroker&&(vT(i),n.authenticationScheme===oe.POP)){const s=new fn(r,o),a=new Gr(s);let c;n.popKid?c=s.encodeKid(n.popKid):c=(await I(a.generateCnf.bind(a),w.PopTokenGenerateCnf,r,o,n.correlationId)(n,r)).reqCnfString,ku(i,c)}return Zs(i,n.correlationId,o),i}async function Yu(t,e,n,r,o){if(!n.codeChallenge)throw de(cu);const i=await I(xy,w.GetStandardParams,r,o,n.correlationId)(t,e,n,r,o);return lp(i,vg.CODE),kT(i,n.codeChallenge,x.S256_CODE_CHALLENGE_METHOD),Xn(i,n.extraQueryParameters||{}),kp(e,i,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function Ju(t,e,n,r,o,i){if(!r.earJwk)throw U(Pu);const s=await xy(e,n,r,o,i);lp(s,vg.IDTOKEN_TOKEN_REFRESHTOKEN),RT(s,r.earJwk);const a=new Map;Xn(a,r.extraQueryParameters||{});const c=kp(n,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return yx(t,c,s)}function yx(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((o,i)=>{const s=t.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),t.body.appendChild(r),r}async function ky(t,e,n,r,o,i,s,a,c,u){if(a.verbose("Account id found, calling WAM for token"),!u)throw U(ju);const d=new fn(a,c),h=new $i(r,o,d,a,s,r.system.navigationClient,n,c,u,e,i,t.correlationId),{userRequestState:f}=Yr.parseRequestState(d,t.state);return I(h.acquireToken.bind(h),w.NativeInteractionClientAcquireToken,a,c,t.correlationId)({...t,state:f,prompt:void 0})}async function Xu(t,e,n,r,o,i,s,a,c,u,d,h){if(Qt.removeThrottle(s,o.auth.clientId,t),e.accountId)return I(ky,w.HandleResponsePlatformBroker,u,d,t.correlationId)(t,e.accountId,r,o,s,a,c,u,d,h);const f={...t,code:e.code||"",codeVerifier:n},p=new Cy(i,s,f,u,d);return await I(p.handleCodeResponse.bind(p),w.HandleCodeResponse,u,d,t.correlationId)(e,t)}async function Zu(t,e,n,r,o,i,s,a,c,u,d){if(Qt.removeThrottle(i,r.auth.clientId,t),Ep(e,t.state),!e.ear_jwe)throw U(_p);if(!t.earJwk)throw U(Pu);const h=JSON.parse(await I(kS,w.DecryptEarResponse,c,u,t.correlationId)(t.earJwk,e.ear_jwe));if(h.accountId)return I(ky,w.HandleResponsePlatformBroker,c,u,t.correlationId)(t,h.accountId,n,r,i,s,a,c,u,d);const f=new ir(r.auth.clientId,i,new fn(c,u),c,null,null,u);f.validateTokenResponse(h);const p={code:"",state:t.state,nonce:t.nonce,client_info:h.client_info,cloud_graph_host_name:h.cloud_graph_host_name,cloud_instance_host_name:h.cloud_instance_host_name,cloud_instance_name:h.cloud_instance_name,msgraph_host:h.msgraph_host};return await I(f.handleServerTokenResponse.bind(f),w.HandleServerTokenResponse,c,u,t.correlationId)(h,o,it(),t,p,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.15.0 2025-07-08 */const vx=32;async function ca(t,e,n){t.addQueueMeasurement(w.GeneratePkceCodes,n);const r=Et(wx,w.GenerateCodeVerifier,e,t,n)(t,e,n),o=await I(Cx,w.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:o}}function wx(t,e,n){try{const r=new Uint8Array(vx);return Et(wS,w.GetRandomValues,e,t,n)(r),Un(r)}catch{throw U(bu)}}async function Cx(t,e,n,r){e.addQueueMeasurement(w.GenerateCodeChallengeFromVerifier,r);try{const o=await I(ly,w.Sha256Digest,n,e,r)(t,e,r);return Un(new Uint8Array(o))}catch{throw U(bu)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Ps{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(w.NativeMessageHandlerHandshake),this.platformAuthType=wt.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:ao.GetToken,request:e},r={channel:wt.CHANNEL_ID,extensionId:this.extensionId,responseId:zt(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const o=await new Promise((s,a)=>{this.resolvers.set(r.responseId,{resolve:s,reject:a})});return this.validatePlatformBrokerResponse(o)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const o=new Ps(e,n,r,wt.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new Ps(e,n,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:wt.CHANNEL_ID,extensionId:this.extensionId,responseId:zt(),body:{method:ao.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(U(Jp)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==wt.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===ao.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(U(Xp))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if(i===ao.Response){if(!r)return;const s=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(bs(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(bs(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Ul(ps,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(i===ao.HandshakeResponse){if(!o){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Ul(ps,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===wt.PREFERRED_EXTENSION_ID?"chrome":(e=this.getExtensionId())!=null&&e.length?"unknown":void 0}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class ed{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=wt.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){var o;if(e.trace("PlatformAuthDOMHandler: createProvider called"),(o=window.navigator)!=null&&o.platformAuthentication){const i=await window.navigator.platformAuthentication.getSupportedContracts(wt.MICROSOFT_ENTRA_BROKERID);if(i!=null&&i.includes(wt.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new ed(e,n,r)}}getExtensionId(){return wt.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return wt.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:u,embeddedClientId:d,extraParameters:h,...f}=e,p=this.getDOMExtraParams(f);return{accountId:n,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:{...h,...p},isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:u,embeddedClientId:d}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),bs(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw Ul(ps,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{})}}}/*! @azure/msal-browser v4.15.0 2025-07-08 */async function Tx(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const o=Sx();t.trace("Has client allowed platform auth via DOM API: "+o);let i;try{o&&(i=await ed.createProvider(t,e,n)),i||(t.trace("Platform auth via DOM API not available, checking for extension"),i=await Ps.createProvider(t,r||yy,e))}catch(s){t.trace("Platform auth not available",s)}return i}function Sx(){let t;try{return t=window[_e.SessionStorage],(t==null?void 0:t.getItem(hS))==="true"}catch{return!1}}function Yo(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case oe.BEARER:case oe.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.15.0 2025-07-08 */class xx extends Xr{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,n){try{const o={popupName:this.generatePopupName(e.scopes||ni,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,n)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(e,o,n))}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const o=await I(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,V.Popup);n.popup&&py(o.authority);const i=Yo(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===ht.EAR?this.executeEarFlow(o,n):this.executeCodeFlow(o,n,r)}async executeCodeFlow(e,n,r){var c;const o=e.correlationId,i=this.initializeServerTelemetryManager(le.acquireTokenPopup),s=r||await I(ca,w.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),a={...e,codeChallenge:s.challenge};try{const u=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),d=await I(Yu,w.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,u.authority,a,this.logger,this.performanceClient),h=this.initiateAuthRequest(d,n);this.eventHandler.emitEvent(G.POPUP_OPENED,V.Popup,{popupWindow:h},null);const f=await this.monitorPopupForHash(h,n.popupWindowParent),p=Et(Rs,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await I(Xu,w.HandleResponseCode,this.logger,this.performanceClient,o)(e,p,s.verifier,le.acquireTokenPopup,this.config,u,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}catch(u){throw(c=n.popup)==null||c.close(),u instanceof ae&&(u.setCorrelationId(this.correlationId),i.cacheFailedRequest(u)),u}}async executeEarFlow(e,n){const r=e.correlationId,o=await I(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await I(Bu,w.GenerateEarKey,this.logger,this.performanceClient,r)(),s={...e,earJwk:i},a=n.popup||this.openPopup("about:blank",n);(await Ju(a.document,this.config,o,s,this.logger,this.performanceClient)).submit();const u=await I(this.monitorPopupForHash.bind(this),w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,n.popupWindowParent),d=Et(Rs,w.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,this.config.auth.OIDCOptions.serverResponseType,this.logger);return I(Zu,w.HandleResponseEar,this.logger,this.performanceClient,r)(s,d,le.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,o){var s,a,c,u;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(G.LOGOUT_START,V.Popup,e);const i=this.initializeServerTelemetryManager(le.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const d=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if((s=e.account)!=null&&s.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===ht.OIDC){if(this.browserStorage.removeAccount((a=e.account)==null?void 0:a.homeAccountId,this.correlationId),this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,V.Popup,e),o){const p={apiId:le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},y=Z.getAbsoluteUrl(o,an());await this.navigationClient.navigateInternal(y,p)}(c=n.popup)==null||c.close();return}}const h=d.getLogoutUri(e);this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,V.Popup,e);const f=this.openPopup(h,n);if(this.eventHandler.emitEvent(G.POPUP_OPENED,V.Popup,{popupWindow:f},null),await this.monitorPopupForHash(f,n.popupWindowParent).catch(()=>{}),o){const p={apiId:le.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},y=Z.getAbsoluteUrl(o,an());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${y}`),await this.navigationClient.navigateInternal(y,p)}else this.logger.verbose("No main window navigation requested")}catch(d){throw(u=n.popup)==null||u.close(),d instanceof ae&&(d.setCorrelationId(this.correlationId),i.cacheFailedRequest(d)),this.eventHandler.emitEvent(G.LOGOUT_FAILURE,V.Popup,null,d),this.eventHandler.emitEvent(G.LOGOUT_END,V.Popup),d}this.eventHandler.emitEvent(G.LOGOUT_END,V.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),U(ia)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(U(qo));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===Qs.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw U(jp);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),U(Lp)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){var p,y,T,R;const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(p=r.popupSize)==null?void 0:p.width,d=(y=r.popupSize)==null?void 0:y.height,h=(T=r.popupPosition)==null?void 0:T.top,f=(R=r.popupPosition)==null?void 0:R.left;return(!u||u<0||u>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=Ze.POPUP_WIDTH),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=Ze.POPUP_HEIGHT),(!h||h<0||h>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,c/2-Ze.POPUP_HEIGHT/2+s)),(!f||f<0||f>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,a/2-Ze.POPUP_WIDTH/2+i)),o.open(e,n,`width=${u}, height=${d}, top=${h}, left=${f}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${Ze.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${Ze.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.15.0 2025-07-08 */function kx(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class Ex extends Xr{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.nativeStorage=c}async acquireToken(e){const n=await I(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,V.Redirect);n.platformBroker=Yo(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(G.RESTORE_FROM_BFCACHE,V.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(Te.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ht.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(i){throw i instanceof ae&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}}async executeCodeFlow(e,n){const r=e.correlationId,o=this.initializeServerTelemetryManager(le.acquireTokenRedirect),i=await I(ca,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s={...e,codeChallenge:i.challenge};this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{const a=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=await I(Yu,w.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,n)}catch(a){throw a instanceof ae&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}}async executeEarFlow(e){const n=e.correlationId,r=await I(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await I(Bu,w.GenerateEarKey,this.logger,this.performanceClient,n)(),i={...e,earJwk:o};return this.browserStorage.cacheAuthorizeRequest(i),(await Ju(document,this.config,r,i,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(U(Du,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,o){const i=this.initializeServerTelemetryManager(le.handleRedirectPromise);try{const[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),kx()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(Te.ORIGIN_URI,!0)||x.EMPTY_STRING,u=Z.removeHashFromUrl(c),d=Z.removeHashFromUrl(window.location.href);if(u===d&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&_S(c),await this.handleResponse(s,n,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!Vu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Te.URL_HASH,a,!0);const h={apiId:le.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let f=!0;if(!c||c==="null"){const p=bS();this.browserStorage.setTemporaryCache(Te.ORIGIN_URI,p,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),f=await this.navigationClient.navigateInternal(p,h)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),f=await this.navigationClient.navigateInternal(c,h);if(!f)return await this.handleResponse(s,n,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(s,n,r,i);return null}catch(s){throw s instanceof ae&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===Qs.QUERY?n=window.location.search:n=window.location.hash);let r=ws(n);if(r){try{sx(r,this.browserCrypto,V.Redirect)}catch(i){return i instanceof ae&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return fy(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache(Te.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Te.URL_HASH)),o&&(r=ws(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,n,r,o){if(!e.state)throw U(Ou);if(e.ear_jwe){const a=await I(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return I(Zu,w.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,le.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const s=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n.authority});return I(Xu,w.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,le.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:le.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=n||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),U(ia)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(le.logout);try{this.eventHandler.emitEvent(G.LOGOUT_START,V.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:le.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===ht.OIDC)try{a.authority.endSessionEndpoint}catch{if((o=n.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=n.account)==null?void 0:i.homeAccountId,this.correlationId),this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,V.Redirect,n);return}}const c=a.getLogoutUri(n);if(this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,V.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Cn.SIGNOUT),await this.navigationClient.navigateExternal(c,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,Cn.SIGNOUT),await this.navigationClient.navigateExternal(c,s);return}}catch(s){throw s instanceof ae&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(G.LOGOUT_FAILURE,V.Redirect,null,s),this.eventHandler.emitEvent(G.LOGOUT_END,V.Redirect),s}this.eventHandler.emitEvent(G.LOGOUT_END,V.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Z.getAbsoluteUrl(n,an())}}/*! @azure/msal-browser v4.15.0 2025-07-08 */async function Ix(t,e,n,r,o){if(e.addQueueMeasurement(w.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),U(ia);return o?I(Nx,w.SilentHandlerLoadFrame,n,e,r)(t,o,e,r):Et(_x,w.SilentHandlerLoadFrameSync,n,e,r)(t)}async function Ax(t,e,n,r,o){const i=td();if(!i.contentDocument)throw"No document associated with iframe!";return(await Ju(i.contentDocument,t,e,n,r,o)).submit(),i}async function Jh(t,e,n,r,o,i,s){return r.addQueueMeasurement(w.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Yl&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Yl}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(d),c(U(Dp))},e),d=window.setInterval(()=>{let h="";const f=t.contentWindow;try{h=f?f.location.href:""}catch{}if(!h||h==="about:blank")return;let p="";f&&(s===Qs.QUERY?p=f.location.search:p=f.location.hash),window.clearTimeout(u),window.clearInterval(d),a(p)},n)}).finally(()=>{Et(Rx,w.RemoveHiddenIframe,o,r,i)(t)})}function Nx(t,e,n,r){return n.addQueueMeasurement(w.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=td();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=t,o(s)},e)})}function _x(t){const e=td();return e.src=t,e}function td(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function Rx(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.15.0 2025-07-08 */class bx extends Xr{constructor(e,n,r,o,i,s,a,c,u,d,h){super(e,n,r,o,i,s,c,d,h),this.apiId=a,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(w.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==Ve.NONE&&n.prompt!==Ve.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${Ve.NONE}`),n.prompt=Ve.NONE):n.prompt=Ve.NONE;const r=await I(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,V.Silent);return r.platformBroker=Yo(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),py(r.authority),this.config.auth.protocolMode===ht.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await I(this.createAuthCodeClient.bind(this),w.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await I(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(o){if(o instanceof ae&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!n||!(o instanceof ae)||o.errorCode!==Ze.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),await I(this.silentTokenHelper.bind(this),w.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await I(this.getDiscoveredAuthority.bind(this),w.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await I(Bu,w.GenerateEarKey,this.logger,this.performanceClient,n)(),i={...e,earJwk:o},s=await I(Ax,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,i,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await I(Jh,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),u=Et(Rs,w.DeserializeResponse,this.logger,this.performanceClient,n)(c,a,this.logger);return I(Zu,w.HandleResponseEar,this.logger,this.performanceClient,n)(i,u,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(U(sa))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(w.SilentIframeClientTokenHelper,r);const o=await I(ca,w.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i={...n,codeChallenge:o.challenge},s=await I(Yu,w.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient),a=await I(Ix,w.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(s,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,u=await I(Jh,w.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),d=Et(Rs,w.DeserializeResponse,this.logger,this.performanceClient,r)(u,c,this.logger);return I(Xu,w.HandleResponseCode,this.logger,this.performanceClient,r)(n,d,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Px extends Xr{async acquireToken(e){this.performanceClient.addQueueMeasurement(w.SilentRefreshClientAcquireToken,e.correlationId);const n=await I(Qu,w.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(le.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return I(i.acquireTokenByRefreshToken.bind(i),w.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(U(sa))}async createRefreshTokenClient(e){const n=await I(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new KT(n,this.performanceClient)}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Ox{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw U(aa);const o=e.correlationId||zt(),i=n.id_token?Qr(n.id_token,Ft):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Ue(Ue.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||zt()):void 0,c=await this.loadAccount(e,r.clientInfo||n.client_info||"",o,i,a),u=await this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,o),d=await this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,o),h=await this.loadRefreshToken(n,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:u,accessToken:d,refreshToken:h},i,a)}async loadAccount(e,n,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const u=qe.createFromAccountInfo(e.account);return await this.storage.setAccount(u,r),u}else if(!i||!n&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),U(Vp);const s=qe.generateHomeAccountId(n,i.authorityType,this.logger,this.cryptoObj,o),a=o==null?void 0:o.tid,c=Nu(this.storage,i,s,Ft,r,o,n,i.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r),c}async loadIdToken(e,n,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=Ys(n,r,e.id_token,this.config.auth.clientId,o);return await this.storage.setIdTokenCredential(s,i),s}async loadAccessToken(e,n,r,o,i,s,a){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Ee.fromString(n.scope):new Ee(e.scopes),u=s.expiresOn||n.expires_in+it(),d=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+it(),h=Js(r,o,n.access_token,this.config.auth.clientId,i,c.printScopes(),u,d,Ft);return await this.storage.setAccessTokenCredential(h,a),h}async loadRefreshToken(e,n,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=Fg(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,n,r,o){var d,h,f;let i="",s=[],a=null,c;n!=null&&n.accessToken&&(i=n.accessToken.secret,s=Ee.fromString(n.accessToken.target).asArray(),a=Or(n.accessToken.expiresOn),c=Or(n.accessToken.extendedExpiresOn));const u=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:u.getAccountInfo(),idToken:((d=n.idToken)==null?void 0:d.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((h=n.refreshToken)==null?void 0:h.familyId)||"",tokenType:((f=n==null?void 0:n.accessToken)==null?void 0:f.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Mx extends xp{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.15.0 2025-07-08 */class Lx extends Xr{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,c,u,d),this.apiId=a}async acquireToken(e){if(!e.code)throw U(Wp);const n=await I(this.initializeAuthorizationRequest.bind(this),w.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,V.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...n,code:e.code},i=await I(this.getClientConfiguration.bind(this),w.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),s=new Mx(i);this.logger.verbose("Auth code client created");const a=new Cy(s,this.browserStorage,o,this.logger,this.performanceClient);return await I(a.handleCodeResponseFromServer.bind(a),w.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(o){throw o instanceof ae&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(U(sa))}}/*! @azure/msal-browser v4.15.0 2025-07-08 */function jx(t,e,n){var s;const r=((s=window.msal)==null?void 0:s.clientIds)||[],o=r.length,i=r.filter(a=>a===t).length;i>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}/*! @azure/msal-browser v4.15.0 2025-07-08 */function Vt(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function _i(t,e){try{Wu(t)}catch(n){throw e.end({success:!1},n),n}}class ua{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new fn(this.logger,this.performanceClient):ys,this.eventHandler=new rx(this.logger),this.browserStorage=this.isBrowserEnvironment?new ec(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,LT(this.config.auth)):qS(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:_e.MemoryStorage,temporaryCacheLocation:_e.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new ec(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Ox(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new ua(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(G.INITIALIZE_END);return}const r=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(w.InitializeClientApplication,r);if(this.eventHandler.emitEvent(G.INITIALIZE_START),!n)try{this.logMultipleInstances(i)}catch{}if(await I(this.browserStorage.initialize.bind(this.browserStorage),w.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.platformAuthProvider=await Tx(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Et(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),w.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(G.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),gy(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var c;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(((c=this.browserStorage.getInteractionInProgress())==null?void 0:c.type)===Cn.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&this.platformAuthProvider&&!e;let s;this.eventHandler.emitEvent(G.HANDLE_REDIRECT_START,V.Redirect);let a;try{if(i&&this.platformAuthProvider){s=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,(o==null?void 0:o.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const u=new $i(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,le.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=I(u.handleRedirectPromise.bind(u),w.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{const[u,d]=this.browserStorage.getCachedRequest(),h=u.correlationId;s=this.performanceClient.startMeasurement(w.AcquireTokenRedirect,h),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const f=this.createRedirectClient(h);a=I(f.handleRedirectPromise.bind(f),w.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,u,d,s)}}catch(u){throw this.browserStorage.resetRequestCache(),u}return a.then(u=>(u?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(G.LOGIN_SUCCESS,V.Redirect,u),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,V.Redirect,u),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Vt(u.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(G.HANDLE_REDIRECT_END,V.Redirect),u)).catch(u=>{this.browserStorage.resetRequestCache();const d=u;throw r.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,V.Redirect,null,d):this.eventHandler.emitEvent(G.LOGIN_FAILURE,V.Redirect,null,d),this.eventHandler.emitEvent(G.HANDLE_REDIRECT_END,V.Redirect),s.end({success:!1},d),u})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(w.AcquireTokenPreRedirect,n);r.add({accountType:Vt(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{const a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{const s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}const i=this.getAllAccounts().length>0;try{Gh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Cn.SIGNIN),i?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,V.Redirect,e):this.eventHandler.emitEvent(G.LOGIN_START,V.Redirect,e);let s;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?s=new $i(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,le.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof Yt&&mr(c))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof It)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw c}):s=this.createRedirectClient(n).acquireToken(e),await s}catch(s){throw this.browserStorage.resetRequestCache(),r.end({success:!1},s),i?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,V.Redirect,null,s):this.eventHandler.emitEvent(G.LOGIN_FAILURE,V.Redirect,null,s),s}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(w.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:Vt(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),_i(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Cn.SIGNIN)}catch(a){return Promise.reject(a)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,V.Popup,e):this.eventHandler.emitEvent(G.LOGIN_START,V.Popup,e);let i;const s=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?i=this.acquireTokenNative({...e,correlationId:n},le.acquireTokenPopup).then(a=>(r.end({success:!0,isNativeBroker:!0,accountType:Vt(a.account)}),a)).catch(a=>{if(a instanceof Yt&&mr(a))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,s);if(a instanceof It)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,s);throw a}):i=this.createPopupClient(n).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(G.LOGIN_SUCCESS,V.Popup,a):this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,V.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Vt(a.account)}),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,V.Popup,null,a):this.eventHandler.emitEvent(G.LOGIN_FAILURE,V.Popup,null,a),r.end({success:!1},a),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,s;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(w.SsoSilent,n),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:Vt(e.account)}),_i(this.initialized,this.ssoSilentMeasurement),(s=this.ssoSilentMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(G.SSO_SILENT_START,V.Silent,r);let o;return this.canUsePlatformBroker(r)?o=this.acquireTokenNative(r,le.ssoSilent).catch(a=>{if(a instanceof Yt&&mr(a))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw a}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(a=>{var c;return this.eventHandler.emitEvent(G.SSO_SILENT_SUCCESS,V.Silent,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:Vt(a.account)}),a}).catch(a=>{var c;throw this.eventHandler.emitEvent(G.SSO_SILENT_FAILURE,V.Silent,null,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(w.AcquireTokenByCode,n);_i(this.initialized,r),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_START,V.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw U(Qp);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(s=>(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_SUCCESS,V.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Vt(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_FAILURE,V.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:n},le.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof Yt&&mr(i)&&(this.platformAuthProvider=void 0),i});return r.end({accountType:Vt(o.account),success:!0}),o}else throw U(Yp);else throw U(qp)}catch(o){throw this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_FAILURE,V.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(w.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenFromCache,e.correlationId),n){case $e.Default:case $e.AccessToken:case $e.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return I(r.acquireToken.bind(r),w.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw b(On)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(w.AcquireTokenByRefreshToken,e.correlationId),n){case $e.Default:case $e.AccessTokenAndRefreshToken:case $e.RefreshToken:case $e.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return I(r.acquireToken.bind(r),w.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw b(On)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(w.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return I(n.acquireToken.bind(n),w.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return Gh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Cn.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return Wu(this.initialized),this.browserStorage.setInteractionInProgress(!0,Cn.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return QS(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return YS(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return JS(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return XS(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return ZS(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();ex(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return tx(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=qe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,o){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw U(ju);return new $i(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Yo(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Ve.NONE:case Ve.CONSENT:case Ve.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new xx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Ex(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new bx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,le.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Sy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new Px(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new Lx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,le.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return my(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==_e.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==_e.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?zt():x.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||zh})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||zh})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(w.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),_i(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const o=e.account||this.getActiveAccount();if(!o)throw U(zp);return r.add({accountType:Vt(o)}),this.acquireTokenSilentDeduped(e,o,n).then(i=>(r.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length}),{...i,state:e.state,correlationId:n})).catch(i=>{throw i instanceof ae&&i.setCorrelationId(n),r.end({success:!1},i),i})}async acquireTokenSilentDeduped(e,n,r){const o=na(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},n.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const a=I(this.acquireTokenSilentAsync.bind(this),w.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(w.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,V.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await I(ox,w.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||$e.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(Dx(a,i))if(this.activeIframeRequest)if(i!==$e.Skip){const[u,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,o.correlationId);const h=this.performanceClient.startMeasurement(w.AwaitConcurrentIframe,o.correlationId);h.add({awaitIframeCorrelationId:d});const f=await u;if(h.end({success:f}),f)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),I(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let u;return this.activeIframeRequest=[new Promise(d=>{u=d}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),I(this.acquireTokenBySilentIframe.bind(this),w.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(d=>(u(!0),d)).catch(d=>{throw u(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,V.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,V.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return Yo(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,le.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw r instanceof Yt&&mr(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,b(On)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===$e.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),I(this.acquireTokenFromCache.bind(this),w.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===$e.AccessToken)throw r;return this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_NETWORK_START,V.Silent,e),I(this.acquireTokenByRefreshToken.bind(this),w.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await I(ca,w.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),jx(n,e,this.logger)}}function Dx(t,e){const n=!(t instanceof It&&t.subError!==oa),r=t.errorCode===Ze.INVALID_GRANT_ERROR||t.errorCode===On,o=n&&r||t.errorCode===Es||t.errorCode===Iu,i=cS.includes(e);return o&&i}/*! @azure/msal-browser v4.15.0 2025-07-08 */async function Ux(t,e){const n=new ar(t);return await n.initialize(),ua.createController(n,e)}/*! @azure/msal-browser v4.15.0 2025-07-08 */class nd{static async createPublicClientApplication(e){const n=await Ux(e);return new nd(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new ua(new ar(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}const Xh=()=>{if(typeof window<"u"){const t=window.location.origin;return t.includes("vercel.app")?t:t.includes("localhost")?"http://localhost:3001":t}return"http://localhost:3001"},Fx={auth:{clientId:"00e12b85-ed46-4ec3-9d7f-37c4a96db9fe",authority:"https://login.microsoftonline.com/fdf1c801-253a-4326-a168-f17b3f3c5fc9",redirectUri:Xh(),postLogoutRedirectUri:Xh()},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0,secureCookies:window.location.protocol==="https:"},system:{loggerOptions:{loggerCallback:(t,e,n)=>{if(!n)switch(t){case se.Error:console.error(e);break;case se.Info:console.info(e);break;case se.Verbose:console.debug(e);break;case se.Warning:console.warn(e);break}}}}},Zh={scopes:["User.Read","Sites.Read.All","Sites.ReadWrite.All"]},Ka={scopes:["https://cristyspizza.sharepoint.com/.default"]},Ae={siteUrl:"https://cristyspizza.sharepoint.com/sites/managers",listNames:{stores:"TempTracker_Stores",equipment:"TempTracker_Equipment",temperatureLogs:"TempTracker_TemperatureLogs",images:"TempTracker_EquipmentImages"},apiEndpoints:{base:"https://cristyspizza.sharepoint.com/sites/managers/_api",web:"https://cristyspizza.sharepoint.com/sites/managers/_api/web",lists:"https://cristyspizza.sharepoint.com/sites/managers/_api/web/lists"}};class Ey{constructor(){ha(this,"accessToken",null);ha(this,"baseUrl");this.baseUrl=Ae.apiEndpoints.base}setAccessToken(e){this.accessToken=e}async makeRequest(e,n="GET",r,o=0){if(!this.accessToken)throw new Error("Authentication required. Please sign in to continue.");const i={Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"};if(n!=="GET"){const a=await this.getRequestDigest();i["X-RequestDigest"]=a,n==="PATCH"&&(i["IF-MATCH"]="*",i["X-HTTP-Method"]="MERGE")}const s={method:n,headers:i,body:r?JSON.stringify(r):void 0};try{const a=await fetch(`${this.baseUrl}${e}`,s);if(!a.ok){const u=await a.text();if(a.status===401)throw new Error("Authentication expired. Please sign in again.");if(a.status===403)throw new Error("Access denied. You don't have permission to perform this action.");if(a.status===404)throw new Error("SharePoint resource not found. Please check your configuration.");if(a.status>=500){if(o<2)return console.log(`Server error (${a.status}), retrying... Attempt ${o+1}`),await new Promise(d=>setTimeout(d,1e3*(o+1))),this.makeRequest(e,n,r,o+1);throw new Error("SharePoint server is temporarily unavailable. Please try again later.")}else throw a.status===429?new Error("Too many requests. Please wait a moment and try again."):new Error(`SharePoint operation failed: ${a.status} - ${u}`)}if(n==="DELETE"||a.status===204)return{};const c=a.headers.get("content-type");return c&&c.includes("application/json")?await a.json():{}}catch(a){throw a instanceof TypeError&&a.message.includes("fetch")?new Error("Network connection failed. Please check your internet connection and try again."):a}}async getRequestDigest(){try{const e=await fetch(`${Ae.apiEndpoints.base}/contextinfo`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose"}});if(!e.ok)throw e.status===401?new Error("Authentication expired. Please sign in again."):new Error("Unable to authenticate with SharePoint. Please try again.");return(await e.json()).d.GetContextWebInformation.FormDigestValue}catch(e){throw e instanceof TypeError&&e.message.includes("fetch")?new Error("Network connection failed. Please check your internet connection."):e}}async getStores(){var e,n,r;try{const o=`/web/lists/getbytitle('${Ae.listNames.stores}')/items?$select=*`;console.log("Fetching stores from SharePoint...");const i=await this.makeRequest(o);console.log("SharePoint stores response:",i),console.log("SharePoint stores response.d:",i.d),console.log("SharePoint stores response.d.results:",(e=i.d)==null?void 0:e.results);const s=(((n=i.d)==null?void 0:n.results)||((r=i.d)==null?void 0:r.value)||[]).map(this.transformStoreItem);return console.log("Transformed stores:",s),s}catch(o){return console.warn("Stores list not found or accessible:",o),[]}}async createStore(e){const n=`/web/lists/getbytitle('${Ae.listNames.stores}')/items`,r={Title:e.name,StoreId:e.id,Address:e.address,Phone:e.phone,IsActive:e.isActive},o=await this.makeRequest(n,"POST",r);return this.transformStoreItem(o.d)}async updateStore(e,n){const r=`/web/lists/getbytitle('${Ae.listNames.stores}')/items(${e})`,o={Title:n.name,StoreId:n.id,Address:n.address,Phone:n.phone,IsActive:n.isActive};return await this.makeRequest(r,"PATCH",o),{...n,sharePointId:e}}async deleteStore(e){const n=`/web/lists/getbytitle('${Ae.listNames.stores}')/items(${e})`;await this.makeRequest(n,"DELETE")}async getEquipment(){var e,n;try{const r=`/web/lists/getbytitle('${Ae.listNames.equipment}')/items?$select=*`,o=await this.makeRequest(r);return(((e=o.d)==null?void 0:e.results)||((n=o.d)==null?void 0:n.value)||[]).map(this.transformEquipmentItem)}catch(r){return console.warn("Equipment list error:",r),[]}}async createEquipment(e){console.log("SharePoint createEquipment called with:",e);const n=`/web/lists/getbytitle('${Ae.listNames.equipment}')/items`,r={__metadata:{type:"SP.Data.TempTracker_x005f_EquipmentListItem"},Title:e.name,EquipmentType:e.type,Category:e.category,Location:e.location,StoreId:e.storeId,StoreName:e.storeName,MinTemp:e.minTemp,MaxTemp:e.maxTemp,ImageUrl:e.imageUrl||null,Notes:e.notes,CurrentTemp:e.currentTemp,Status:e.status,LastCheck:e.lastCheck&&e.lastCheck!=="Temperature not logged"&&e.lastCheck!=="Never"&&!isNaN(new Date(e.lastCheck).getTime())?new Date(e.lastCheck).toISOString():null,IsActive:e.isActive,LocalId:e.id};console.log("SharePoint request body:",r),console.log("SharePoint endpoint:",`${this.baseUrl}${n}`);try{const o=await this.makeRequest(n,"POST",r);return console.log("SharePoint response:",o),this.transformEquipmentItem(o.d)}catch(o){throw console.error("SharePoint createEquipment error:",o),o}}async updateEquipment(e,n){const r=`/web/lists/getbytitle('${Ae.listNames.equipment}')/items(${e})`,o={__metadata:{type:"SP.Data.TempTracker_x005f_EquipmentListItem"},Title:n.name,EquipmentType:n.type,Category:n.category,Location:n.location,StoreId:n.storeId,StoreName:n.storeName,MinTemp:n.minTemp,MaxTemp:n.maxTemp,ImageUrl:n.imageUrl||null,Notes:n.notes,CurrentTemp:n.currentTemp,Status:n.status,LastCheck:n.lastCheck&&n.lastCheck!=="Temperature not logged"&&n.lastCheck!=="Never"&&!isNaN(new Date(n.lastCheck).getTime())?new Date(n.lastCheck).toISOString():null,IsActive:n.isActive,LocalId:n.id};return await this.makeRequest(r,"PATCH",o),{...n,sharePointId:e}}async deleteEquipment(e){const n=`/web/lists/getbytitle('${Ae.listNames.equipment}')/items(${e})`;try{const r={Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","IF-MATCH":"*"},o=await fetch(`${this.baseUrl}${n}`,{method:"DELETE",headers:r});if(!o.ok){const i=await o.text();throw new Error(`SharePoint API error: ${o.status} - ${i}`)}}catch(r){throw console.error("Delete equipment error:",r),r}}async getTemperatureLogs(e){var n,r;try{let o=`/web/lists/getbytitle('${Ae.listNames.temperatureLogs}')/items?$select=*&$orderby=Created desc`;e&&(o+=`&$top=${e}`);const i=await this.makeRequest(o);return(((n=i.d)==null?void 0:n.results)||((r=i.d)==null?void 0:r.value)||[]).map(this.transformTemperatureLogItem)}catch(o){return console.warn("Temperature logs list error:",o),[]}}async createTemperatureLog(e){console.log("SharePoint createTemperatureLog called with:",e);const n=`/web/lists/getbytitle('${Ae.listNames.temperatureLogs}')/items`,r={__metadata:{type:"SP.Data.TempTracker_x005f_TemperatureLogsListItem"},Title:`${e.equipmentName} - ${new Date(e.timestamp).toLocaleDateString()}`,EquipmentId:e.equipmentId,EquipmentName:e.equipmentName,Temperature:e.temperature,Status:e.status,StoreId:e.storeId,StoreName:e.storeName,Notes:e.notes||""};console.log("SharePoint temperature log request body:",r);try{const o=await this.makeRequest(n,"POST",r);return console.log("SharePoint temperature log response:",o),this.transformTemperatureLogItem(o.d)}catch(o){throw console.error("SharePoint createTemperatureLog error:",o),o}}async updateTemperatureLog(e,n){console.log("SharePoint updateTemperatureLog called with:",{sharePointId:e,log:n});const r=`/web/lists/getbytitle('${Ae.listNames.temperatureLogs}')/items(${e})`,o={__metadata:{type:"SP.Data.TempTracker_x005f_TemperatureLogsListItem"},Title:`${n.equipmentName} - ${new Date(n.timestamp).toLocaleDateString()}`,EquipmentId:n.equipmentId,EquipmentName:n.equipmentName,Temperature:n.temperature,Status:n.status,StoreId:n.storeId,StoreName:n.storeName,Notes:n.notes||""};console.log("SharePoint temperature log update request body:",o);try{return await this.makeRequest(r,"PATCH",o),console.log("SharePoint temperature log updated successfully"),{...n,sharePointId:e}}catch(i){throw console.error("SharePoint updateTemperatureLog error:",i),i}}async deleteTemperatureLog(e){const n=`/web/lists/getbytitle('${Ae.listNames.temperatureLogs}')/items(${e})`;try{const r={Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","IF-MATCH":"*"},o=await fetch(`${this.baseUrl}${n}`,{method:"DELETE",headers:r});if(!o.ok){const i=await o.text();throw new Error(`SharePoint API error: ${o.status} - ${i}`)}}catch(r){throw console.error("Delete temperature log error:",r),r}}async uploadEquipmentImage(e,n,r,o,i,s="Main"){var u;console.log("SharePoint uploadEquipmentImage called with:",{fileName:e.name,fileSize:e.size,equipmentId:n,equipmentName:r,storeId:o,storeName:i,imageType:s});const a=new Date().toISOString().replace(/[:.]/g,"-"),c=`Equipment_${n}_${s}_${a}.${e.name.split(".").pop()}`;try{const d=`/web/lists/getbytitle('${Ae.listNames.images}')/RootFolder/Files/Add(url='${c}',overwrite=true)`;console.log("Upload endpoint:",d),console.log("Generated filename:",c);const h={Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","Content-Type":"application/octet-stream"};console.log("Getting request digest...");const f=await this.getRequestDigest();h["X-RequestDigest"]=f,console.log("Request digest obtained"),console.log("Converting file to array buffer...");const p=await e.arrayBuffer();console.log("File buffer size:",p.byteLength),console.log("Uploading file to SharePoint...");const y=await fetch(`${this.baseUrl}${d}`,{method:"POST",headers:h,body:p});if(console.log("Upload response status:",y.status),!y.ok){const m=await y.text();throw console.error("Upload failed with error:",m),new Error(`File upload failed: ${y.status} - ${m}`)}const T=await y.json();console.log("File uploaded successfully:",T);const R=T.d.ServerRelativeUrl,v=`/web/GetFileByServerRelativeUrl('${R}')/ListItemAllFields`,g={__metadata:{type:"SP.Data.TempTracker_x005f_EquipmentImagesItem"},Title:`${r} - ${s}`};console.log("Updating file metadata (basic):",g);try{await this.makeRequest(v,"PATCH",g),console.log("Basic metadata updated successfully")}catch(m){console.warn("Metadata update failed, but file upload succeeded:",m)}return{sharePointId:(u=T.d.ListItemAllFields)==null?void 0:u.Id,fileName:c,fileUrl:`${Ae.siteUrl}${R}`.replace("/sites/managers/sites/managers","/sites/managers"),serverRelativeUrl:R,equipmentId:n,equipmentName:r,storeId:o,storeName:i,imageType:s,uploadDate:new Date().toISOString(),isActive:!0}}catch(d){throw console.error("SharePoint uploadEquipmentImage error:",d),d}}async deleteEquipmentImage(e,n){if(console.log("SharePoint deleteEquipmentImage called with:",{imageUrl:e,equipmentId:n}),!e||!e.includes("/sites/managers/")){console.log("No valid SharePoint image URL to delete:",e);return}try{const r=e.replace("https://cristyspizza.sharepoint.com","");console.log("Deleting file at server relative URL:",r);const o=await this.getRequestDigest(),i={Authorization:`Bearer ${this.accessToken}`,Accept:"application/json;odata=verbose","X-RequestDigest":o,"X-HTTP-Method":"DELETE","IF-MATCH":"*"},s=`https://cristyspizza.sharepoint.com/sites/managers/_api/web/GetFileByServerRelativeUrl('${encodeURIComponent(r)}')`;console.log("Full delete URL:",s);const a=await fetch(s,{method:"POST",headers:i});if(!a.ok){const c=await a.text();throw console.error("Delete image failed with response:",a.status,c),new Error(`Delete image failed: ${a.status} - ${c}`)}console.log("Image file deleted successfully from SharePoint")}catch(r){console.error("SharePoint deleteEquipmentImage error:",r),console.warn("Failed to delete image from SharePoint, but continuing with equipment update")}}async getEquipmentImages(e){console.log("SharePoint getEquipmentImages called with:",{equipmentId:e});let n=`/web/lists/getbytitle('${Ae.listNames.images}')/items?$select=*,File/ServerRelativeUrl,FileLeafRef&$expand=File`;e&&(n+=`&$filter=EquipmentId eq ${e}`);try{const o=(await this.makeRequest(n)).d.results.map(i=>this.transformImageItem.bind(this)(i));return console.log("SharePoint images transformed:",o),o}catch(r){throw console.error("SharePoint getEquipmentImages error:",r),r}}transformStoreItem(e){return{sharePointId:e.Id,id:e.StoreId||e.Id,name:e.Title,address:e.Address||"",phone:e.Phone||"",isActive:e.IsActive!==!1,created:e.Created,modified:e.Modified}}transformEquipmentItem(e){var n;return{sharePointId:e.Id,id:e.LocalId||e.Id,name:e.Title,type:e.EquipmentType||"Other",category:e.Category||"Other",location:e.Location||"",storeId:e.StoreId||1,storeName:e.StoreName||"",minTemp:e.MinTemp||32,maxTemp:e.MaxTemp||40,image:((n=e.ImageUrl)==null?void 0:n.Url)||"",notes:e.Notes||"",currentTemp:e.CurrentTemp,status:e.Status||"Normal",lastCheck:e.LastCheck||"Temperature not logged",isActive:e.IsActive!==!1,created:e.Created,modified:e.Modified}}transformTemperatureLogItem(e){var n;return{sharePointId:e.Id,id:e.LocalId||e.Id,equipmentId:e.EquipmentId,equipmentName:e.EquipmentName||"",temperature:e.Temperature,status:e.Status||"Normal",storeId:e.StoreId||1,storeName:e.StoreName||"",notes:e.Notes||"",timestamp:e.Created,loggedBy:((n=e.Author)==null?void 0:n.Title)||e.AuthorId||"Unknown User"}}transformImageItem(e){var s;const n=((s=e.File)==null?void 0:s.ServerRelativeUrl)||e.FileRef||"",r=e.FileLeafRef||e.Title||"";let o=null,i="Main";if(r&&r.startsWith("Equipment_")){const a=r.split("_");a.length>=3&&(o=parseInt(a[1]),i=a[2])}return{sharePointId:e.Id,id:e.Id,fileName:r,fileUrl:n?`${Ae.siteUrl}${n}`.replace("/sites/managers/sites/managers","/sites/managers"):"",serverRelativeUrl:n,equipmentId:o||e.EquipmentId,equipmentName:e.EquipmentName||"",storeId:e.StoreId,storeName:e.StoreName||"",imageType:i,uploadDate:e.UploadDate||e.Created,isActive:e.IsActive!==!1,notes:e.Notes||"",created:e.Created,modified:e.Modified}}async syncToSharePoint(e){console.log("Syncing to SharePoint:",e)}async syncFromSharePoint(){try{const[e,n,r,o]=await Promise.all([this.getStores().catch(()=>[]),this.getEquipment().catch(()=>[]),this.getTemperatureLogs(100).catch(()=>[]),this.getEquipmentImages().catch(()=>[])]);console.log("Mapping images to equipment..."),console.log("Equipment from SharePoint:",n.map(s=>({id:s.id,name:s.name,currentImageUrl:s.imageUrl}))),console.log("Images from SharePoint:",o.map(s=>({equipmentId:s.equipmentId,fileUrl:s.fileUrl,imageType:s.imageType})));const i=n.map(s=>{const a=o.filter(h=>h.equipmentId===s.id),c=a.filter(h=>h.imageType==="Main").sort((h,f)=>new Date(f.uploadDate||f.created).getTime()-new Date(h.uploadDate||h.created).getTime()),u=c[0];console.log(`Equipment ${s.id} (${s.name}):`,{equipmentImages:a.length,mainImages:c.length,mainImage:u?u.fileUrl:"none",mainImageDate:u?u.uploadDate||u.created:"none",originalImageUrl:s.imageUrl});const d={...s,imageUrl:(u==null?void 0:u.fileUrl)||"",images:a};return delete d.image,d});return console.log("Final equipment with images:",i.map(s=>({id:s.id,name:s.name,finalImageUrl:s.imageUrl}))),{stores:e,equipment:i,temperatureLogs:r,images:o,lastSync:new Date().toISOString()}}catch(e){return console.error("Failed to sync from SharePoint:",e),{stores:[],equipment:[],temperatureLogs:[],images:[],lastSync:new Date().toISOString()}}}}const lt=new Ey,ef=Object.freeze(Object.defineProperty({__proto__:null,SharePointService:Ey,sharePointService:lt},Symbol.toStringTag,{value:"Module"})),Rt=new nd(Fx),Hx=()=>{const[t,e]=A.useState({isAuthenticated:!1,user:null,loading:!0,error:null}),[n,r]=A.useState(null);A.useEffect(()=>{(async()=>{try{await Rt.initialize();const p=await Rt.handleRedirectPromise();if(p&&p.account){e({isAuthenticated:!0,user:p.account,loading:!1,error:null}),await o(p.account);return}const y=Rt.getAllAccounts();if(y.length>0){const T=y[0];e({isAuthenticated:!0,user:T,loading:!1,error:null}),await o(T)}else e(T=>({...T,loading:!1}))}catch(p){console.error("MSAL initialization error:",p),e({isAuthenticated:!1,user:null,loading:!1,error:"Failed to initialize authentication"})}})()},[]);const o=async f=>{try{const p={...Ka,account:f},y=await Rt.acquireTokenSilent(p);return r(y.accessToken),lt.setAccessToken(y.accessToken),y.accessToken}catch(p){if(console.error("Silent token acquisition failed:",p),p instanceof It)return await i();throw p}},i=async()=>{try{let f;if(s()){await Rt.acquireTokenRedirect(Ka);return}else f=await Rt.acquireTokenPopup(Ka);if(f)return r(f.accessToken),lt.setAccessToken(f.accessToken),f.accessToken}catch(f){throw console.error("Interactive token acquisition failed:",f),f}},s=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=async()=>{e(f=>({...f,loading:!0,error:null}));try{let f;if(s()){await Rt.loginRedirect(Zh);return}else f=await Rt.loginPopup(Zh);if(f)return e({isAuthenticated:!0,user:f.account,loading:!1,error:null}),await o(f.account),f.account}catch(f){throw console.error("Login error:",f),e({isAuthenticated:!1,user:null,loading:!1,error:f instanceof Error?f.message:"Login failed"}),f}},c=async()=>{e(f=>({...f,loading:!0}));try{s()?await Rt.logoutRedirect():await Rt.logoutPopup(),r(null),lt.setAccessToken(""),e({isAuthenticated:!1,user:null,loading:!1,error:null})}catch(f){console.error("Logout error:",f),e(p=>({...p,loading:!1,error:f instanceof Error?f.message:"Logout failed"}))}},u=async()=>{if(!t.user)throw new Error("User not authenticated");try{return await o(t.user)||null}catch(f){throw console.error("Failed to get access token:",f),f}};return{...t,accessToken:n,login:a,logout:c,getAccessToken:u,hasPermissions:async()=>{try{return n||await u(),(await fetch("https://cristyspizza.sharepoint.com/sites/managers/_api/web",{headers:{Authorization:`Bearer ${n}`,Accept:"application/json;odata=verbose"}})).ok}catch(f){return console.error("Permission check failed:",f),!1}},clearAuthCache:async()=>{try{await Rt.clearCache(),localStorage.removeItem("temptracker-settings"),Object.keys(localStorage).filter(p=>p.includes("msal")||p.includes("auth")||p.includes("token")).forEach(p=>localStorage.removeItem(p)),e({isAuthenticated:!1,user:null,loading:!1,error:null}),r(null),console.log("Authentication cache cleared")}catch(f){console.error("Failed to clear auth cache:",f)}}}},Iy=A.createContext(void 0),zx=({children:t})=>{const e=Hx();return l.jsx(Iy.Provider,{value:e,children:t})},rd=()=>{const t=A.useContext(Iy);if(t===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return t},Bx=(t,e,n)=>t>=e&&t<=n?"Normal":t<e-2||t>n+2?"Critical":t===e-2||t===e-1||t===n+1||t===n+2?"Warning":"Normal",$x=t=>{const{isAuthenticated:e,accessToken:n}=rd(),[r,o]=A.useState([]),i=A.useCallback(k=>{o(k)},[]),[s,a]=A.useState([]),[c,u]=A.useState([]),[d,h]=A.useState([]),[f,p]=A.useState({isOnline:navigator.onLine,lastSync:localStorage.getItem("temptracker-last-sync"),isSyncing:!1,error:null,queueSize:0,lastOperation:null});A.useEffect(()=>{const k=()=>p($=>({...$,isOnline:!0})),B=()=>p($=>({...$,isOnline:!1}));return window.addEventListener("online",k),window.addEventListener("offline",B),()=>{window.removeEventListener("online",k),window.removeEventListener("offline",B)}},[]),A.useEffect(()=>{console.log(` Store changed to: ${t} - clearing data and loading localStorage`),i([]),a([]),y()},[t]),A.useEffect(()=>{if(e&&f.isOnline&&n&&t){console.log(` Auto-triggering SharePoint sync for store ${t}`);const k=setTimeout(()=>{g()},1e3);return()=>clearTimeout(k)}},[t,e,f.isOnline,n]),A.useEffect(()=>{if(e&&f.isOnline&&n&&d.length>0&&!f.isSyncing){const k=setTimeout(()=>{v()},500);return()=>clearTimeout(k)}},[e,f.isOnline,!!n,d.length,f.isSyncing]),A.useEffect(()=>{p(k=>({...k,queueSize:d.length}))},[d.length]);const y=A.useCallback(()=>{const k=localStorage.getItem(`temptracker-equipment-store-${t}`),B=localStorage.getItem(`temptracker-logs-store-${t}`),$=localStorage.getItem("temptracker-stores");if(k){const E=JSON.parse(k);console.log(` loadLocalData: Found ${E.length} equipment items in localStorage for store ${t}`),console.log(" Equipment details:",E.map(_=>`${_.id}-${_.name}(store:${_.storeId})`));const O=E.filter(_=>_.storeId===t);console.log(` After store filtering: ${O.length} equipment items belong to store ${t}`);const K=O.map(_=>{const F={..._};return delete F.image,delete F.imageFile,delete F.imageType,F});i(K),O.length!==E.length&&(console.log(` Cleaning localStorage: Removed ${E.length-O.length} contaminated equipment items`),setTimeout(()=>T(K),100))}else console.log(` loadLocalData: No equipment found in localStorage for store ${t}`),i([]);if(B){const E=JSON.parse(B);console.log(` loadLocalData: Found ${E.length} temperature logs in localStorage for store ${t}`);const O=E.filter(K=>K.storeId===t);console.log(` After store filtering: ${O.length} logs belong to store ${t}`),a(O),O.length!==E.length&&(console.log(` Cleaning localStorage: Removed ${E.length-O.length} contaminated log items`),setTimeout(()=>T(void 0,O),100))}else console.log(` loadLocalData: No temperature logs found in localStorage for store ${t}`),a([]);if($){const E=JSON.parse($);if(E.length===0){const O=[{id:1,name:"Downtown Location",isActive:!0},{id:2,name:"Main Street",isActive:!0},{id:3,name:"Mall Location",isActive:!0}];u(O),localStorage.setItem("temptracker-stores",JSON.stringify(O))}else u(E)}else{const E=[{id:1,name:"Downtown Location",isActive:!0},{id:2,name:"Main Street",isActive:!0},{id:3,name:"Mall Location",isActive:!0}];u(E),localStorage.setItem("temptracker-stores",JSON.stringify(E))}},[t]),T=A.useCallback((k,B,$)=>{try{if(k){const E=k.map(O=>{const K={...O};return delete K.image,delete K.imageFile,delete K.imageType,K});localStorage.setItem(`temptracker-equipment-store-${t}`,JSON.stringify(E))}if(B){const E=B.slice(-100);localStorage.setItem(`temptracker-logs-store-${t}`,JSON.stringify(E))}$&&localStorage.setItem("temptracker-stores",JSON.stringify($))}catch(E){console.warn("LocalStorage quota exceeded, clearing old data:",E);try{if(Object.keys(localStorage).forEach(K=>{K.startsWith("temptracker-logs-store-")&&K!==`temptracker-logs-store-${t}`&&localStorage.removeItem(K)}),k&&localStorage.setItem(`temptracker-equipment-store-${t}`,JSON.stringify(k)),B){const K=B.slice(-50);localStorage.setItem(`temptracker-logs-store-${t}`,JSON.stringify(K))}$&&localStorage.setItem("temptracker-stores",JSON.stringify($))}catch(O){console.error("Failed to save to localStorage even after cleanup:",O)}}},[t]),R=A.useCallback(k=>{const B={...k,id:`${k.type}-${k.entity}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retryCount:0};h($=>[...$,B]),p($=>({...$,lastOperation:`${k.type} ${k.entity}`}))},[]),v=A.useCallback(async()=>{if(!(d.length===0||f.isSyncing)){p(k=>({...k,isSyncing:!0,error:null}));try{const k=d[0];let B=!1;try{if(k.entity==="equipment")if(k.type==="create"){const $=await lt.createEquipment(k.data);i(E=>{const O=E.findIndex(_=>_.id===k.data.id);if(O===-1)return console.error("Equipment not found for SharePoint ID update:",k.data.id),E;const K=[...E.slice(0,O),{...E[O],sharePointId:$.sharePointId},...E.slice(O+1)];return setTimeout(()=>T(K),10),K}),B=!0}else k.type==="update"&&k.data.sharePointId?(await lt.updateEquipment(k.data.sharePointId,k.data),B=!0):k.type==="delete"&&k.data.sharePointId&&(await lt.deleteEquipment(k.data.sharePointId),B=!0);else if(k.entity==="temperatureLog")if(k.type==="create"){const $=await lt.createTemperatureLog(k.data);a(E=>{const O=E.findIndex(_=>_.id===k.data.id);if(O===-1)return console.error("Log not found for SharePoint ID update:",k.data.id),E;const K=[...E.slice(0,O),{...E[O],sharePointId:$.sharePointId},...E.slice(O+1)];return setTimeout(()=>T(void 0,K),10),K}),B=!0}else k.type==="update"&&k.data.sharePointId?(await lt.updateTemperatureLog(k.data.sharePointId,k.data),B=!0):k.type==="delete"&&k.data.sharePointId&&(await lt.deleteTemperatureLog(k.data.sharePointId),B=!0);h(B?$=>$.filter(E=>E.id!==k.id):$=>$.filter(E=>E.id!==k.id))}catch($){if(console.error("Sync operation failed:",k.id,$),k.retryCount<3){const E={...k,retryCount:k.retryCount+1};h(O=>O.map(K=>K.id===k.id?E:K))}else h(E=>E.filter(O=>O.id!==k.id)),p(E=>({...E,error:`Failed to sync ${k.type} ${k.entity}: ${$ instanceof Error?$.message:"Unknown error"}`}))}}catch(k){console.error("Queue processing failed:",k),p(B=>({...B,error:k instanceof Error?k.message:"Queue processing failed"}))}finally{p(k=>({...k,isSyncing:!1}))}}},[d,f.isSyncing]),g=A.useCallback(async()=>{if(!(!e||!n)){p(k=>({...k,isSyncing:!0,error:null}));try{const k=await lt.syncFromSharePoint(),B=k.equipment.filter(j=>j.storeId===t),$=k.temperatureLogs.filter(j=>j.storeId===t);console.log(` syncFromSharePoint: Store ${t} - SharePoint has ${B.length} equipment, ${$.length} logs`);const E=d,O=E.filter(j=>j.entity==="equipment"&&j.type==="create").map(j=>j.data.id),K=E.filter(j=>j.entity==="temperatureLog"&&j.type==="create").map(j=>j.data.id);let _=[],F=[];i(j=>{console.log(` syncFromSharePoint merge: Current local equipment count: ${j.length}, SharePoint equipment count: ${B.length}`),console.log(" Current equipment store IDs:",j.map(q=>`${q.id}(store:${q.storeId})`)),console.log(" SharePoint equipment store IDs:",B.map(q=>`${q.id}(store:${q.storeId})`)),j.forEach(q=>{const Bt=B.find(st=>st.id===q.id);Bt&&q.imageUrl!==Bt.imageUrl&&(console.log(` IMAGE CONFLICT for equipment ${q.id}:`),console.log(`   Local imageUrl: "${q.imageUrl}"`),console.log(`   SharePoint imageUrl: "${Bt.imageUrl}"`),console.log("   SharePoint will override local!"))});const X=j.filter(q=>!q.sharePointId||O.includes(q.id));return _=[...B,...X],console.log(` Final merged equipment count: ${_.length} for store ${t}`),_}),a(j=>{const X=j.filter(q=>!q.sharePointId||K.includes(q.id));return F=[...$,...X],F}),setTimeout(()=>T(_,F),0),k.stores&&k.stores.length>0&&(u(k.stores),setTimeout(()=>T(_,F,k.stores),0)),p(j=>({...j,isSyncing:!1,lastSync:new Date().toISOString(),error:null})),localStorage.setItem("temptracker-last-sync",new Date().toISOString())}catch(k){console.error("Sync from SharePoint failed:",k),p(B=>({...B,isSyncing:!1,error:k instanceof Error?k.message:"Sync failed"}))}}},[e,n,t]),m=A.useCallback(async k=>{if(!e||!n||!f.isOnline)return!1;try{return await lt.syncToSharePoint(k),!0}catch(B){return console.error("Sync to SharePoint failed:",B),!1}},[e,n,f.isOnline]),C=A.useCallback(async k=>{var B;try{const $={...k,id:Date.now()+Math.floor(Math.random()*1e3),storeId:t,storeName:((B=c.find(E=>E.id===t))==null?void 0:B.name)||"Unknown Store",isActive:!0};return i(E=>{const O=[...E,$];return setTimeout(()=>T(O),0),O}),e&&f.isOnline&&R({type:"create",entity:"equipment",data:$}),$}catch($){throw console.error("Error in addEquipment:",$),$}},[t,c,e,f.isOnline,R]),N=A.useCallback(async(k,B)=>{const $=B.imageUrl==="";let E;if($){const F=r.find(j=>j.id===k);E=F==null?void 0:F.imageUrl,console.log(" Image deletion detected for equipment:",k,"old URL:",E)}const O={...B};delete O.image,delete O.imageFile,delete O.imageType;let K=[];if(i(F=>{const j=F.map(X=>X.id===k?{...X,...O}:X);return T(j),K=j,j}),$&&E&&e&&f.isOnline)try{console.log(" Deleting old image from SharePoint:",E),await lt.deleteEquipmentImage(E,k),console.log(" Old image deleted from SharePoint successfully")}catch(F){console.error(" Failed to delete old image from SharePoint:",F)}const _=K.find(F=>F.id===k);_&&e&&f.isOnline&&R({type:"update",entity:"equipment",data:_})},[r,e,f.isOnline,R]),M=A.useCallback(async k=>{const B=r.find(O=>O.id===k),$=r.filter(O=>O.id!==k),E=s.filter(O=>O.equipmentId!==k);i($),a(E),T($,E),B!=null&&B.sharePointId&&e&&f.isOnline&&R({type:"delete",entity:"equipment",data:B})},[r,s,e,f.isOnline,R]),L=A.useCallback(async k=>{var E;const B=Date.now()*1e3+Math.floor(Math.random()*1e3),$={...k,id:B,storeId:t,storeName:((E=c.find(O=>O.id===t))==null?void 0:E.name)||"Unknown Store"};return a(O=>{const K=[...O,$];return setTimeout(()=>T(void 0,K),0),K}),e&&f.isOnline&&R({type:"create",entity:"temperatureLog",data:$}),$},[t,c,e,f.isOnline,R]),D=A.useCallback(async(k,B,$)=>{const E=s.find(j=>j.id===k);if(!E){console.error("Temperature log not found for ID:",k);return}const O=r.find(j=>j.id===E.equipmentId),K=O?Bx(B,O.minTemp,O.maxTemp):E.status,_={...E,temperature:B,notes:$,status:K},F=s.map(j=>j.id===k?_:j);return a(F),T(void 0,F),e&&f.isOnline&&R({type:"update",entity:"temperatureLog",data:_}),_},[s,r,e,f.isOnline,R]),re=A.useCallback(async k=>{const B=s.find(E=>E.id===k),$=s.filter(E=>E.id!==k);a($),T(void 0,$),B!=null&&B.sharePointId&&e&&f.isOnline&&R({type:"delete",entity:"temperatureLog",data:B})},[s,e,f.isOnline,R]),W=A.useCallback(async()=>{e&&f.isOnline&&(d.length>0&&await v(),await g())},[e,f.isOnline,d.length,v,g]),Ie=A.useCallback(()=>{h([])},[]);return{equipment:r,temperatureLogs:s,stores:c,syncStatus:f,syncQueue:d,addEquipment:C,updateEquipment:N,deleteEquipment:M,addTemperatureLog:L,updateTemperatureLog:D,deleteTemperatureLog:re,syncFromSharePoint:g,syncToSharePoint:m,manualSync:W,clearSyncQueue:Ie,loadLocalData:y,saveLocalData:T}},Kx=()=>{const[t,e]=A.useState([]),n=A.useCallback(u=>{const h={id:`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,duration:5e3,...u};e(f=>[...f,h])},[]),r=A.useCallback((u,d,h)=>{n({type:"error",title:u,message:d,duration:8e3,action:h})},[n]),o=A.useCallback((u,d,h)=>{n({type:"success",title:u,message:d,duration:4e3,action:h})},[n]),i=A.useCallback((u,d,h)=>{n({type:"warning",title:u,message:d,duration:6e3,action:h})},[n]),s=A.useCallback((u,d,h)=>{n({type:"info",title:u,message:d,duration:5e3,action:h})},[n]),a=A.useCallback(u=>{e(d=>d.filter(h=>h.id!==u))},[]),c=A.useCallback(()=>{e([])},[]);return{notifications:t,showNotification:n,showError:r,showSuccess:o,showWarning:i,showInfo:s,dismissNotification:a,clearAllNotifications:c}},Ay=({isOpen:t,onClose:e,onCapture:n})=>{const r=A.useRef(null),o=A.useRef(null),i=A.useRef(null),[s,a]=A.useState(!1),[c,u]=A.useState(null),[d,h]=A.useState("environment"),[f,p]=A.useState(null),y=A.useCallback(async()=>{try{p(null),i.current&&i.current.getTracks().forEach(M=>M.stop());const C={video:{facingMode:d,width:{ideal:1920,max:1920},height:{ideal:1080,max:1080}},audio:!1},N=await navigator.mediaDevices.getUserMedia(C);i.current=N,r.current&&(r.current.srcObject=N,r.current.play(),a(!0))}catch(C){console.error("Camera access error:",C),p(`Camera access failed: ${C instanceof Error?C.message:"Unknown error"}`);const N=document.createElement("input");N.type="file",N.accept="image/*",N.capture="environment",N.onchange=M=>{var D;const L=(D=M.target.files)==null?void 0:D[0];L&&(n(L),e())},N.click()}},[d,n,e]),T=A.useCallback(()=>{i.current&&(i.current.getTracks().forEach(C=>C.stop()),i.current=null),a(!1),u(null)},[]),R=A.useCallback(()=>{if(!r.current||!o.current)return;const C=r.current,N=o.current,M=N.getContext("2d");M&&(N.width=C.videoWidth,N.height=C.videoHeight,M.drawImage(C,0,0),N.toBlob(L=>{if(L){const D=URL.createObjectURL(L);u(D)}},"image/jpeg",.9))},[]),v=A.useCallback(()=>{o.current&&o.current.toBlob(C=>{if(C){const N=new File([C],`equipment-photo-${Date.now()}.jpg`,{type:"image/jpeg"});n(N),T(),e()}},"image/jpeg",.9)},[n,T,e]),g=A.useCallback(()=>{u(null),c&&URL.revokeObjectURL(c)},[c]),m=A.useCallback(()=>{h(C=>C==="environment"?"user":"environment")},[]);return Tt.useEffect(()=>(t&&!s&&!c&&y(),()=>{t||(T(),c&&URL.revokeObjectURL(c))}),[t,y,T,s,c]),Tt.useEffect(()=>{s&&!c&&y()},[d,y,s,c]),t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",children:l.jsxs("div",{className:"relative w-full h-full max-w-lg mx-auto bg-black",children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex justify-between items-center p-4 bg-black bg-opacity-50",children:[l.jsx("button",{onClick:e,className:"text-white p-2 rounded-full bg-black bg-opacity-50",children:l.jsx(ze,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-white font-medium",children:"Take Equipment Photo"}),l.jsx("button",{onClick:m,className:"text-white p-2 rounded-full bg-black bg-opacity-50",disabled:!s||!!c,children:l.jsx(Sh,{className:"w-6 h-6"})})]}),f&&l.jsxs("div",{className:"absolute top-20 left-4 right-4 z-10 bg-red-600 text-white p-3 rounded",children:[l.jsx("p",{className:"text-sm",children:f}),l.jsx("p",{className:"text-xs mt-1",children:"Using file picker instead..."})]}),l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[c?l.jsx("img",{src:c,alt:"Captured",className:"max-w-full max-h-full object-contain"}):l.jsx("video",{ref:r,className:"w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),l.jsx("canvas",{ref:o,className:"hidden"})]}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-6 bg-black bg-opacity-50",children:[c?l.jsxs("div",{className:"flex justify-center space-x-6",children:[l.jsx("button",{onClick:g,className:"flex items-center justify-center w-16 h-16 bg-gray-600 rounded-full text-white",children:l.jsx(Sh,{className:"w-8 h-8"})}),l.jsx("button",{onClick:v,className:"flex items-center justify-center w-16 h-16 bg-green-600 rounded-full text-white",children:l.jsx(xC,{className:"w-8 h-8"})})]}):l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{onClick:R,disabled:!s,className:"flex items-center justify-center w-20 h-20 bg-white rounded-full disabled:bg-gray-400 disabled:opacity-50",children:l.jsx(Qc,{className:"w-10 h-10 text-black"})})}),l.jsxs("div",{className:"text-center mt-4",children:[l.jsx("p",{className:"text-white text-sm",children:d==="environment"?"Rear Camera":"Front Camera"}),!s&&!c&&!f&&l.jsx("p",{className:"text-white text-xs opacity-75",children:"Starting camera..."})]})]})]})}):null},Gx=({isOpen:t,onClose:e,onSave:n})=>{const[r,o]=A.useState({name:"",type:"Walk-in Cooler",location:"",minTemp:"",maxTemp:"",category:"Refrigeration",notes:"",image:null,imageUrl:"",imageType:"none"}),[i,s]=A.useState(null),[a,c]=A.useState(!1),u={Refrigeration:["Walk-in Cooler","Walk-in Freezer","Prep Table Cooler","Refrigerator","Freezer","Display Case"],"Ice Equipment":["Ice Machine","Ice Cream Freezer","Soft Serve Machine"],"Cooking Equipment":["Oven","Grill","Fryer","Steamer"],"Hot Holding":["Hot Holding Cabinet","Warming Drawer","Heat Lamp"],Other:["Other"]},d=m=>u[m]||[],h=m=>{m.preventDefault();const C={...r,imageUrl:i||r.imageUrl,imageFile:r.image};console.log("AddEquipmentModal submitting:",{hasImage:!!r.image,imageType:r.imageType,hasPreviewUrl:!!i,submitData:C}),n(C),e(),f()},f=()=>{o({name:"",type:"Walk-in Cooler",location:"",minTemp:"",maxTemp:"",category:"Refrigeration",notes:"",image:null,imageUrl:"",imageType:"none"}),s(null)},p=m=>{var N;const C=(N=m.target.files)==null?void 0:N[0];if(C){const M=new FileReader;M.onload=L=>{var D;s((D=L.target)==null?void 0:D.result)},M.readAsDataURL(C),o(L=>({...L,image:C,imageType:"file"}))}},y=()=>{r.imageUrl&&(s(r.imageUrl),o(m=>({...m,imageType:"url"})))},T=()=>{c(!0)},R=m=>{console.log("Camera captured file:",m),o(N=>({...N,image:m,imageType:"camera"}));const C=URL.createObjectURL(m);s(C),c(!1)},v=()=>{s(null),o(m=>({...m,image:null,imageUrl:"",imageType:"none"}))},g=m=>{const C=d(m);o(N=>({...N,category:m,type:C[0]||"Other"}))};return Tt.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t]),t?l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsxs("div",{className:"modal-content",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Equipment"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Name"}),l.jsx("input",{type:"text",value:r.name,onChange:m=>o(C=>({...C,name:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Test",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Category"}),l.jsx("select",{value:r.category,onChange:m=>g(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.keys(u).map(m=>l.jsx("option",{value:m,children:m},m))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Type"}),l.jsx("select",{value:r.type,onChange:m=>o(C=>({...C,type:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:d(r.category).map(m=>l.jsx("option",{value:m,children:m},m))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),l.jsx("input",{type:"text",value:r.location,onChange:m=>o(C=>({...C,location:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Back",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Temp (F)"}),l.jsx("input",{type:"number",value:r.minTemp,onChange:m=>o(C=>({...C,minTemp:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"24",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Temp (F)"}),l.jsx("input",{type:"number",value:r.maxTemp,onChange:m=>o(C=>({...C,maxTemp:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"45",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),l.jsx("textarea",{value:r.notes,onChange:m=>o(C=>({...C,notes:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,placeholder:"Any additional notes about this equipment..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Image"}),i?l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[l.jsx("img",{src:i,alt:"Preview",className:"w-full h-48 object-cover rounded-lg mb-4"}),l.jsx("div",{className:"flex justify-center space-x-4",children:l.jsxs("button",{type:"button",onClick:v,className:"flex items-center px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:[l.jsx(Go,{className:"w-4 h-4 mr-2"}),"Remove"]})})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[l.jsxs("div",{className:"text-gray-400 text-6xl mb-4",children:[l.jsx("span",{className:"text-gray-300",children:"300"}),l.jsx("div",{className:"text-4xl",children:""}),l.jsx("span",{className:"text-gray-300",children:"200"})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsxs("label",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[l.jsx(yg,{className:"w-4 h-4 mr-2"}),"Upload File",l.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:p,className:"hidden"})]}),l.jsxs("button",{type:"button",onClick:T,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(Qc,{className:"w-4 h-4 mr-2"}),"Take Photo"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"url",value:r.imageUrl,onChange:m=>o(C=>({...C,imageUrl:m.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Or enter image URL..."}),l.jsxs("button",{type:"button",onClick:y,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(gg,{className:"w-4 h-4 mr-2"}),"Use URL"]})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Equipment"})]})]})]}),a&&l.jsx(Ay,{isOpen:a,onClose:()=>c(!1),onCapture:R})]})}):null},Vx=({isOpen:t,onClose:e,onSave:n,equipment:r})=>{const[o,i]=A.useState({name:"",type:"Walk-in Cooler",location:"",minTemp:"",maxTemp:"",category:"Refrigeration",notes:"",image:null,imageUrl:"",imageType:"none"}),[s,a]=A.useState(null),[c,u]=A.useState(!1),d={Refrigeration:["Walk-in Cooler","Walk-in Freezer","Prep Table Cooler","Refrigerator","Freezer","Display Case"],"Ice Equipment":["Ice Machine","Ice Cream Freezer","Soft Serve Machine"],"Cooking Equipment":["Oven","Grill","Fryer","Steamer"],"Hot Holding":["Hot Holding Cabinet","Warming Drawer","Heat Lamp"],Other:["Other"]},h=m=>d[m]||[];A.useEffect(()=>{var m,C;t&&r&&(i({name:r.name||"",type:r.type||"Walk-in Cooler",location:r.location||"",minTemp:((m=r.minTemp)==null?void 0:m.toString())||"",maxTemp:((C=r.maxTemp)==null?void 0:C.toString())||"",category:r.category||"Refrigeration",notes:r.notes||"",image:null,imageUrl:r.imageUrl||"",imageType:r.imageUrl?"url":"none"}),a(r.imageUrl||null))},[t,r]);const f=m=>{m.preventDefault();const C={...r,...o,minTemp:parseInt(o.minTemp),maxTemp:parseInt(o.maxTemp),imageUrl:s||o.imageUrl,imageFile:o.image};n(C),e()},p=m=>{var N;const C=(N=m.target.files)==null?void 0:N[0];if(C){const M=new FileReader;M.onload=L=>{var D;a((D=L.target)==null?void 0:D.result)},M.readAsDataURL(C),i(L=>({...L,image:C,imageType:"file"}))}},y=()=>{o.imageUrl&&(a(o.imageUrl),i(m=>({...m,imageType:"url"})))},T=()=>{u(!0)},R=m=>{i(N=>({...N,image:m,imageType:"camera"}));const C=URL.createObjectURL(m);a(C),u(!1)},v=()=>{a(null),i(m=>({...m,image:null,imageUrl:"",imageType:"none"}))},g=m=>{const C=h(m);i(N=>({...N,category:m,type:C[0]||"Other"}))};return Tt.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t]),t?l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsxs("div",{className:"modal-content max-w-2xl",onClick:m=>m.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Equipment"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Name"}),l.jsx("input",{type:"text",value:o.name,onChange:m=>i(C=>({...C,name:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Category"}),l.jsx("select",{value:o.category,onChange:m=>g(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.keys(d).map(m=>l.jsx("option",{value:m,children:m},m))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Type"}),l.jsx("select",{value:o.type,onChange:m=>i(C=>({...C,type:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:h(o.category).map(m=>l.jsx("option",{value:m,children:m},m))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),l.jsx("input",{type:"text",value:o.location,onChange:m=>i(C=>({...C,location:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Temp (F)"}),l.jsx("input",{type:"number",value:o.minTemp,onChange:m=>i(C=>({...C,minTemp:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Temp (F)"}),l.jsx("input",{type:"number",value:o.maxTemp,onChange:m=>i(C=>({...C,maxTemp:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),l.jsx("textarea",{value:o.notes,onChange:m=>i(C=>({...C,notes:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,placeholder:"Any additional notes about this equipment..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Image"}),s?l.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[l.jsx("img",{src:s,alt:"Preview",className:"w-full h-48 object-cover rounded-lg mb-4"}),l.jsx("div",{className:"flex justify-center space-x-4",children:l.jsxs("button",{type:"button",onClick:v,className:"flex items-center px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50",children:[l.jsx(Go,{className:"w-4 h-4 mr-2"}),"Remove"]})})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[l.jsxs("div",{className:"text-gray-400 text-6xl mb-4",children:[l.jsx("span",{className:"text-gray-300",children:"300"}),l.jsx("div",{className:"text-4xl",children:""}),l.jsx("span",{className:"text-gray-300",children:"200"})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsxs("label",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[l.jsx(yg,{className:"w-4 h-4 mr-2"}),"Upload File",l.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:p,className:"hidden"})]}),l.jsxs("button",{type:"button",onClick:T,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(Qc,{className:"w-4 h-4 mr-2"}),"Take Photo"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"url",value:o.imageUrl,onChange:m=>i(C=>({...C,imageUrl:m.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Or enter image URL..."}),l.jsxs("button",{type:"button",onClick:y,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(gg,{className:"w-4 h-4 mr-2"}),"Use URL"]})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Yc,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]}),c&&l.jsx(Ay,{isOpen:c,onClose:()=>u(!1),onCapture:R})]})}):null},Wx=({isOpen:t,onClose:e,equipment:n,onLogTemperature:r})=>{const[o,i]=A.useState(1),[s,a]=A.useState("");A.useEffect(()=>{t&&(i(1),a(""))},[t]);const c=()=>{o===1&&s&&n?(r(n.id,parseFloat(s)),i(2)):o<3&&i(o+1)},u=()=>{i(1),a(""),e()},d=()=>{if(!s||!n)return"Normal";const f=parseFloat(s);return isNaN(f)||f>=n.minTemp&&f<=n.maxTemp?"Normal":f<n.minTemp-2||f>n.maxTemp+2?"Critical":f>=n.minTemp-2&&f<n.minTemp||f>n.maxTemp&&f<=n.maxTemp+2?"Warning":"Normal"},h=f=>{switch(f){case"Critical":return"bg-red-50 border-red-200 text-red-800";case"Warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-green-50 border-green-200 text-green-800"}};return Tt.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t]),t?l.jsx("div",{className:"modal-backdrop",onClick:u,children:l.jsx("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Log Temperature (",o," of 3)"]}),l.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),o===1&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:n!=null&&n.imageUrl?l.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400 text-4xl",children:"300"}),l.jsx("span",{className:"text-gray-400 text-2xl mx-2",children:""}),l.jsx("span",{className:"text-gray-400 text-4xl",children:"200"})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center text-lg font-semibold text-gray-900",children:[l.jsx(Vn,{className:"w-5 h-5 mr-2 text-blue-600"}),(n==null?void 0:n.name)||"Walk-in Cooler"]}),l.jsxs("div",{className:"flex items-center text-gray-600",children:[l.jsx("span",{className:"w-5 h-5 mr-2"}),(n==null?void 0:n.location)||"Kitchen"]}),l.jsxs("div",{className:"flex items-center text-gray-600",children:[l.jsx(tt,{className:"w-5 h-5 mr-2"}),"Range: ",(n==null?void 0:n.minTemp)||"32","F - ",(n==null?void 0:n.maxTemp)||"40","F"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature (F)"}),l.jsx("input",{type:"number",value:s,onChange:f=>a(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",placeholder:"Enter temperature",step:"0.1",required:!0})]}),s&&d()==="Critical"&&l.jsxs("div",{className:`p-4 rounded-lg border ${h("Critical")}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(tt,{className:"w-5 h-5 mr-2 text-red-600"}),l.jsx("span",{className:"font-medium",children:"Critical Temperature!"})]}),l.jsxs("p",{className:"mt-1 text-sm",children:["This temperature is outside the safe range (",(n==null?void 0:n.minTemp)||"32","F - ",(n==null?void 0:n.maxTemp)||"40","F)"]})]}),s&&d()==="Warning"&&l.jsxs("div",{className:`p-4 rounded-lg border ${h("Warning")}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"relative w-5 h-5 mr-2 text-yellow-600",children:[l.jsx(tt,{className:"w-5 h-5"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]}),l.jsx("span",{className:"font-medium",children:"Warning Temperature!"})]}),l.jsxs("p",{className:"mt-1 text-sm",children:["This temperature is outside the safe range (",(n==null?void 0:n.minTemp)||"32","F - ",(n==null?void 0:n.maxTemp)||"40","F)"]})]}),l.jsxs("div",{className:"flex justify-between pt-4",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:c,disabled:!s,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",l.jsx(SC,{className:"w-4 h-4 ml-2"})]})]})]}),o===2&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:l.jsx(Vn,{className:"w-8 h-8 text-green-600"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Temperature Logged"}),l.jsx("p",{className:"text-gray-600",children:"Temperature has been recorded successfully."})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Equipment:"}),l.jsx("span",{className:"font-medium",children:(n==null?void 0:n.name)||"Walk-in Cooler"})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-gray-600",children:"Temperature:"}),l.jsxs("span",{className:"font-medium",children:[s,"F"]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsx("span",{className:"text-gray-600",children:"Status:"}),l.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${h(d()).replace("bg-","bg-").replace("border-","").replace("text-","text-")}`,children:d()})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{onClick:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})})}):null},qx=({isOpen:t,onClose:e,equipment:n,onLogTemperatures:r})=>{var R,v,g,m,C,N,M,L,D,re,W,Ie,k,B,$;const[o,i]=A.useState({}),[s,a]=A.useState(0),[c,u]=A.useState(!1);Tt.useEffect(()=>{t&&(console.log("BulkLoggingModal equipment IDs:",n.map(E=>E.id)),console.log("BulkLoggingModal opened with equipment:",n.map(E=>({id:E.id,name:E.name}))),i({}),a(0),u(!1))},[t,n]);const d=(E,O)=>{i(K=>({...K,[E]:O}))},h=E=>{const O=parseFloat(o[E]||""),K=n.find(_=>_.id===E);return!O||!K||O>=K.minTemp&&O<=K.maxTemp?"Normal":O<K.minTemp-2||O>K.maxTemp+2?"Critical":O===K.minTemp-2||O===K.minTemp-1||O===K.maxTemp+1||O===K.maxTemp+2?"Warning":"Normal"},f=E=>{switch(E){case"Critical":return"bg-red-100 text-red-800";case"Warning":return"bg-yellow-100 text-yellow-800";default:return"bg-green-100 text-green-800"}},p=E=>{switch(E){case"Critical":return l.jsx($r,{className:"w-4 h-4 text-red-600"});case"Warning":return l.jsxs("div",{className:"relative w-4 h-4 text-yellow-600",children:[l.jsx(tt,{className:"w-4 h-4"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]});default:return l.jsx(Lt,{className:"w-4 h-4 text-green-600"})}},y=()=>{const E={};Object.entries(o).forEach(([O,K])=>{if(K&&K.trim()!==""){const _=parseFloat(K);isNaN(_)||(E[parseInt(O)]=_)}}),console.log("Submitting temperatures:",E),r(E),e(),i({}),a(0),u(!1)},T=n.every(E=>o[E.id]);return Tt.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t]),t?c?l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsx("div",{className:"modal-content max-w-2xl",onClick:E=>E.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Lt,{className:"w-6 h-6 text-green-600 mr-2"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Temperature Summary"})]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsx("p",{className:"text-gray-600 mb-6",children:'Review all temperatures before submitting. Click "Edit" to modify any entry.'}),l.jsx("div",{className:"space-y-4 mb-6",children:n.map(E=>{const O=h(E.id),K=o[E.id];return l.jsx("div",{className:"border rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center mr-3 overflow-hidden",children:E.imageUrl?l.jsx("img",{src:E.imageUrl,alt:E.name,className:"w-full h-full object-cover"}):l.jsx("span",{className:"text-gray-400 text-xl",children:""})}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium text-gray-900 flex items-center",children:[l.jsx("span",{className:"w-1 h-4 bg-blue-600 rounded-full mr-2"}),E.name]}),l.jsx("p",{className:"text-sm text-gray-600",children:E.location}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Range: ",E.minTemp,"F - ",E.maxTemp,"F"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[K,"F"]}),l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${f(O)}`,children:[p(O),l.jsx("span",{className:"ml-1",children:O})]})]}),l.jsx("button",{onClick:()=>{const _=n.findIndex(F=>F.id===E.id);a(_>=0?_:0),u(!1)},className:"text-blue-600 hover:text-blue-800 transition-colors",children:l.jsx(OC,{className:"w-4 h-4"})})]})]})},E.id)})}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("button",{onClick:()=>u(!1),className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[l.jsx(ze,{className:"w-4 h-4 mr-2"}),"Cancel"]}),l.jsxs("button",{onClick:y,className:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[l.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Submit All Temperatures"]})]})]})})}):l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsx("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Log Temperature (",s+1," of ",n.length,")"]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-32 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden",children:(R=n[s])!=null&&R.imageUrl?l.jsx("img",{src:n[s].imageUrl,alt:n[s].name,className:"w-full h-full object-cover"}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-gray-400 text-4xl",children:"300"}),l.jsx("span",{className:"text-gray-400 text-2xl mx-2",children:""}),l.jsx("span",{className:"text-gray-400 text-4xl",children:"200"})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center text-lg font-semibold text-gray-900",children:[l.jsx("span",{className:"w-1 h-4 bg-blue-600 rounded-full mr-2"}),(v=n[s])==null?void 0:v.name]}),l.jsxs("div",{className:"flex items-center text-gray-600",children:[l.jsx("span",{className:"w-5 h-5 mr-2"}),(g=n[s])==null?void 0:g.location]}),l.jsxs("div",{className:"flex items-center text-gray-600",children:[l.jsx(tt,{className:"w-5 h-5 mr-2"}),"Range: ",(m=n[s])==null?void 0:m.minTemp,"F - ",(C=n[s])==null?void 0:C.maxTemp,"F"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature (F)"}),l.jsx("input",{type:"number",value:o[(N=n[s])==null?void 0:N.id]||"",onChange:E=>{var O;return d((O=n[s])==null?void 0:O.id,E.target.value)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg",placeholder:"Enter temperature",step:"0.1",required:!0})]}),o[(M=n[s])==null?void 0:M.id]&&h((L=n[s])==null?void 0:L.id)==="Critical"&&l.jsxs("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200 text-red-800",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(tt,{className:"w-5 h-5 mr-2 text-red-600"}),l.jsx("span",{className:"font-medium",children:"Critical Temperature!"})]}),l.jsxs("p",{className:"mt-1 text-sm",children:["This temperature is outside the safe range (",(D=n[s])==null?void 0:D.minTemp,"F - ",(re=n[s])==null?void 0:re.maxTemp,"F)"]})]}),o[(W=n[s])==null?void 0:W.id]&&h((Ie=n[s])==null?void 0:Ie.id)==="Warning"&&l.jsxs("div",{className:"p-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"relative w-5 h-5 mr-2 text-yellow-600",children:[l.jsx(tt,{className:"w-5 h-5"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]}),l.jsx("span",{className:"font-medium",children:"Warning Temperature!"})]}),l.jsxs("p",{className:"mt-1 text-sm",children:["This temperature is outside the safe range (",(k=n[s])==null?void 0:k.minTemp,"F - ",(B=n[s])==null?void 0:B.maxTemp,"F)"]})]}),l.jsxs("div",{className:"flex justify-between pt-4",children:[l.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsxs("div",{className:"flex space-x-2",children:[s>0&&l.jsx("button",{onClick:()=>a(s-1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Previous"}),s<n.length-1?l.jsx("button",{onClick:()=>a(s+1),disabled:!o[($=n[s])==null?void 0:$.id],className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}):l.jsx("button",{onClick:()=>u(!0),disabled:!T,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Review Summary"})]})]})]})]})})}):null},Qx=({isOpen:t,onClose:e,temperatureLogs:n,equipment:r})=>{const[o,i]=A.useState("csv"),[s,a]=A.useState({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[c,u]=A.useState([]),d=()=>{const y=n.filter(T=>{const R=new Date(T.timestamp).toISOString().split("T")[0],v=R>=s.start&&R<=s.end,g=c.length===0||c.includes(T.equipmentId);return v&&g});o==="csv"?h(y):f(y)},h=y=>{const T=[["Date & Time","Equipment","Location","Temperature (F)","Status","Range"],...y.map(g=>{const m=r.find(C=>C.id===g.equipmentId);return[new Date(g.timestamp).toLocaleString(),g.equipmentName,(m==null?void 0:m.location)||"Unknown",g.temperature,g.status,m?`${m.minTemp}F - ${m.maxTemp}F`:"Unknown"]})].map(g=>g.join(",")).join(`
`),R=new Blob([T],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a");v.href=URL.createObjectURL(R),v.download=`temperature_logs_${new Date().toISOString().split("T")[0]}.csv`,v.click()},f=y=>{const T=window.open("","_blank");if(!T)return;const R=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Temperature Logs Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f2f2f2; }
          .status-normal { color: green; }
          .status-warning { color: orange; }
          .status-critical { color: red; }
          .report-info { background-color: #f9f9f9; padding: 10px; margin-bottom: 20px; }
        </style>
      </head>
      <body>
        <h1>TempTracker Pro - Temperature Logs Report</h1>
        <div class="report-info">
          <p><strong>Date Range:</strong> ${new Date(s.start).toLocaleDateString()} - ${new Date(s.end).toLocaleDateString()}</p>
          <p><strong>Total Records:</strong> ${y.length}</p>
          <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
        </div>
        <table>
          <thead>
            <tr>
              <th>Date & Time</th>
              <th>Equipment</th>
              <th>Location</th>
              <th>Temperature (F)</th>
              <th>Status</th>
              <th>Range</th>
            </tr>
          </thead>
          <tbody>
            ${y.map(v=>{const g=r.find(m=>m.id===v.equipmentId);return`
                <tr>
                  <td>${new Date(v.timestamp).toLocaleString()}</td>
                  <td>${v.equipmentName}</td>
                  <td>${(g==null?void 0:g.location)||"Unknown"}</td>
                  <td>${v.temperature}</td>
                  <td class="status-${v.status.toLowerCase()}">${v.status}</td>
                  <td>${g?`${g.minTemp}F - ${g.maxTemp}F`:"Unknown"}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
      </body>
      </html>
    `;T.document.write(R),T.document.close(),T.print()},p=y=>{u(T=>T.includes(y)?T.filter(R=>R!==y):[...T,y])};return t?l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsx("div",{className:"modal-content max-w-2xl",onClick:y=>y.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ms,{className:"w-6 h-6 text-blue-600 mr-2"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Export Temperature Logs"})]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("button",{onClick:()=>i("csv"),className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${o==="csv"?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(IC,{className:"w-4 h-4 mr-2"}),"CSV"]}),l.jsxs("button",{onClick:()=>i("pdf"),className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${o==="pdf"?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[l.jsx(AC,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx("input",{type:"date",value:s.start,onChange:y=>a(T=>({...T,start:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),l.jsx("span",{className:"text-gray-500",children:"to"}),l.jsx("div",{className:"flex-1",children:l.jsx("input",{type:"date",value:s.end,onChange:y=>a(T=>({...T,end:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipment Filter (leave empty for all)"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:r.map(y=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:c.includes(y.id),onChange:()=>p(y.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:y.name})]},y.id))})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Export Summary"}),l.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[l.jsxs("p",{children:["Records in range: ",n.filter(y=>{const T=new Date(y.timestamp).toISOString().split("T")[0];return T>=s.start&&T<=s.end}).length]}),l.jsxs("p",{children:["Equipment selected: ",c.length===0?"All":c.length]}),l.jsxs("p",{children:["Export format: ",o.toUpperCase()]})]})]})]}),l.jsxs("div",{className:"flex justify-between pt-6",children:[l.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[l.jsx(ze,{className:"w-4 h-4 mr-2"}),"Cancel"]}),l.jsxs("button",{onClick:d,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(ms,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})})}):null},Yx=({isOpen:t,onClose:e,onClearAllData:n,stores:r=[],selectedStore:o,onStoreChange:i,onAddEquipment:s})=>{const[a,c]=A.useState("general"),[u,d]=A.useState({temperatureUnit:"fahrenheit",notifications:{criticalAlerts:!0,warningAlerts:!0,dailyReminder:!1,reminderTime:"09:00"},display:{theme:"light",compactView:!1,showImages:!0},export:{defaultFormat:"csv",includePictures:!0,dateRange:30}});A.useEffect(()=>{if(t){const y=localStorage.getItem("temptracker-settings");y&&d(JSON.parse(y))}},[t]);const h=()=>{localStorage.setItem("temptracker-settings",JSON.stringify(u)),e()},f=()=>{window.confirm("Are you sure you want to clear all data? This action cannot be undone.")&&(n(),e())},p=(y,T)=>{d(R=>{const v={...R},g=y.split(".");let m=v;for(let C=0;C<g.length-1;C++)m=m[g[C]];return m[g[g.length-1]]=T,v})};return Tt.useEffect(()=>(t?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")}),[t]),t?l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsx("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(pg,{className:"w-6 h-6 text-blue-600 mr-2"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Settings"})]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[l.jsx("button",{onClick:()=>c("general"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${a==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"General"}),l.jsx("button",{onClick:()=>c("notifications"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${a==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Notifications"}),l.jsx("button",{onClick:()=>c("data"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${a==="data"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Data & Privacy"})]}),l.jsxs("div",{className:"space-y-6",style:{height:"450px",overflow:"auto"},children:[a==="general"&&l.jsxs("div",{className:"space-y-6",children:[r.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Store Location"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none",value:(o==null?void 0:o.id)||"",onChange:y=>{const T=r.find(R=>R.id===parseInt(y.target.value));T&&i&&i(T)},children:r.map(y=>l.jsx("option",{value:y.id,children:y.name},y.id))}),l.jsx(kC,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Change the store location to view and manage different equipment sets"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipment Management"}),l.jsxs("button",{onClick:()=>{s&&(s(),e())},className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(MC,{className:"w-4 h-4 mr-2"}),"Add New Equipment"]}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add refrigeration equipment to monitor temperatures"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature Unit"}),l.jsxs("select",{value:u.temperatureUnit,onChange:y=>p("temperatureUnit",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"fahrenheit",children:"Fahrenheit (F)"}),l.jsx("option",{value:"celsius",children:"Celsius (C)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Options"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u.display.compactView,onChange:y=>p("display.compactView",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Compact view"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u.display.showImages,onChange:y=>p("display.showImages",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Show equipment images"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Defaults"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Default Format"}),l.jsxs("select",{value:u.export.defaultFormat,onChange:y=>p("export.defaultFormat",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"csv",children:"CSV"}),l.jsx("option",{value:"pdf",children:"PDF"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Default Date Range (days)"}),l.jsx("input",{type:"number",value:u.export.dateRange,onChange:y=>p("export.dateRange",parseInt(y.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"365"})]})]})]})]}),a==="notifications"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature Alerts"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u.notifications.criticalAlerts,onChange:y=>p("notifications.criticalAlerts",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Critical temperature alerts"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u.notifications.warningAlerts,onChange:y=>p("notifications.warningAlerts",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Warning temperature alerts"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Reminders"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:u.notifications.dailyReminder,onChange:y=>p("notifications.dailyReminder",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Daily temperature check reminder"})]}),u.notifications.dailyReminder&&l.jsxs("div",{className:"ml-6",children:[l.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Reminder Time"}),l.jsx("input",{type:"time",value:u.notifications.reminderTime,onChange:y=>p("notifications.reminderTime",y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(mg,{className:"w-5 h-5 text-yellow-600 mr-2"}),l.jsx("span",{className:"text-sm text-yellow-800 font-medium",children:"Browser Notifications"})]}),l.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"To receive notifications, please enable browser notifications when prompted."})]})]}),a==="data"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Management"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(EC,{className:"w-5 h-5 text-blue-600 mr-2"}),l.jsx("span",{className:"text-sm text-blue-800 font-medium",children:"Local Storage"})]}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"All data is stored locally on your device. No data is sent to external servers."})]}),l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Go,{className:"w-5 h-5 text-red-600 mr-2"}),l.jsx("span",{className:"text-sm text-red-800 font-medium",children:"Clear All Data"})]}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Remove all equipment, temperature logs, and settings. This cannot be undone."})]}),l.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Clear Data"})]})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Privacy"}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[l.jsx("p",{children:" Temperature data is stored locally on your device"}),l.jsx("p",{children:" No personal information is collected or transmitted"}),l.jsx("p",{children:" Equipment images are stored locally and not shared"}),l.jsx("p",{children:" You can export or delete your data at any time"})]})]})]})]}),l.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[l.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:[l.jsx(ze,{className:"w-4 h-4 mr-2"}),"Cancel"]}),l.jsxs("button",{onClick:h,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Yc,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})})}):null},Jx=({isOpen:t,onClose:e,onSave:n,log:r,equipment:o})=>{const[i,s]=A.useState(""),[a,c]=A.useState("");A.useEffect(()=>{t&&r&&(s(r.temperature.toString()),c(r.notes||""))},[t,r]);const u=y=>{y.preventDefault(),i&&r&&(n(r.id,parseFloat(i),a),e())},d=y=>!o||y>=o.minTemp&&y<=o.maxTemp?"Normal":y<o.minTemp-2||y>o.maxTemp+2?"Critical":y===o.minTemp-2||y===o.minTemp-1||y===o.maxTemp+1||y===o.maxTemp+2?"Warning":"Normal",h=y=>{switch(y){case"Normal":return"bg-green-100 text-green-800";case"Warning":return"bg-yellow-100 text-yellow-800";case"Critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=y=>{switch(y){case"Normal":return l.jsx(Lt,{className:"w-4 h-4 text-green-500"});case"Warning":return l.jsxs("div",{className:"relative w-4 h-4 text-yellow-500",children:[l.jsx(tt,{className:"w-4 h-4"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]});case"Critical":return l.jsx($r,{className:"w-4 h-4 text-red-500"});default:return null}};if(!t||!r||!o)return null;const p=d(parseFloat(i)||0);return l.jsx("div",{className:"modal-backdrop",onClick:e,children:l.jsx("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Temperature Log"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment"}),l.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.name}),l.jsx("div",{className:"text-sm text-gray-600",children:o.location}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Range: ",o.minTemp,"F - ",o.maxTemp,"F"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature (F)"}),l.jsx("input",{type:"number",value:i,onChange:y=>s(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.1",required:!0})]}),i&&l.jsx("div",{className:"p-3 rounded-lg border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Status:"}),l.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h(p)}`,children:[f(p),l.jsx("span",{className:"ml-1",children:p})]})]})}),i&&p==="Critical"&&l.jsxs("div",{className:"p-4 rounded-lg border bg-red-50 border-red-200 text-red-800",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(tt,{className:"w-5 h-5 mr-2 text-red-600"}),l.jsx("span",{className:"font-medium",children:"Critical Temperature!"})]}),l.jsxs("p",{className:"mt-1 text-sm",children:["This temperature is outside the safe range (",o.minTemp,"F - ",o.maxTemp,"F)"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),l.jsx("textarea",{value:a,onChange:y=>c(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,placeholder:"Any additional notes about this reading..."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Yc,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})})},Xx=({temperatureLogs:t})=>{const[e,n]=A.useState([]),[r,o]=A.useState(null),[i,s]=A.useState(null);A.useEffect(()=>{const h=localStorage.getItem("temptracker-settings");h&&o(JSON.parse(h))},[]),A.useEffect(()=>{var h,f;if(t.length>0&&r){const p=t[t.length-1];if(p.id===i)return;const y=new Date(p.timestamp).getTime(),R=Date.now()-1e4;if(y<R)return;s(p.id),p.status==="Critical"&&((h=r.notifications)!=null&&h.criticalAlerts)?(a({type:"critical",title:"Critical Temperature Alert!",message:`${p.equipmentName} temperature is ${p.temperature}F - immediate action required!`,equipmentId:p.equipmentId,autoHide:!1}),Notification.permission==="granted"&&new Notification("TempTracker Pro - Critical Alert",{body:`${p.equipmentName}: ${p.temperature}F`,icon:"/favicon.ico",tag:`critical-${p.equipmentId}-${p.id}`})):p.status==="Warning"&&((f=r.notifications)!=null&&f.warningAlerts)&&a({type:"warning",title:"Temperature Warning",message:`${p.equipmentName} temperature is ${p.temperature}F - approaching limits`,equipmentId:p.equipmentId,autoHide:!0})}},[t,r,i]),A.useEffect(()=>{Notification.permission==="default"&&Notification.requestPermission()},[]);const a=h=>{const f={...h,id:Date.now().toString(),timestamp:Date.now()};n(p=>[...p,f]),h.autoHide&&setTimeout(()=>{c(f.id)},5e3)},c=h=>{n(f=>f.filter(p=>p.id!==h))},u=h=>{switch(h){case"critical":return l.jsx($r,{className:"w-5 h-5 text-red-600"});case"warning":return l.jsxs("div",{className:"relative w-5 h-5 text-yellow-600",children:[l.jsx(tt,{className:"w-5 h-5"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]});case"success":return l.jsx(Lt,{className:"w-5 h-5 text-green-600"});default:return l.jsx(mg,{className:"w-5 h-5 text-blue-600"})}},d=h=>{switch(h){case"critical":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200";default:return"bg-blue-50 border-blue-200"}};return e.length===0?null:l.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:e.map(h=>l.jsx("div",{className:`p-4 rounded-lg border shadow-lg animate-slide-in ${d(h.type)}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 mr-3",children:u(h.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:h.title}),l.jsx("p",{className:"text-sm text-gray-700 mt-1",children:h.message}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(h.timestamp).toLocaleTimeString()})]}),l.jsx("button",{onClick:()=>c(h.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ze,{className:"w-4 h-4"})})]})},h.id))})},Zx=({notification:t,onDismiss:e})=>{const[n,r]=A.useState(!1),[o,i]=A.useState(!1);A.useEffect(()=>{const h=setTimeout(()=>r(!0),10);let f;return t.duration&&t.duration>0&&(f=setTimeout(()=>{s()},t.duration)),()=>{clearTimeout(h),f&&clearTimeout(f)}},[t.duration]);const s=()=>{i(!0),setTimeout(()=>{e(t.id)},300)},a=()=>{switch(t.type){case"error":return l.jsx($r,{className:"w-5 h-5 text-red-500"});case"success":return l.jsx(Lt,{className:"w-5 h-5 text-green-500"});case"warning":return l.jsx(tt,{className:"w-5 h-5 text-yellow-500"});case"info":return l.jsx(Ch,{className:"w-5 h-5 text-blue-500"});default:return l.jsx(Ch,{className:"w-5 h-5 text-gray-500"})}},c=()=>{switch(t.type){case"error":return"bg-red-50 border-red-200";case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},u=()=>{switch(t.type){case"error":return"text-red-800";case"success":return"text-green-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800";default:return"text-gray-800"}},d=()=>{switch(t.type){case"error":return"text-red-700";case"success":return"text-green-700";case"warning":return"text-yellow-700";case"info":return"text-blue-700";default:return"text-gray-700"}};return l.jsx("div",{className:`
        relative max-w-sm w-full border rounded-lg shadow-lg p-4 mb-3
        transform transition-all duration-300 ease-in-out
        ${c()}
        ${n&&!o?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
        ${o?"translate-x-full opacity-0":""}
      `,children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:a()}),l.jsxs("div",{className:"ml-3 flex-1",children:[l.jsx("h3",{className:`text-sm font-medium ${u()}`,children:t.title}),l.jsx("p",{className:`mt-1 text-sm ${d()}`,children:t.message}),t.action&&l.jsx("div",{className:"mt-3",children:l.jsx("button",{onClick:t.action.onClick,className:`
                  text-sm font-medium underline hover:no-underline transition-all
                  ${t.type==="error"?"text-red-600 hover:text-red-500":""}
                  ${t.type==="success"?"text-green-600 hover:text-green-500":""}
                  ${t.type==="warning"?"text-yellow-600 hover:text-yellow-500":""}
                  ${t.type==="info"?"text-blue-600 hover:text-blue-500":""}
                `,children:t.action.label})})]}),l.jsx("div",{className:"ml-4 flex-shrink-0",children:l.jsx("button",{onClick:s,className:"inline-flex rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:l.jsx(ze,{className:"w-4 h-4"})})})]})})},ek=({notifications:t,onDismiss:e})=>t.length===0?null:l.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:t.map(n=>l.jsx(Zx,{notification:n,onDismiss:e},n.id))}),tk=()=>{const[t,e]=A.useState(null),[n,r]=A.useState(!1),[o,i]=A.useState(!1),[s,a]=A.useState(!1),[c,u]=A.useState(!1);A.useEffect(()=>{const f=()=>{const R=window.matchMedia("(display-mode: standalone)").matches,v=window.navigator.standalone===!0;u(R||v),i(R||v)},p=()=>{const R=/iPad|iPhone|iPod/.test(navigator.userAgent);a(R)};f(),p();const y=R=>{R.preventDefault(),console.log("[PWA] beforeinstallprompt event fired"),e(R),setTimeout(()=>{o||r(!0)},1e4)},T=()=>{console.log("[PWA] App was installed"),i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",y),window.addEventListener("appinstalled",T),()=>{window.removeEventListener("beforeinstallprompt",y),window.removeEventListener("appinstalled",T)}},[o]);const d=async()=>{if(t)try{await t.prompt();const{outcome:f}=await t.userChoice;console.log("[PWA] User choice:",f),console.log(f==="accepted"?"[PWA] User accepted the install prompt":"[PWA] User dismissed the install prompt"),e(null),r(!1)}catch(f){console.error("[PWA] Error showing install prompt:",f)}},h=()=>{r(!1),sessionStorage.setItem("pwa-install-dismissed","true")};return o||!n||sessionStorage.getItem("pwa-install-dismissed")?null:s&&!c?l.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-blue-600 text-white rounded-lg shadow-lg p-4 max-w-md mx-auto",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(jC,{className:"w-6 h-6 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Install TempTracker Pro"}),l.jsxs("p",{className:"text-xs opacity-90 mb-2",children:["Install this app on your iPhone: tap the share button",l.jsx("span",{className:"mx-1",children:""}),' then "Add to Home Screen".']})]}),l.jsx("button",{onClick:h,className:"text-white/80 hover:text-white",children:l.jsx(ze,{className:"w-4 h-4"})})]})}):l.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg shadow-lg p-4 max-w-md mx-auto",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:l.jsx(bC,{className:"w-6 h-6"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold mb-1",children:"Install TempTracker Pro"}),l.jsx("p",{className:"text-sm opacity-90 mb-3",children:"Get quick access and work offline by installing our app."}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("button",{onClick:d,className:"flex items-center space-x-1 bg-white text-blue-600 px-3 py-1.5 rounded text-sm font-medium hover:bg-blue-50 transition-colors",children:[l.jsx(ms,{className:"w-4 h-4"}),l.jsx("span",{children:"Install"})]}),l.jsx("button",{onClick:h,className:"text-white/80 hover:text-white text-sm px-3 py-1.5",children:"Maybe later"})]})]}),l.jsx("button",{onClick:h,className:"text-white/80 hover:text-white",children:l.jsx(ze,{className:"w-4 h-4"})})]})})};const nk=()=>{const{user:t,accessToken:e}=rd(),{notifications:n,showError:r,showSuccess:o,showWarning:i,showInfo:s,dismissNotification:a}=Kx(),[c,u]=A.useState({id:1,name:"Downtown Location"}),{equipment:d,temperatureLogs:h,stores:f,syncStatus:p,syncQueue:y,addEquipment:T,updateEquipment:R,deleteEquipment:v,addTemperatureLog:g,updateTemperatureLog:m,deleteTemperatureLog:C}=$x(c.id),[N,M]=A.useState(!1),[L,D]=A.useState(!1),[re,W]=A.useState(!1),[Ie,k]=A.useState(null),[B,$]=A.useState(!1),[E,O]=A.useState(!1),[K,_]=A.useState(!1),[F,j]=A.useState(null),[X,q]=A.useState(null),[Bt,st]=A.useState(!1),[Bn,At]=A.useState(null),[$t,oi]=A.useState(!1),[Kt,od]=A.useState(()=>{const S=new Date().toLocaleDateString("en-CA",{timeZone:"America/New_York"});return{start:S,end:S}}),[id,sd]=A.useState([]);Tt.useEffect(()=>{console.log(" Date filtering temperature logs..."),console.log("Total temperature logs:",h.length),console.log("All log IDs before filtering:",h.map(fe=>`${fe.id}-${fe.equipmentName}`)),console.log("Date filter range:",Kt.start,"to",Kt.end);const S=h.map(fe=>fe.id),H=S.filter((fe,Je)=>S.indexOf(fe)!==Je);H.length>0&&console.error(" DUPLICATE LOG IDs FOUND:",H);const ne=h.filter((fe,Je)=>{const Le=new Date(fe.timestamp).toLocaleDateString("en-CA",{timeZone:"America/New_York"}),da=Le>=Kt.start&&Le<=Kt.end;return console.log(`Log ${Je+1}: ${fe.equipmentName}, ID: ${fe.id}, timestamp: ${fe.timestamp}, converted: ${Le}, inRange: ${da}`),da||console.log(` Log filtered out - timestamp: ${fe.timestamp}, converted date: ${Le}, equipment: ${fe.equipmentName}`),da}).sort((fe,Je)=>new Date(Je.timestamp).getTime()-new Date(fe.timestamp).getTime());sd(ne)},[h,Kt.start,Kt.end]);const Ny=()=>{const H=h.filter(J=>{const ne=new Date(J.timestamp).toLocaleDateString("en-CA",{timeZone:"America/New_York"});return ne>=Kt.start&&ne<=Kt.end}).sort((J,ne)=>new Date(ne.timestamp).getTime()-new Date(J.timestamp).getTime());sd(H)};Tt.useEffect(()=>{const S=()=>{q(null)};if(X!==null)return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[X]),Tt.useEffect(()=>{const S=()=>{$t&&oi(!1)};if($t)return window.addEventListener("scroll",S,{passive:!0}),()=>window.removeEventListener("scroll",S)},[$t]);const Nt=d,ii={totalEquipment:Nt.length,normalRange:Nt.filter(S=>S.status==="Normal").length,warnings:Nt.filter(S=>S.status==="Warning").length,critical:Nt.filter(S=>S.status==="Critical").length},ad=S=>{switch(S){case"Normal":return"bg-green-100 text-green-800";case"Warning":return"bg-yellow-100 text-yellow-800";case"Critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_y=S=>{switch(S){case"Normal":return l.jsx(Lt,{className:"w-4 h-4 text-green-500"});case"Warning":return l.jsxs("div",{className:"relative w-4 h-4 text-yellow-500",children:[l.jsx(tt,{className:"w-4 h-4"}),l.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold",style:{fontSize:"10px"},children:"!"})]});case"Critical":return l.jsx($r,{className:"w-4 h-4 text-red-500"});default:return l.jsx(Vn,{className:"w-4 h-4 text-gray-500"})}},Ry=(S,H,J)=>S>=H&&S<=J?"Normal":S<H-2||S>J+2?"Critical":S===H-2||S===H-1||S===J+1||S===J+2?"Warning":"Normal",by=async S=>{try{const H={name:S.name||"",type:S.type||"Walk-in Cooler",category:S.category||"Refrigeration",location:S.location||"",minTemp:parseInt(S.minTemp)||32,maxTemp:parseInt(S.maxTemp)||40,status:"Normal",lastCheck:"Temperature not logged",imageUrl:"",notes:S.notes||"",storeId:c.id,storeName:c.name,isActive:!0},J=await T(H);if(S.imageFile&&J)try{const{sharePointService:ne}=await wh(()=>Promise.resolve().then(()=>ef),void 0);if(e){ne.setAccessToken(e);const fe=await ne.uploadEquipmentImage(S.imageFile,J.id,J.name,c.id,c.name,"Main");try{await R(J.id,{...J,imageUrl:fe.fileUrl})}catch(Je){console.error("Failed to update equipment with image URL:",Je)}}else console.error("No access token available for image upload"),i("Image Upload Failed","Equipment added successfully, but image upload failed due to authentication. Please try adding the image later.")}catch(ne){console.error("Error uploading image:",ne),i("Image Upload Failed","Equipment added successfully, but image upload failed. You can add an image later.")}else console.log("Equipment added without image - sync will happen automatically via queue");o("Equipment Added",`${H.name} has been added successfully.`)}catch(H){console.error("Error adding equipment:",H),r("Equipment Creation Failed","Unable to add equipment. Please check your connection and try again.")}},ld=async(S,H,J)=>{console.log(" handleLogTemperature called with:",{equipmentId:S,temperature:H,notes:J});const ne=d.find(Le=>Le.id===S);if(!ne){console.log(" Equipment not found for ID:",S),console.log("Available equipment IDs:",d.map(Le=>Le.id));return}console.log(" Found equipment:",ne.name);const fe=Ry(H,ne.minTemp,ne.maxTemp),Je=new Date().toISOString();console.log(" Temperature status:",fe,"at",Je);try{console.log(" Adding temperature log to local state...");const Le=await g({equipmentId:S,equipmentName:ne.name,temperature:H,status:fe,timestamp:Je,notes:J,loggedBy:typeof t=="object"&&t!==null&&(t.name||t.username)||"Unknown User",storeId:c.id,storeName:c.name});return console.log(" Temperature log added:",Le),console.log(" Updating equipment status and last check..."),await R(S,{currentTemp:H,status:fe,lastCheck:new Date().toISOString()}),console.log(" Equipment updated successfully"),Le}catch(Le){throw console.error(" Error logging temperature:",Le),r("Temperature Logging Failed","Unable to log temperature. Please check your connection and try again."),Le}},Py=async S=>{console.log("=== BULK TEMPERATURE LOGGING STARTED ==="),console.log("Received bulk temperatures:",S),console.log("Current equipment list IDs:",d.map(ne=>ne.id)),console.log("Current equipment list details:",d.map(ne=>({id:ne.id,name:ne.name}))),console.log("Current temperature logs count:",h.length),console.log("Sync queue size before bulk logging:",(y==null?void 0:y.length)||0);let H=0;const J=Object.keys(S).length;s("Bulk Logging",`Starting to log ${J} temperatures...`);for(const[ne,fe]of Object.entries(S)){console.log(`Processing temperature log ${H+1}/${J} for equipment:`,ne,"temp:",fe);try{const Je=await ld(parseInt(ne),fe);H++,console.log(` Successfully logged temperature for equipment: ${ne} (${H}/${J})`),console.log("Result:",Je),await new Promise(Le=>setTimeout(Le,100))}catch(Je){console.error(` Failed to log temperature for equipment: ${ne}`,Je)}}console.log(`=== BULK LOGGING COMPLETE: ${H}/${J} successful ===`),console.log("Temperature logs count after bulk logging:",h.length),console.log("Sync queue size after bulk logging:",(y==null?void 0:y.length)||0),H===J?o("Bulk Logging Complete",`Successfully logged temperatures for all ${H} equipment items.`):H>0?i("Partial Success",`Logged temperatures for ${H} out of ${J} equipment items.`):r("Bulk Logging Failed","Failed to log temperatures. Please check your connection and try again.")},Oy=()=>{q(null),k(null),j(null),M(!1),_(!1),D(!1),W(!1),$(!1),O(!1),st(!1),At(null),localStorage.removeItem(`temptracker-equipment-store-${c.id}`),localStorage.removeItem(`temptracker-logs-store-${c.id}`),localStorage.removeItem("temptracker-settings")},My=S=>{j(S),_(!0),q(null)},Ly=async S=>{try{if(S.imageFile&&e){console.log("Uploading image for edited equipment:",S.id),console.log("Image file received:",{name:S.imageFile.name,size:S.imageFile.size,type:S.imageFile.type});try{const{sharePointService:H}=await wh(()=>Promise.resolve().then(()=>ef),void 0);console.log("Access token check for edit:",{hasAccessToken:!!e,tokenLength:e==null?void 0:e.length}),H.setAccessToken(e);const J=await H.uploadEquipmentImage(S.imageFile,S.id,S.name,c.id,c.name,"Main");console.log("Image uploaded successfully for edit:",J);const ne={...S,imageUrl:J.fileUrl};delete ne.imageFile,await R(S.id,ne),console.log("Equipment updated with new image URL successfully"),o("Equipment Updated",`${S.name} has been updated successfully.`)}catch(H){console.error("Error uploading image during edit:",H);const J={...S};delete J.imageFile,await R(S.id,J),i("Image Upload Failed","Equipment updated successfully, but image upload failed. You can try adding the image again.")}}else{const H={...S};delete H.imageFile,await R(S.id,H),o("Equipment Updated",`${S.name} has been updated successfully.`)}}catch(H){console.error("Error updating equipment:",H),r("Equipment Update Failed","Unable to update equipment. Please check your connection and try again.")}},jy=async S=>{if(window.confirm("Are you sure you want to delete this equipment? This will also remove all associated temperature logs."))try{await v(S),q(null),o("Equipment Deleted","Equipment has been deleted successfully.")}catch(H){console.error("Error deleting equipment:",H),r("Equipment Deletion Failed","Unable to delete equipment. Please check your connection and try again.")}},Dy=async S=>{if(window.confirm("Are you sure you want to delete this temperature log?"))try{await C(S),console.log("Temperature log deleted successfully"),o("Log Deleted","Temperature log has been deleted successfully.")}catch(H){console.error("Error deleting temperature log:",H),r("Log Deletion Failed","Unable to delete temperature log. Please check your connection and try again.")}},Uy=S=>{At(S),st(!0)},Fy=async(S,H,J)=>{try{await m(S,H,J),console.log("Temperature log updated successfully"),o("Log Updated","Temperature log has been updated successfully.")}catch(ne){console.error("Error updating temperature log:",ne),r("Log Update Failed","Unable to update temperature log. Please check your connection and try again.")}},Hy=S=>{k(S),D(!0)};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Xx,{temperatureLogs:h,equipment:Nt}),l.jsx(ek,{notifications:n,onDismiss:a}),l.jsx("header",{className:"bg-gray-200 shadow-sm border-b-2 border-gray-300",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"/icons/icon-72x72.png",alt:"TempTracker Pro",className:"w-10 h-10 mr-3",onError:S=>{console.log("Icon failed to load, showing fallback"),S.currentTarget.style.display="none";const H=S.currentTarget.nextElementSibling;H&&H.classList.contains("fallback-icon")&&(H.style.display="block")}}),l.jsx(Vn,{className:"w-10 h-10 mr-3 text-blue-600 fallback-icon hidden"}),l.jsx("h1",{className:"text-xl font-bold text-gray-900",children:c.name})]}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>oi(!$t),className:"p-2 text-gray-600 hover:text-gray-900 transition-colors rounded-md hover:bg-gray-200",children:l.jsx(RC,{className:"w-6 h-6"})}),$t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>oi(!1)}),l.jsx("div",{className:"absolute top-12 right-0 w-72 bg-white rounded-lg shadow-xl border z-50 max-h-96 overflow-y-auto",style:{maxWidth:"calc(100vw - 2rem)"},children:l.jsxs("div",{className:"p-4 space-y-2",children:[l.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b border-gray-200",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx(DC,{className:"w-6 h-6 text-gray-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-base text-gray-900 truncate leading-tight",children:typeof t=="object"&&t!==null&&(t.name||t.username)||"User"}),l.jsx("div",{className:"text-sm text-gray-500 leading-tight",children:"Logged in"})]})]}),l.jsxs("div",{className:"flex items-start space-x-3 pb-3 border-b border-gray-200",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx("div",{className:`w-3 h-3 rounded-full ${p.isSyncing?"bg-yellow-500 animate-pulse":p.queueSize>0?"bg-blue-500 animate-pulse":p.isOnline?"bg-green-500":"bg-red-500"}`})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-base text-gray-900 leading-tight",children:p.isSyncing?"Syncing...":p.queueSize>0?`Queue: ${p.queueSize}`:p.isOnline?"Online":"Offline"}),p.lastSync&&l.jsxs("div",{className:"text-sm text-gray-500 leading-tight",children:["Last sync: ",new Date(p.lastSync).toLocaleTimeString()]})]})]}),l.jsxs("div",{className:"flex items-start space-x-3 pb-2",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l.jsx(pg,{className:"w-6 h-6 text-gray-600"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("button",{onClick:()=>{O(!0),oi(!1)},className:"font-semibold text-base text-gray-900 hover:text-blue-600 transition-colors leading-tight",children:"Settings"})})]}),l.jsx("div",{className:"pt-2 border-t border-gray-200",children:l.jsx("div",{className:"text-xs text-gray-400 text-center",children:"v2.5.7 - TempTracker Pro"})})]})})]})]})]})})}),l.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("button",{onClick:()=>W(!0),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[l.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Log All Temperatures"]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Equipment"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ii.totalEquipment})]}),l.jsx(Vn,{className:"w-8 h-8 text-blue-500"})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Normal Range"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ii.normalRange})]}),l.jsx(Lt,{className:"w-8 h-8 text-green-500"})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Warnings"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ii.warnings})]}),l.jsx(tt,{className:"w-8 h-8 text-yellow-500"})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:ii.critical})]}),l.jsx($r,{className:"w-8 h-8 text-red-500"})]})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Equipment Overview (",Nt.length," items)"]}),l.jsx("div",{className:"space-y-4",children:(()=>(console.log(" Equipment Overview Render:"),console.log("Equipment array length:",Nt.length),console.log("Equipment IDs:",Nt.map(S=>`${S.id}-${S.name}`)),Nt))().map(S=>l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center mr-4 overflow-hidden",children:S.imageUrl?l.jsx("img",{src:S.imageUrl,alt:S.name,className:"w-full h-full object-cover"}):l.jsx("span",{className:"text-gray-400 text-4xl",children:""})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:S.name}),l.jsx("p",{className:"text-gray-600 text-sm",children:S.location})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ad(S.status)}`,children:S.status}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:H=>{H.stopPropagation(),q(X===S.id?null:S.id)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(PC,{className:"w-4 h-4"})}),X===S.id&&l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border",onClick:H=>H.stopPropagation(),style:{right:0,transform:"translateX(0)"},children:[l.jsxs("button",{onClick:H=>{H.stopPropagation(),My(S)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[l.jsx(Th,{className:"w-4 h-4 mr-2"}),"Edit Equipment"]}),l.jsxs("button",{onClick:H=>{H.stopPropagation(),jy(S.id)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[l.jsx(Go,{className:"w-4 h-4 mr-2"}),"Delete Equipment"]})]})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(Vn,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Current Temperature"})]}),l.jsx("div",{className:"font-semibold text-gray-900",children:S.currentTemp?`${S.currentTemp}F`:"No data"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(tt,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Range"})]}),l.jsxs("div",{className:"font-semibold text-gray-900",children:[S.minTemp,"F - ",S.maxTemp,"F"]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(Lt,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Last Check"})]}),l.jsx("div",{className:"font-semibold text-gray-900 text-right",children:S.lastCheck==="Never"||S.lastCheck==="Temperature not logged"?S.lastCheck:new Date(S.lastCheck).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),l.jsxs("button",{onClick:()=>Hy(S),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[l.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Log Temperature"]})]},S.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Temperature Log"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"date",className:"border border-gray-300 rounded-md px-2 py-1 text-xs w-28",value:Kt.start,onChange:S=>od(H=>({...H,start:S.target.value}))}),l.jsx("span",{className:"text-gray-500 text-xs",children:"to"}),l.jsx("input",{type:"date",className:"border border-gray-300 rounded-md px-2 py-1 text-xs w-28",value:Kt.end,onChange:S=>od(H=>({...H,end:S.target.value}))})]}),l.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[l.jsx("button",{onClick:Ny,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Apply Filter",children:l.jsx(Lt,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>$(!0),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Export",children:l.jsx(ms,{className:"w-4 h-4"})})]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"DATE & TIME"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"EQUIPMENT"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"TEMPERATURE"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"STATUS"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"LOGGED BY"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"ACTIONS"})]})}),l.jsx("tbody",{children:id.length===0?l.jsx("tr",{children:l.jsx("td",{className:"py-8 px-4 text-center text-gray-500",colSpan:6,children:"No temperature logs found for selected date range"})}):id.slice(0,10).map(S=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:new Date(S.timestamp).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:S.equipmentName}),l.jsxs("td",{className:"py-3 px-4 text-sm text-gray-900",children:[S.temperature,"F"]}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ad(S.status)}`,children:[_y(S.status),l.jsx("span",{className:"ml-1",children:S.status})]})}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-900",children:(()=>{console.log("Debug logged by:",S.loggedBy,typeof S.loggedBy);const H=S.loggedBy;if(!H||H==="Unknown"||H==="23"||/^\d+$/.test(String(H))){const J=typeof t=="object"&&t!==null&&(t.name||t.username)||"User";return console.log("Using current user name:",J),J}return H})()}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>Uy(S),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit log",children:l.jsx(Th,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Dy(S.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete log",children:l.jsx(Go,{className:"w-4 h-4"})})]})})]},S.id))})]})})]})]}),l.jsx(Gx,{isOpen:N,onClose:()=>M(!1),onSave:by}),l.jsx(Wx,{isOpen:L,onClose:()=>{D(!1),k(null)},equipment:Ie,onLogTemperature:ld}),l.jsx(qx,{isOpen:re,onClose:()=>W(!1),equipment:Nt,onLogTemperatures:Py}),l.jsx(Qx,{isOpen:B,onClose:()=>$(!1),temperatureLogs:h,equipment:Nt}),l.jsx(Yx,{isOpen:E,onClose:()=>O(!1),onClearAllData:Oy,stores:f,selectedStore:c,onStoreChange:u,onAddEquipment:()=>M(!0)}),l.jsx(Vx,{isOpen:K,onClose:()=>{_(!1),j(null)},onSave:Ly,equipment:F}),l.jsx(Jx,{isOpen:Bt,onClose:()=>{st(!1),At(null)},onSave:Fy,log:Bn,equipment:Bn?d.find(S=>S.id===Bn.equipmentId):null}),l.jsx(tk,{})]})},rk=({children:t})=>{const{isAuthenticated:e,loading:n,error:r,login:o}=rd();return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx(NC,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Initializing TempTracker Pro"}),l.jsx("p",{className:"text-gray-600",children:"Setting up authentication..."})]})}):r?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[l.jsx(TC,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Error"}),l.jsx("p",{className:"text-gray-600 mb-4",children:r}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})}):e?l.jsx(l.Fragment,{children:t}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"bg-blue-600 rounded-full p-3 w-16 h-16 mx-auto mb-6",children:l.jsx(LC,{className:"h-10 w-10 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"TempTracker Pro"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"Professional temperature monitoring for Cristy's Pizza"}),l.jsxs("div",{className:"space-y-3 mb-8 text-left",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Real-time temperature logging"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"SharePoint integration"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Offline-capable PWA"]}),l.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3"}),"Automated compliance reporting"]})]}),l.jsxs("button",{onClick:o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 font-medium",children:[l.jsx(_C,{className:"h-5 w-5"}),l.jsx("span",{children:"Sign in with Microsoft"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Secure authentication via Microsoft 365"})]})})})};window.addEventListener("error",t=>{var e;if(console.error("Global error:",t.error),t.error&&typeof document<"u"){const n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;width:100%;background:red;color:white;padding:10px;z-index:9999;font-size:12px;word-wrap:break-word;",n.textContent=`Error: ${t.error.message} - ${(e=t.error.stack)==null?void 0:e.substring(0,200)}`,document.body.appendChild(n),setTimeout(()=>n.remove(),1e4)}});window.addEventListener("unhandledrejection",t=>{if(console.error("Unhandled promise rejection:",t.reason),typeof document<"u"){const e=document.createElement("div");e.style.cssText="position:fixed;top:20px;left:0;width:100%;background:orange;color:black;padding:10px;z-index:9999;font-size:12px;word-wrap:break-word;",e.textContent=`Promise rejection: ${t.reason}`,document.body.appendChild(e),setTimeout(()=>e.remove(),1e4)}});"serviceWorker"in navigator?(window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js");console.log("[PWA] Service worker registered successfully:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&(navigator.serviceWorker.controller?(console.log("[PWA] New content is available; please refresh."),confirm("New version available! Refresh to update?")&&window.location.reload()):console.log("[PWA] Content is cached for offline use."))})})}catch(t){console.error("[PWA] Service worker registration failed:",t)}}),navigator.serviceWorker.addEventListener("message",t=>{if(console.log("[PWA] Message from service worker:",t.data),t.data&&t.data.type==="BACKGROUND_SYNC"){const e=new CustomEvent("backgroundSync",{detail:t.data.action});window.dispatchEvent(e)}})):console.warn("[PWA] Service workers are not supported in this browser.");Ga.createRoot(document.getElementById("root")).render(l.jsx(Tt.StrictMode,{children:l.jsx(zx,{children:l.jsx(rk,{children:l.jsx(nk,{})})})}));
